{"id":"DmXv","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-functions/package.json","includedInParent":true,"mtime":1591969205140},{"name":"./codegen","loc":{"line":1,"column":43},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/parser.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/codegen.js"},{"name":"./constants","loc":{"line":2,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/parser.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/constants.js"},{"name":"vega-expression","loc":{"line":3,"column":36},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/parser.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-expression/index.js"},{"name":"vega-util","loc":{"line":4,"column":67},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-functions/src/parser.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=t;var e=require(\"./codegen\"),r=require(\"./constants\"),s=require(\"vega-expression\"),a=require(\"vega-util\");function t(t,i){var n,o,l={};try{t=(0,a.isString)(t)?t:(0,a.stringValue)(t)+\"\",n=(0,s.parse)(t)}catch(u){(0,a.error)(\"Expression parse error: \"+t)}return n.visit(r=>{if(r.type===s.CallExpression){var a=r.callee.name,t=e.codegenParams.visitors[a];t&&t(a,r.arguments,i,l)}}),(o=(0,e.codeGenerator)(n)).globals.forEach(e=>{var s=r.SignalPrefix+e;!(0,a.hasOwnProperty)(l,s)&&i.getSignal(e)&&(l[s]=i.signalRef(e))}),{$expr:(0,a.extend)({code:o.code},i.options.ast?{ast:n}:null),$fields:o.fields,$params:l}}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":42,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":2,"column":0},"generated":{"line":1,"column":113}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":2,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":3,"column":0},"generated":{"line":1,"column":138}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":3,"column":0},"generated":{"line":1,"column":140}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":3,"column":0},"generated":{"line":1,"column":148}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":4,"column":0},"generated":{"line":1,"column":167}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":4,"column":0},"generated":{"line":1,"column":169}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":4,"column":0},"generated":{"line":1,"column":177}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":6,"column":15},"generated":{"line":1,"column":190}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":6,"column":24},"generated":{"line":1,"column":199}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":6,"column":24},"generated":{"line":1,"column":201}},{"source":"node_modules/vega-functions/src/parser.js","name":"scope","original":{"line":6,"column":30},"generated":{"line":1,"column":203}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":7,"column":6},"generated":{"line":1,"column":206}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":7,"column":19},"generated":{"line":1,"column":210}},{"source":"node_modules/vega-functions/src/parser.js","name":"gen","original":{"line":7,"column":24},"generated":{"line":1,"column":212}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":7,"column":6},"generated":{"line":1,"column":214}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":7,"column":15},"generated":{"line":1,"column":216}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":10,"column":6},"generated":{"line":1,"column":219}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":4},"generated":{"line":1,"column":223}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":11,"column":11},"generated":{"line":1,"column":226}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":20},"generated":{"line":1,"column":228}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":20},"generated":{"line":1,"column":230}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":20},"generated":{"line":1,"column":240}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":28},"generated":{"line":1,"column":243}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":11,"column":36},"generated":{"line":1,"column":246}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":48},"generated":{"line":1,"column":248}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":48},"generated":{"line":1,"column":250}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":11,"column":48},"generated":{"line":1,"column":263}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":11,"column":56},"generated":{"line":1,"column":266}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":12,"column":4},"generated":{"line":1,"column":269}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":12,"column":10},"generated":{"line":1,"column":272}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":12,"column":16},"generated":{"line":1,"column":274}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":12,"column":16},"generated":{"line":1,"column":276}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":12,"column":16},"generated":{"line":1,"column":283}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":13,"column":4},"generated":{"line":1,"column":286}},{"source":"node_modules/vega-functions/src/parser.js","name":"err","original":{"line":13,"column":11},"generated":{"line":1,"column":292}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":14,"column":10},"generated":{"line":1,"column":296}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":14,"column":10},"generated":{"line":1,"column":298}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":14,"column":10},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":14,"column":10},"generated":{"line":1,"column":307}},{"source":"node_modules/vega-functions/src/parser.js","name":"expr","original":{"line":14,"column":39},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":37,"column":9},"generated":{"line":1,"column":337}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":18,"column":2},"generated":{"line":1,"column":344}},{"source":"node_modules/vega-functions/src/parser.js","name":"visit","original":{"line":18,"column":6},"generated":{"line":1,"column":346}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":18,"column":12},"generated":{"line":1,"column":352}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":19,"column":8},"generated":{"line":1,"column":356}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":19,"column":8},"generated":{"line":1,"column":359}},{"source":"node_modules/vega-functions/src/parser.js","name":"type","original":{"line":19,"column":13},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-functions/src/parser.js","name":"CallExpression","original":{"line":19,"column":22},"generated":{"line":1,"column":368}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":19,"column":4},"generated":{"line":1,"column":370}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":19,"column":8},"generated":{"line":1,"column":385}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":20,"column":8},"generated":{"line":1,"column":386}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":20,"column":8},"generated":{"line":1,"column":390}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":20,"column":15},"generated":{"line":1,"column":392}},{"source":"node_modules/vega-functions/src/parser.js","name":"callee","original":{"line":20,"column":20},"generated":{"line":1,"column":394}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":20,"column":27},"generated":{"line":1,"column":401}},{"source":"node_modules/vega-functions/src/parser.js","name":"visit","original":{"line":21,"column":8},"generated":{"line":1,"column":406}},{"source":"node_modules/vega-functions/src/parser.js","name":"codegenParams","original":{"line":21,"column":16},"generated":{"line":1,"column":408}},{"source":"node_modules/vega-functions/src/parser.js","name":"visitors","original":{"line":21,"column":30},"generated":{"line":1,"column":410}},{"source":"node_modules/vega-functions/src/parser.js","name":"visitors","original":{"line":21,"column":30},"generated":{"line":1,"column":424}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":21,"column":39},"generated":{"line":1,"column":433}},{"source":"node_modules/vega-functions/src/parser.js","name":"visit","original":{"line":22,"column":8},"generated":{"line":1,"column":436}},{"source":"node_modules/vega-functions/src/parser.js","name":"visit","original":{"line":22,"column":15},"generated":{"line":1,"column":439}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":22,"column":21},"generated":{"line":1,"column":441}},{"source":"node_modules/vega-functions/src/parser.js","name":"node","original":{"line":22,"column":27},"generated":{"line":1,"column":443}},{"source":"node_modules/vega-functions/src/parser.js","name":"arguments","original":{"line":22,"column":32},"generated":{"line":1,"column":445}},{"source":"node_modules/vega-functions/src/parser.js","name":"scope","original":{"line":22,"column":43},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":22,"column":50},"generated":{"line":1,"column":457}},{"source":"node_modules/vega-functions/src/parser.js","name":"gen","original":{"line":26,"column":2},"generated":{"line":1,"column":464}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":26,"column":8},"generated":{"line":1,"column":467}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":26,"column":22},"generated":{"line":1,"column":469}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":26,"column":22},"generated":{"line":1,"column":471}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":26,"column":22},"generated":{"line":1,"column":486}},{"source":"node_modules/vega-functions/src/parser.js","name":"globals","original":{"line":29,"column":6},"generated":{"line":1,"column":490}},{"source":"node_modules/vega-functions/src/parser.js","name":"forEach","original":{"line":29,"column":14},"generated":{"line":1,"column":498}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":29,"column":22},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-functions/src/parser.js","name":"signalName","original":{"line":30,"column":8},"generated":{"line":1,"column":510}},{"source":"node_modules/vega-functions/src/parser.js","name":"signalName","original":{"line":30,"column":8},"generated":{"line":1,"column":514}},{"source":"node_modules/vega-functions/src/parser.js","name":"SignalPrefix","original":{"line":30,"column":21},"generated":{"line":1,"column":516}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":30,"column":36},"generated":{"line":1,"column":518}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":30,"column":36},"generated":{"line":1,"column":531}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":31,"column":9},"generated":{"line":1,"column":535}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":31,"column":24},"generated":{"line":1,"column":537}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":31,"column":24},"generated":{"line":1,"column":539}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":31,"column":24},"generated":{"line":1,"column":555}},{"source":"node_modules/vega-functions/src/parser.js","name":"signalName","original":{"line":31,"column":32},"generated":{"line":1,"column":557}},{"source":"node_modules/vega-functions/src/parser.js","name":"scope","original":{"line":31,"column":47},"generated":{"line":1,"column":561}},{"source":"node_modules/vega-functions/src/parser.js","name":"getSignal","original":{"line":31,"column":53},"generated":{"line":1,"column":563}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":31,"column":63},"generated":{"line":1,"column":573}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":32,"column":6},"generated":{"line":1,"column":578}},{"source":"node_modules/vega-functions/src/parser.js","name":"signalName","original":{"line":32,"column":13},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-functions/src/parser.js","name":"scope","original":{"line":32,"column":27},"generated":{"line":1,"column":583}},{"source":"node_modules/vega-functions/src/parser.js","name":"signalRef","original":{"line":32,"column":33},"generated":{"line":1,"column":585}},{"source":"node_modules/vega-functions/src/parser.js","name":"name","original":{"line":32,"column":43},"generated":{"line":1,"column":595}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":37,"column":9},"generated":{"line":1,"column":601}},{"source":"node_modules/vega-functions/src/parser.js","name":"$expr","original":{"line":38,"column":4},"generated":{"line":1,"column":602}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":13},"generated":{"line":1,"column":609}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":20},"generated":{"line":1,"column":611}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":20},"generated":{"line":1,"column":613}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":20},"generated":{"line":1,"column":621}},{"source":"node_modules/vega-functions/src/parser.js","name":"code","original":{"line":38,"column":21},"generated":{"line":1,"column":622}},{"source":"node_modules/vega-functions/src/parser.js","name":"gen","original":{"line":38,"column":27},"generated":{"line":1,"column":627}},{"source":"node_modules/vega-functions/src/parser.js","name":"code","original":{"line":38,"column":31},"generated":{"line":1,"column":629}},{"source":"node_modules/vega-functions/src/parser.js","name":"scope","original":{"line":38,"column":38},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-functions/src/parser.js","name":"options","original":{"line":38,"column":44},"generated":{"line":1,"column":637}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":38,"column":52},"generated":{"line":1,"column":645}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":58},"generated":{"line":1,"column":649}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":38,"column":59},"generated":{"line":1,"column":650}},{"source":"node_modules/vega-functions/src/parser.js","name":"ast","original":{"line":38,"column":59},"generated":{"line":1,"column":654}},{"source":"node_modules/vega-functions/src/parser.js","original":{"line":38,"column":66},"generated":{"line":1,"column":657}},{"source":"node_modules/vega-functions/src/parser.js","name":"$fields","original":{"line":39,"column":4},"generated":{"line":1,"column":663}},{"source":"node_modules/vega-functions/src/parser.js","name":"gen","original":{"line":39,"column":13},"generated":{"line":1,"column":671}},{"source":"node_modules/vega-functions/src/parser.js","name":"fields","original":{"line":39,"column":17},"generated":{"line":1,"column":673}},{"source":"node_modules/vega-functions/src/parser.js","name":"$params","original":{"line":40,"column":4},"generated":{"line":1,"column":680}},{"source":"node_modules/vega-functions/src/parser.js","name":"params","original":{"line":40,"column":13},"generated":{"line":1,"column":688}}],"sources":{"node_modules/vega-functions/src/parser.js":"import {codeGenerator, codegenParams} from './codegen';\nimport {SignalPrefix} from './constants';\nimport {CallExpression, parse} from 'vega-expression';\nimport {error, extend, hasOwnProperty, isString, stringValue} from 'vega-util';\n\nexport default function(expr, scope) {\n  var params = {}, ast, gen;\n\n  // parse the expression to an abstract syntax tree (ast)\n  try {\n    expr = isString(expr) ? expr : (stringValue(expr) + '');\n    ast = parse(expr);\n  } catch (err) {\n    error('Expression parse error: ' + expr);\n  }\n\n  // analyze ast function calls for dependencies\n  ast.visit(node => {\n    if (node.type !== CallExpression) return;\n    var name = node.callee.name,\n        visit = codegenParams.visitors[name];\n    if (visit) visit(name, node.arguments, scope, params);\n  });\n\n  // perform code generation\n  gen = codeGenerator(ast);\n\n  // collect signal dependencies\n  gen.globals.forEach(name => {\n    var signalName = SignalPrefix + name;\n    if (!hasOwnProperty(params, signalName) && scope.getSignal(name)) {\n      params[signalName] = scope.signalRef(name);\n    }\n  });\n\n  // return generated expression code and dependencies\n  return {\n    $expr:   extend({code: gen.code}, scope.options.ast ? {ast} : null),\n    $fields: gen.fields,\n    $params: params\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"58a13dbc0abc8ad7ad9ec644c5e64154","cacheData":{"env":{}}}