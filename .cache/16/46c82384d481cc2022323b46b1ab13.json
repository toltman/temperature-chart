{"id":"tYpF","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974399859},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-parser/package.json","includedInParent":true,"mtime":1591969205174},{"name":"../transform","loc":{"line":1,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/marks/data.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/transform.js"},{"name":"../../transforms","loc":{"line":2,"column":22},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/marks/data.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/transforms.js"},{"name":"../../util","loc":{"line":3,"column":18},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/marks/data.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/util.js"},{"name":"vega-util","loc":{"line":4,"column":35},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/marks/data.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=f,exports.getDataRef=d;var e=u(require(\"../transform\")),r=require(\"../../transforms\"),a=require(\"../../util\"),t=require(\"vega-util\");function u(e){return e&&e.__esModule?e:{default:e}}function f(u,f,o){var g,l,n,p,s;return u?(g=u.facet)&&(f||(0,t.error)(\"Only group marks can be faceted.\"),null!=g.field?p=s=d(g,o):(u.data?s=(0,a.ref)(o.getData(u.data).aggregate):((n=(0,e.default)((0,t.extend)({type:\"aggregate\",groupby:(0,t.array)(g.groupby)},g.aggregate),o)).params.key=o.keyRef(g.groupby),n.params.pulse=d(g,o),p=s=(0,a.ref)(o.add(n))),l=o.keyRef(g.groupby,!0))):p=(0,a.ref)(o.add((0,r.Collect)(null,[{}]))),p||(p=d(u,o)),{key:l,pulse:p,parent:s}}function d(e,r){return e.$ref?e:e.data&&e.data.$ref?e.data:(0,a.ref)(r.getData(e.data).output)}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":105}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":113}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":2,"column":0},"generated":{"line":1,"column":140}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":2,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":2,"column":0},"generated":{"line":1,"column":150}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":3,"column":0},"generated":{"line":1,"column":170}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":3,"column":0},"generated":{"line":1,"column":172}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":3,"column":0},"generated":{"line":1,"column":180}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":4,"column":0},"generated":{"line":1,"column":194}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":4,"column":0},"generated":{"line":1,"column":196}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":4,"column":0},"generated":{"line":1,"column":204}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":217}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":226}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":228}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":231}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":238}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":241}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":243}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":254}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":256}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":257}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":55,"column":1},"generated":{"line":1,"column":265}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":6,"column":15},"generated":{"line":1,"column":268}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":6,"column":24},"generated":{"line":1,"column":277}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":6,"column":24},"generated":{"line":1,"column":279}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"group","original":{"line":6,"column":30},"generated":{"line":1,"column":281}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":6,"column":37},"generated":{"line":1,"column":283}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":7,"column":6},"generated":{"line":1,"column":286}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":7,"column":6},"generated":{"line":1,"column":290}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"key","original":{"line":7,"column":13},"generated":{"line":1,"column":292}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"op","original":{"line":7,"column":18},"generated":{"line":1,"column":294}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":7,"column":22},"generated":{"line":1,"column":296}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":7,"column":31},"generated":{"line":1,"column":298}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":44,"column":9},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":10,"column":7},"generated":{"line":1,"column":307}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":15,"column":11},"generated":{"line":1,"column":310}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":15,"column":19},"generated":{"line":1,"column":312}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":15,"column":24},"generated":{"line":1,"column":314}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"group","original":{"line":16,"column":9},"generated":{"line":1,"column":323}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":16,"column":16},"generated":{"line":1,"column":327}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":16,"column":22},"generated":{"line":1,"column":329}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":16,"column":22},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":16,"column":22},"generated":{"line":1,"column":338}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":19,"column":23},"generated":{"line":1,"column":374}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":19,"column":8},"generated":{"line":1,"column":380}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"field","original":{"line":19,"column":14},"generated":{"line":1,"column":382}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":20,"column":6},"generated":{"line":1,"column":388}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":20,"column":16},"generated":{"line":1,"column":390}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getDataRef","original":{"line":20,"column":25},"generated":{"line":1,"column":392}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":20,"column":36},"generated":{"line":1,"column":394}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":20,"column":43},"generated":{"line":1,"column":396}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":23,"column":11},"generated":{"line":1,"column":400}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":23,"column":16},"generated":{"line":1,"column":402}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":32,"column":8},"generated":{"line":1,"column":407}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":32,"column":17},"generated":{"line":1,"column":410}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":32,"column":21},"generated":{"line":1,"column":412}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":32,"column":21},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":32,"column":21},"generated":{"line":1,"column":419}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getData","original":{"line":32,"column":27},"generated":{"line":1,"column":421}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":32,"column":35},"generated":{"line":1,"column":429}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":32,"column":40},"generated":{"line":1,"column":431}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"aggregate","original":{"line":32,"column":46},"generated":{"line":1,"column":437}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"op","original":{"line":24,"column":8},"generated":{"line":1,"column":450}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":13},"generated":{"line":1,"column":453}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":28},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":28},"generated":{"line":1,"column":457}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":28},"generated":{"line":1,"column":467}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":35},"generated":{"line":1,"column":469}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":35},"generated":{"line":1,"column":471}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":24,"column":35},"generated":{"line":1,"column":479}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"type","original":{"line":25,"column":10},"generated":{"line":1,"column":480}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":25,"column":19},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"groupby","original":{"line":26,"column":10},"generated":{"line":1,"column":497}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":26,"column":19},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":26,"column":25},"generated":{"line":1,"column":508}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":26,"column":25},"generated":{"line":1,"column":510}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":26,"column":25},"generated":{"line":1,"column":517}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"groupby","original":{"line":26,"column":31},"generated":{"line":1,"column":519}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":27,"column":11},"generated":{"line":1,"column":529}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"aggregate","original":{"line":27,"column":17},"generated":{"line":1,"column":531}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":27,"column":29},"generated":{"line":1,"column":542}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"params","original":{"line":28,"column":11},"generated":{"line":1,"column":546}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"key","original":{"line":28,"column":18},"generated":{"line":1,"column":553}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":28,"column":24},"generated":{"line":1,"column":557}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"keyRef","original":{"line":28,"column":30},"generated":{"line":1,"column":559}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":28,"column":37},"generated":{"line":1,"column":566}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"groupby","original":{"line":28,"column":43},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"op","original":{"line":29,"column":8},"generated":{"line":1,"column":577}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"params","original":{"line":29,"column":11},"generated":{"line":1,"column":579}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"pulse","original":{"line":29,"column":18},"generated":{"line":1,"column":586}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getDataRef","original":{"line":29,"column":26},"generated":{"line":1,"column":592}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":29,"column":37},"generated":{"line":1,"column":594}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":29,"column":44},"generated":{"line":1,"column":596}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":30,"column":8},"generated":{"line":1,"column":599}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":30,"column":18},"generated":{"line":1,"column":601}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":30,"column":27},"generated":{"line":1,"column":604}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":30,"column":31},"generated":{"line":1,"column":606}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":30,"column":31},"generated":{"line":1,"column":608}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":30,"column":31},"generated":{"line":1,"column":613}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"add","original":{"line":30,"column":37},"generated":{"line":1,"column":615}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"op","original":{"line":30,"column":41},"generated":{"line":1,"column":619}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"key","original":{"line":35,"column":6},"generated":{"line":1,"column":624}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":35,"column":12},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"keyRef","original":{"line":35,"column":18},"generated":{"line":1,"column":628}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"facet","original":{"line":35,"column":25},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"groupby","original":{"line":35,"column":31},"generated":{"line":1,"column":637}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":35,"column":40},"generated":{"line":1,"column":646}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":11,"column":4},"generated":{"line":1,"column":651}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":14},"generated":{"line":1,"column":654}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":11,"column":18},"generated":{"line":1,"column":656}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":11,"column":18},"generated":{"line":1,"column":658}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":11,"column":18},"generated":{"line":1,"column":663}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"add","original":{"line":11,"column":24},"generated":{"line":1,"column":665}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":28},"generated":{"line":1,"column":670}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":36},"generated":{"line":1,"column":672}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":36},"generated":{"line":1,"column":674}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":36},"generated":{"line":1,"column":683}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":42},"generated":{"line":1,"column":688}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":11,"column":43},"generated":{"line":1,"column":689}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":40,"column":7},"generated":{"line":1,"column":696}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":41,"column":4},"generated":{"line":1,"column":700}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getDataRef","original":{"line":41,"column":14},"generated":{"line":1,"column":702}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":41,"column":25},"generated":{"line":1,"column":704}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":41,"column":31},"generated":{"line":1,"column":706}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":44,"column":9},"generated":{"line":1,"column":710}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"key","original":{"line":45,"column":4},"generated":{"line":1,"column":711}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"key","original":{"line":45,"column":9},"generated":{"line":1,"column":715}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"pulse","original":{"line":46,"column":4},"generated":{"line":1,"column":717}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"dataRef","original":{"line":46,"column":11},"generated":{"line":1,"column":723}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":47,"column":4},"generated":{"line":1,"column":725}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"parent","original":{"line":47,"column":12},"generated":{"line":1,"column":732}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":51,"column":7},"generated":{"line":1,"column":735}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getDataRef","original":{"line":51,"column":16},"generated":{"line":1,"column":744}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":51,"column":27},"generated":{"line":1,"column":746}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":51,"column":33},"generated":{"line":1,"column":748}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":52,"column":9},"generated":{"line":1,"column":751}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":52,"column":9},"generated":{"line":1,"column":758}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"$ref","original":{"line":52,"column":14},"generated":{"line":1,"column":760}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":52,"column":21},"generated":{"line":1,"column":765}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":53,"column":6},"generated":{"line":1,"column":767}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":53,"column":11},"generated":{"line":1,"column":769}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":53,"column":19},"generated":{"line":1,"column":775}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":53,"column":24},"generated":{"line":1,"column":777}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"$ref","original":{"line":53,"column":29},"generated":{"line":1,"column":782}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":53,"column":36},"generated":{"line":1,"column":787}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":53,"column":41},"generated":{"line":1,"column":789}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","original":{"line":54,"column":6},"generated":{"line":1,"column":795}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":54,"column":10},"generated":{"line":1,"column":797}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":54,"column":10},"generated":{"line":1,"column":799}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"scope","original":{"line":54,"column":10},"generated":{"line":1,"column":804}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"getData","original":{"line":54,"column":16},"generated":{"line":1,"column":806}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"from","original":{"line":54,"column":24},"generated":{"line":1,"column":814}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"data","original":{"line":54,"column":29},"generated":{"line":1,"column":816}},{"source":"node_modules/vega-parser/src/parsers/marks/data.js","name":"output","original":{"line":54,"column":35},"generated":{"line":1,"column":822}}],"sources":{"node_modules/vega-parser/src/parsers/marks/data.js":"import parseTransform from '../transform';\nimport {Collect} from '../../transforms';\nimport {ref} from '../../util';\nimport {array, error, extend} from 'vega-util';\n\nexport default function(from, group, scope) {\n  var facet, key, op, dataRef, parent;\n\n  // if no source data, generate singleton datum\n  if (!from) {\n    dataRef = ref(scope.add(Collect(null, [{}])));\n  }\n\n  // if faceted, process facet specification\n  else if (facet = from.facet) {\n    if (!group) error('Only group marks can be faceted.');\n\n    // use pre-faceted source data, if available\n    if (facet.field != null) {\n      dataRef = parent = getDataRef(facet, scope);\n    } else {\n      // generate facet aggregates if no direct data specification\n      if (!from.data) {\n        op = parseTransform(extend({\n          type:    'aggregate',\n          groupby: array(facet.groupby)\n        }, facet.aggregate), scope);\n        op.params.key = scope.keyRef(facet.groupby);\n        op.params.pulse = getDataRef(facet, scope);\n        dataRef = parent = ref(scope.add(op));\n      } else {\n        parent = ref(scope.getData(from.data).aggregate);\n      }\n\n      key = scope.keyRef(facet.groupby, true);\n    }\n  }\n\n  // if not yet defined, get source data reference\n  if (!dataRef) {\n    dataRef = getDataRef(from, scope);\n  }\n\n  return {\n    key: key,\n    pulse: dataRef,\n    parent: parent\n  };\n}\n\nexport function getDataRef(from, scope) {\n  return from.$ref ? from\n    : from.data && from.data.$ref ? from.data\n    : ref(scope.getData(from.data).output);\n}"},"lineCount":null}},"error":null,"hash":"b7269b1bd7f43ef0388852cbc113a075","cacheData":{"env":{}}}