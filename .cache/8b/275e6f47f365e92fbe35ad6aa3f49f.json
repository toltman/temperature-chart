{"id":"sSsz","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974472658},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-geo/package.json","includedInParent":true,"mtime":1591969205145},{"name":"./util/density2D","loc":{"line":1,"column":22},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-geo/src/KDE2D.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-geo/src/util/density2D.js"},{"name":"vega-dataflow","loc":{"line":2,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-geo/src/KDE2D.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":3,"column":37},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-geo/src/KDE2D.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=n,exports.params=s,exports.partition=l;var e=a(require(\"./util/density2D\")),r=require(\"vega-dataflow\"),t=require(\"vega-util\");function a(e){return e&&e.__esModule?e:{default:e}}function n(e){r.Transform.call(this,null,e)}n.Definition={type:\"KDE2D\",metadata:{generates:!0},params:[{name:\"size\",type:\"number\",array:!0,length:2,required:!0},{name:\"x\",type:\"field\",required:!0},{name:\"y\",type:\"field\",required:!0},{name:\"weight\",type:\"field\"},{name:\"groupby\",type:\"field\",array:!0},{name:\"cellSize\",type:\"number\"},{name:\"bandwidth\",type:\"number\",array:!0,length:2},{name:\"counts\",type:\"boolean\",default:!1},{name:\"as\",type:\"string\",default:\"grid\"}]};var i=(0,t.inherits)(n,r.Transform);const u=[\"x\",\"y\",\"weight\",\"size\",\"cellSize\",\"bandwidth\"];function s(e,r){return u.forEach(t=>null!=r[t]?e[t](r[t]):0),e}function l(e,r){var t,a,n,i,u,s,l=[],o=e=>e(i);if(null==r)l.push(e);else for(t={},a=0,n=e.length;a<n;++a)i=e[a],(s=t[u=r.map(o)])||(t[u]=s=[],s.dims=u,l.push(s)),s.push(i);return l}i.transform=function(a,n){if(this.value&&!n.changed()&&!a.modified())return n.StopPropagation;var i,u=n.fork(n.NO_SOURCE|n.NO_FIELDS),o=l(n.materialize(n.SOURCE).source,a.groupby),d=(a.groupby||[]).map(t.accessorName),p=s((0,e.default)(),a),f=a.as||\"grid\";return i=o.map(e=>(0,r.ingest)(function(e,r){for(let t=0;t<d.length;++t)e[d[t]]=r[t];return e}({[f]:p(e,a.counts)},e.dims))),this.value&&(u.rem=this.value),this.value=u.source=u.add=i,u};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":101}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":103}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":111}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":121}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":1,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":1,"column":0},"generated":{"line":1,"column":127}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":1,"column":0},"generated":{"line":1,"column":129}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":1,"column":0},"generated":{"line":1,"column":131}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":1,"column":0},"generated":{"line":1,"column":139}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":2,"column":0},"generated":{"line":1,"column":160}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":2,"column":0},"generated":{"line":1,"column":162}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":2,"column":0},"generated":{"line":1,"column":170}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":3,"column":0},"generated":{"line":1,"column":187}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":3,"column":0},"generated":{"line":1,"column":189}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":3,"column":0},"generated":{"line":1,"column":197}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":210}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":219}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":221}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":224}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":231}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":234}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":236}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":247}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":249}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":250}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":112,"column":1},"generated":{"line":1,"column":258}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":32,"column":15},"generated":{"line":1,"column":261}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"KDE2D","original":{"line":32,"column":24},"generated":{"line":1,"column":270}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"params","original":{"line":32,"column":30},"generated":{"line":1,"column":272}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"call","original":{"line":33,"column":12},"generated":{"line":1,"column":275}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"call","original":{"line":33,"column":12},"generated":{"line":1,"column":277}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"call","original":{"line":33,"column":12},"generated":{"line":1,"column":287}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":33,"column":17},"generated":{"line":1,"column":292}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":33,"column":23},"generated":{"line":1,"column":297}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"params","original":{"line":33,"column":29},"generated":{"line":1,"column":302}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"KDE2D","original":{"line":36,"column":0},"generated":{"line":1,"column":305}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"Definition","original":{"line":36,"column":6},"generated":{"line":1,"column":307}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":36,"column":19},"generated":{"line":1,"column":318}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":37,"column":10},"generated":{"line":1,"column":319}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":37,"column":10},"generated":{"line":1,"column":324}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":38,"column":14},"generated":{"line":1,"column":332}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":38,"column":14},"generated":{"line":1,"column":341}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":38,"column":28},"generated":{"line":1,"column":342}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":38,"column":28},"generated":{"line":1,"column":353}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":39,"column":12},"generated":{"line":1,"column":356}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":39,"column":12},"generated":{"line":1,"column":363}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":4},"generated":{"line":1,"column":364}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":14},"generated":{"line":1,"column":365}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":14},"generated":{"line":1,"column":370}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":30},"generated":{"line":1,"column":377}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":30},"generated":{"line":1,"column":382}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":49},"generated":{"line":1,"column":391}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":49},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":65},"generated":{"line":1,"column":400}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":65},"generated":{"line":1,"column":407}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":80},"generated":{"line":1,"column":409}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":40,"column":80},"generated":{"line":1,"column":419}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":4},"generated":{"line":1,"column":422}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":14},"generated":{"line":1,"column":423}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":14},"generated":{"line":1,"column":428}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":27},"generated":{"line":1,"column":432}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":27},"generated":{"line":1,"column":437}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":48},"generated":{"line":1,"column":445}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":41,"column":48},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":4},"generated":{"line":1,"column":458}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":14},"generated":{"line":1,"column":459}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":14},"generated":{"line":1,"column":464}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":27},"generated":{"line":1,"column":468}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":27},"generated":{"line":1,"column":473}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":48},"generated":{"line":1,"column":481}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":42,"column":48},"generated":{"line":1,"column":491}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":43,"column":4},"generated":{"line":1,"column":494}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":43,"column":14},"generated":{"line":1,"column":495}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":43,"column":14},"generated":{"line":1,"column":500}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":43,"column":32},"generated":{"line":1,"column":509}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":43,"column":32},"generated":{"line":1,"column":514}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":4},"generated":{"line":1,"column":523}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":14},"generated":{"line":1,"column":524}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":14},"generated":{"line":1,"column":529}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":33},"generated":{"line":1,"column":539}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":33},"generated":{"line":1,"column":544}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":51},"generated":{"line":1,"column":552}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":44,"column":51},"generated":{"line":1,"column":559}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":45,"column":4},"generated":{"line":1,"column":562}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":45,"column":14},"generated":{"line":1,"column":563}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":45,"column":14},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":45,"column":34},"generated":{"line":1,"column":579}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":45,"column":34},"generated":{"line":1,"column":584}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":4},"generated":{"line":1,"column":594}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":14},"generated":{"line":1,"column":595}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":14},"generated":{"line":1,"column":600}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":35},"generated":{"line":1,"column":612}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":35},"generated":{"line":1,"column":617}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":54},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":54},"generated":{"line":1,"column":633}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":70},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":46,"column":70},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":4},"generated":{"line":1,"column":645}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":14},"generated":{"line":1,"column":646}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":14},"generated":{"line":1,"column":651}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":32},"generated":{"line":1,"column":660}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":32},"generated":{"line":1,"column":665}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":54},"generated":{"line":1,"column":675}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":47,"column":54},"generated":{"line":1,"column":684}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":4},"generated":{"line":1,"column":687}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":14},"generated":{"line":1,"column":688}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":14},"generated":{"line":1,"column":693}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":28},"generated":{"line":1,"column":698}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":28},"generated":{"line":1,"column":703}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":49},"generated":{"line":1,"column":712}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":48,"column":49},"generated":{"line":1,"column":720}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":52,"column":0},"generated":{"line":1,"column":730}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"prototype","original":{"line":52,"column":4},"generated":{"line":1,"column":734}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":52,"column":16},"generated":{"line":1,"column":737}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"KDE2D","original":{"line":52,"column":25},"generated":{"line":1,"column":739}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"KDE2D","original":{"line":52,"column":25},"generated":{"line":1,"column":741}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"KDE2D","original":{"line":52,"column":25},"generated":{"line":1,"column":751}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"Transform","original":{"line":52,"column":32},"generated":{"line":1,"column":753}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":52,"column":16},"generated":{"line":1,"column":755}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":0},"generated":{"line":1,"column":766}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"PARAMS","original":{"line":54,"column":6},"generated":{"line":1,"column":772}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":15},"generated":{"line":1,"column":774}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":16},"generated":{"line":1,"column":775}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":21},"generated":{"line":1,"column":779}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":26},"generated":{"line":1,"column":783}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":36},"generated":{"line":1,"column":792}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":44},"generated":{"line":1,"column":799}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":54,"column":56},"generated":{"line":1,"column":810}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":56,"column":7},"generated":{"line":1,"column":823}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"params","original":{"line":56,"column":16},"generated":{"line":1,"column":832}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"obj","original":{"line":56,"column":23},"generated":{"line":1,"column":834}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":56,"column":28},"generated":{"line":1,"column":836}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"obj","original":{"line":58,"column":9},"generated":{"line":1,"column":839}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"PARAMS","original":{"line":57,"column":2},"generated":{"line":1,"column":846}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"forEach","original":{"line":57,"column":9},"generated":{"line":1,"column":848}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"param","original":{"line":57,"column":17},"generated":{"line":1,"column":856}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":57,"column":38},"generated":{"line":1,"column":859}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":57,"column":26},"generated":{"line":1,"column":865}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"param","original":{"line":57,"column":28},"generated":{"line":1,"column":867}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"obj","original":{"line":57,"column":45},"generated":{"line":1,"column":870}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"param","original":{"line":57,"column":49},"generated":{"line":1,"column":872}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":57,"column":56},"generated":{"line":1,"column":875}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"param","original":{"line":57,"column":58},"generated":{"line":1,"column":877}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":57,"column":68},"generated":{"line":1,"column":881}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"obj","original":{"line":58,"column":9},"generated":{"line":1,"column":884}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":89,"column":7},"generated":{"line":1,"column":886}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"partition","original":{"line":89,"column":16},"generated":{"line":1,"column":895}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"data","original":{"line":89,"column":26},"generated":{"line":1,"column":897}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":89,"column":32},"generated":{"line":1,"column":899}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":90,"column":6},"generated":{"line":1,"column":902}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":92,"column":6},"generated":{"line":1,"column":906}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":92,"column":11},"generated":{"line":1,"column":908}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"n","original":{"line":92,"column":14},"generated":{"line":1,"column":910}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":92,"column":17},"generated":{"line":1,"column":912}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"k","original":{"line":92,"column":20},"generated":{"line":1,"column":914}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":92,"column":23},"generated":{"line":1,"column":916}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":90,"column":6},"generated":{"line":1,"column":918}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":90,"column":15},"generated":{"line":1,"column":920}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"get","original":{"line":91,"column":6},"generated":{"line":1,"column":923}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"f","original":{"line":91,"column":12},"generated":{"line":1,"column":925}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"f","original":{"line":91,"column":17},"generated":{"line":1,"column":928}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":91,"column":19},"generated":{"line":1,"column":930}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":95,"column":6},"generated":{"line":1,"column":933}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":95,"column":17},"generated":{"line":1,"column":936}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":95,"column":6},"generated":{"line":1,"column":942}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":96,"column":4},"generated":{"line":1,"column":944}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"push","original":{"line":96,"column":11},"generated":{"line":1,"column":946}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"data","original":{"line":96,"column":16},"generated":{"line":1,"column":951}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":98,"column":9},"generated":{"line":1,"column":959}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":98,"column":9},"generated":{"line":1,"column":963}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":98,"column":13},"generated":{"line":1,"column":965}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":98,"column":17},"generated":{"line":1,"column":968}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":98,"column":19},"generated":{"line":1,"column":970}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"n","original":{"line":98,"column":22},"generated":{"line":1,"column":972}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"data","original":{"line":98,"column":24},"generated":{"line":1,"column":974}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"length","original":{"line":98,"column":29},"generated":{"line":1,"column":976}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":98,"column":37},"generated":{"line":1,"column":983}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"n","original":{"line":98,"column":39},"generated":{"line":1,"column":985}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":98,"column":44},"generated":{"line":1,"column":989}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":99,"column":6},"generated":{"line":1,"column":991}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"data","original":{"line":99,"column":10},"generated":{"line":1,"column":993}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":99,"column":15},"generated":{"line":1,"column":995}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":101,"column":6},"generated":{"line":1,"column":999}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":101,"column":10},"generated":{"line":1,"column":1001}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"k","original":{"line":100,"column":6},"generated":{"line":1,"column":1003}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":100,"column":10},"generated":{"line":1,"column":1005}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":100,"column":18},"generated":{"line":1,"column":1007}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"get","original":{"line":100,"column":22},"generated":{"line":1,"column":1011}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":103,"column":8},"generated":{"line":1,"column":1018}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"k","original":{"line":103,"column":12},"generated":{"line":1,"column":1020}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":103,"column":18},"generated":{"line":1,"column":1023}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":103,"column":22},"generated":{"line":1,"column":1025}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":104,"column":8},"generated":{"line":1,"column":1028}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"dims","original":{"line":104,"column":10},"generated":{"line":1,"column":1030}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"k","original":{"line":104,"column":17},"generated":{"line":1,"column":1035}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":105,"column":8},"generated":{"line":1,"column":1037}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"push","original":{"line":105,"column":15},"generated":{"line":1,"column":1039}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":105,"column":20},"generated":{"line":1,"column":1044}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":107,"column":6},"generated":{"line":1,"column":1048}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"push","original":{"line":107,"column":8},"generated":{"line":1,"column":1050}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":107,"column":13},"generated":{"line":1,"column":1055}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":111,"column":9},"generated":{"line":1,"column":1058}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":111,"column":9},"generated":{"line":1,"column":1065}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"prototype","original":{"line":61,"column":0},"generated":{"line":1,"column":1067}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"transform","original":{"line":61,"column":10},"generated":{"line":1,"column":1069}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":61,"column":22},"generated":{"line":1,"column":1079}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":61,"column":31},"generated":{"line":1,"column":1088}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":61,"column":34},"generated":{"line":1,"column":1090}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":62,"column":6},"generated":{"line":1,"column":1093}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":62,"column":6},"generated":{"line":1,"column":1096}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"value","original":{"line":62,"column":11},"generated":{"line":1,"column":1101}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":62,"column":21},"generated":{"line":1,"column":1109}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"changed","original":{"line":62,"column":27},"generated":{"line":1,"column":1111}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":62,"column":41},"generated":{"line":1,"column":1123}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"modified","original":{"line":62,"column":43},"generated":{"line":1,"column":1125}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":63,"column":4},"generated":{"line":1,"column":1136}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":63,"column":11},"generated":{"line":1,"column":1143}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"StopPropagation","original":{"line":63,"column":17},"generated":{"line":1,"column":1145}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":65,"column":6},"generated":{"line":1,"column":1161}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"values","original":{"line":71,"column":6},"generated":{"line":1,"column":1165}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":65,"column":6},"generated":{"line":1,"column":1167}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":65,"column":12},"generated":{"line":1,"column":1169}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"fork","original":{"line":65,"column":18},"generated":{"line":1,"column":1171}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":65,"column":23},"generated":{"line":1,"column":1176}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"NO_SOURCE","original":{"line":65,"column":29},"generated":{"line":1,"column":1178}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":65,"column":41},"generated":{"line":1,"column":1188}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"NO_FIELDS","original":{"line":65,"column":47},"generated":{"line":1,"column":1190}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":67,"column":6},"generated":{"line":1,"column":1201}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"partition","original":{"line":67,"column":15},"generated":{"line":1,"column":1203}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":66,"column":15},"generated":{"line":1,"column":1205}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"materialize","original":{"line":66,"column":21},"generated":{"line":1,"column":1207}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"pulse","original":{"line":66,"column":33},"generated":{"line":1,"column":1219}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"SOURCE","original":{"line":66,"column":39},"generated":{"line":1,"column":1221}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"source","original":{"line":66,"column":47},"generated":{"line":1,"column":1229}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":67,"column":33},"generated":{"line":1,"column":1236}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":67,"column":35},"generated":{"line":1,"column":1238}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"names","original":{"line":68,"column":6},"generated":{"line":1,"column":1247}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":68,"column":15},"generated":{"line":1,"column":1250}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groupby","original":{"line":68,"column":17},"generated":{"line":1,"column":1252}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":68,"column":28},"generated":{"line":1,"column":1261}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":68,"column":32},"generated":{"line":1,"column":1265}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"accessorName","original":{"line":68,"column":36},"generated":{"line":1,"column":1269}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":68,"column":14},"generated":{"line":1,"column":1271}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"kde","original":{"line":69,"column":6},"generated":{"line":1,"column":1285}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"params","original":{"line":69,"column":12},"generated":{"line":1,"column":1287}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":69,"column":19},"generated":{"line":1,"column":1290}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":69,"column":18},"generated":{"line":1,"column":1292}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":69,"column":18},"generated":{"line":1,"column":1294}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":69,"column":32},"generated":{"line":1,"column":1305}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"as","original":{"line":70,"column":6},"generated":{"line":1,"column":1308}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":70,"column":11},"generated":{"line":1,"column":1310}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"as","original":{"line":70,"column":13},"generated":{"line":1,"column":1312}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":70,"column":19},"generated":{"line":1,"column":1316}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":86,"column":9},"generated":{"line":1,"column":1323}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"values","original":{"line":79,"column":2},"generated":{"line":1,"column":1330}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"groups","original":{"line":79,"column":11},"generated":{"line":1,"column":1332}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"map","original":{"line":79,"column":18},"generated":{"line":1,"column":1334}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":79,"column":22},"generated":{"line":1,"column":1338}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":79,"column":27},"generated":{"line":1,"column":1342}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"set","original":{"line":80,"column":4},"generated":{"line":1,"column":1344}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"set","original":{"line":80,"column":4},"generated":{"line":1,"column":1346}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"set","original":{"line":73,"column":11},"generated":{"line":1,"column":1354}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":73,"column":15},"generated":{"line":1,"column":1363}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"vals","original":{"line":73,"column":18},"generated":{"line":1,"column":1365}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":74,"column":9},"generated":{"line":1,"column":1368}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":74,"column":9},"generated":{"line":1,"column":1372}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":74,"column":13},"generated":{"line":1,"column":1376}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":74,"column":15},"generated":{"line":1,"column":1378}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":74,"column":18},"generated":{"line":1,"column":1380}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"names","original":{"line":74,"column":20},"generated":{"line":1,"column":1382}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"length","original":{"line":74,"column":26},"generated":{"line":1,"column":1384}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":74,"column":36},"generated":{"line":1,"column":1393}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":74,"column":39},"generated":{"line":1,"column":1395}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"names","original":{"line":74,"column":41},"generated":{"line":1,"column":1397}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":74,"column":47},"generated":{"line":1,"column":1399}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"vals","original":{"line":74,"column":53},"generated":{"line":1,"column":1403}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"i","original":{"line":74,"column":58},"generated":{"line":1,"column":1405}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":75,"column":11},"generated":{"line":1,"column":1408}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"t","original":{"line":75,"column":11},"generated":{"line":1,"column":1415}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"set","original":{"line":80,"column":4},"generated":{"line":1,"column":1417}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":80,"column":8},"generated":{"line":1,"column":1418}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"as","original":{"line":80,"column":10},"generated":{"line":1,"column":1419}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"as","original":{"line":80,"column":10},"generated":{"line":1,"column":1420}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"kde","original":{"line":80,"column":15},"generated":{"line":1,"column":1423}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":80,"column":19},"generated":{"line":1,"column":1425}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"_","original":{"line":80,"column":22},"generated":{"line":1,"column":1427}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"counts","original":{"line":80,"column":24},"generated":{"line":1,"column":1429}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"g","original":{"line":80,"column":34},"generated":{"line":1,"column":1438}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"dims","original":{"line":80,"column":36},"generated":{"line":1,"column":1440}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":83,"column":6},"generated":{"line":1,"column":1448}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"value","original":{"line":83,"column":11},"generated":{"line":1,"column":1453}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":83,"column":18},"generated":{"line":1,"column":1461}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"rem","original":{"line":83,"column":22},"generated":{"line":1,"column":1463}},{"source":"node_modules/vega-geo/src/KDE2D.js","original":{"line":83,"column":28},"generated":{"line":1,"column":1467}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"value","original":{"line":83,"column":33},"generated":{"line":1,"column":1472}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"value","original":{"line":84,"column":7},"generated":{"line":1,"column":1479}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"value","original":{"line":84,"column":7},"generated":{"line":1,"column":1484}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":84,"column":15},"generated":{"line":1,"column":1490}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"source","original":{"line":84,"column":19},"generated":{"line":1,"column":1492}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":84,"column":28},"generated":{"line":1,"column":1499}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"add","original":{"line":84,"column":32},"generated":{"line":1,"column":1501}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"values","original":{"line":84,"column":38},"generated":{"line":1,"column":1505}},{"source":"node_modules/vega-geo/src/KDE2D.js","name":"out","original":{"line":86,"column":9},"generated":{"line":1,"column":1507}}],"sources":{"node_modules/vega-geo/src/KDE2D.js":"import density2D from './util/density2D';\nimport {Transform, ingest} from 'vega-dataflow';\nimport {accessorName, inherits} from 'vega-util';\n\n/**\n * Perform 2D kernel-density estimation of point data.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {Array<number>} params.size - The [width, height] extent (in\n *   units of input pixels) over which to perform density estimation.\n * @param {function(object): number} params.x - The x-coordinate accessor.\n * @param {function(object): number} params.y - The y-coordinate accessor.\n * @param {function(object): number} [params.weight] - The weight accessor.\n * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n *   to groupby.\n * @param {number} [params.cellSize] - Contour density calculation cell size.\n *   This parameter determines the level of spatial approximation. For example,\n *   the default value of 4 maps to 2x reductions in both x- and y- dimensions.\n *   A value of 1 will result in an output raster grid whose dimensions exactly\n *   matches the size parameter.\n * @param {Array<number>} [params.bandwidth] - The KDE kernel bandwidths,\n *   in pixels. The input can be a two-element array specifying separate\n *   x and y bandwidths, or a single-element array specifying both. If the\n *   bandwidth is unspecified or less than zero, the bandwidth will be\n *   automatically determined.\n * @param {boolean} [params.counts=false] - A boolean flag indicating if the\n *   output values should be probability estimates (false, default) or\n *   smoothed counts (true).\n * @param {string} [params.as='grid'] - The output field in which to store\n *   the generated raster grid (default 'grid').\n */\nexport default function KDE2D(params) {\n  Transform.call(this, null, params);\n}\n\nKDE2D.Definition = {\n  'type': 'KDE2D',\n  'metadata': {'generates': true},\n  'params': [\n    { 'name': 'size', 'type': 'number', 'array': true, 'length': 2, 'required': true },\n    { 'name': 'x', 'type': 'field', 'required': true },\n    { 'name': 'y', 'type': 'field', 'required': true },\n    { 'name': 'weight', 'type': 'field' },\n    { 'name': 'groupby', 'type': 'field', 'array': true },\n    { 'name': 'cellSize', 'type': 'number' },\n    { 'name': 'bandwidth', 'type': 'number', 'array': true, 'length': 2 },\n    { 'name': 'counts', 'type': 'boolean', 'default': false },\n    { 'name': 'as', 'type': 'string', 'default': 'grid'}\n  ]\n};\n\nvar prototype = inherits(KDE2D, Transform);\n\nconst PARAMS = ['x', 'y', 'weight', 'size', 'cellSize', 'bandwidth'];\n\nexport function params(obj, _) {\n  PARAMS.forEach(param => _[param] != null ? obj[param](_[param]) : 0);\n  return obj;\n}\n\nprototype.transform = function(_, pulse) {\n  if (this.value && !pulse.changed() && !_.modified())\n    return pulse.StopPropagation;\n\n  var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n      source = pulse.materialize(pulse.SOURCE).source,\n      groups = partition(source, _.groupby),\n      names = (_.groupby || []).map(accessorName),\n      kde = params(density2D(), _),\n      as = _.as || 'grid',\n      values = [];\n\n  function set(t, vals) {\n    for (let i=0; i<names.length; ++i) t[names[i]] = vals[i];\n    return t;\n  }\n\n  // generate density raster grids\n  values = groups.map(g => ingest(\n    set({[as]: kde(g, _.counts)}, g.dims)\n  ));\n\n  if (this.value) out.rem = this.value;\n  this.value = out.source = out.add = values;\n\n  return out;\n};\n\nexport function partition(data, groupby) {\n  var groups = [],\n      get = f => f(t),\n      map, i, n, t, k, g;\n\n  // partition data points into groups\n  if (groupby == null) {\n    groups.push(data);\n  } else {\n    for (map={}, i=0, n=data.length; i<n; ++i) {\n      t = data[i];\n      k = groupby.map(get);\n      g = map[k];\n      if (!g) {\n        map[k] = (g = []);\n        g.dims = k;\n        groups.push(g);\n      }\n      g.push(t);\n    }\n  }\n\n  return groups;\n}\n"},"lineCount":null}},"error":null,"hash":"c35c66a595f2603cab8fdf9573c54559","cacheData":{"env":{}}}