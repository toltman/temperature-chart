{"id":"D0P0","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/mark/encode/defined.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../../channel","loc":{"line":1,"column":40},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/channel.js"},{"name":"../../../scale","loc":{"line":2,"column":36},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/scale.js"},{"name":"../../../util","loc":{"line":3,"column":21},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"},{"name":"../../common","loc":{"line":4,"column":54},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/common.js"},{"name":"./valueref","loc":{"line":5,"column":38},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/defined.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/mark/encode/valueref.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.defined=o,exports.valueIfDefined=a;var e=require(\"../../../channel\"),n=require(\"../../../scale\"),r=require(\"../../../util\"),i=require(\"../../common\"),t=require(\"./valueref\");function o(n){const{config:r,markDef:t}=n;if((0,i.getMarkPropOrConfig)(\"invalid\",t,r)){const r=u(n,{channels:e.POSITION_SCALE_CHANNELS});if(r)return{defined:{signal:r}}}return{}}function u(e,{invalid:i=!1,channels:o}){const u=o.reduce((r,i)=>{const t=e.getScaleComponent(i);if(t){const o=t.get(\"type\"),u=e.vgField(i,{expr:\"datum\"});u&&(0,n.hasContinuousDomain)(o)&&(r[u]=!0)}return r},{}),a=(0,r.keys)(u);if(a.length>0){const e=i?\"||\":\"&&\";return a.map(e=>(0,t.fieldInvalidPredicate)(e,i)).join(` ${e} `)}}function a(e,n){if(void 0!==n)return{[e]:(0,i.signalOrValueRef)(n)}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":84}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":86}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":94}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":109}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":115}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":117}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":125}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":145}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":147}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":155}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":173}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":175}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":183}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":200}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":202}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":210}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":226}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":228}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":236}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":11,"column":6},"generated":{"line":1,"column":250}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":11,"column":16},"generated":{"line":1,"column":259}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":11,"column":24},"generated":{"line":1,"column":261}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":264}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":270}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":9},"generated":{"line":1,"column":277}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":8},"generated":{"line":1,"column":279}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":17},"generated":{"line":1,"column":287}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":12,"column":28},"generated":{"line":1,"column":290}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":15,"column":6},"generated":{"line":1,"column":292}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":18},"generated":{"line":1,"column":296}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":38},"generated":{"line":1,"column":298}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":38},"generated":{"line":1,"column":300}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":38},"generated":{"line":1,"column":321}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":49},"generated":{"line":1,"column":331}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":14,"column":58},"generated":{"line":1,"column":333}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":15,"column":15},"generated":{"line":1,"column":336}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":10},"generated":{"line":1,"column":337}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":10},"generated":{"line":1,"column":343}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":19},"generated":{"line":1,"column":345}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":45},"generated":{"line":1,"column":347}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":52},"generated":{"line":1,"column":349}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":53},"generated":{"line":1,"column":350}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":63},"generated":{"line":1,"column":359}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":16,"column":63},"generated":{"line":1,"column":361}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":387}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":390}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":1,"column":392}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":13},"generated":{"line":1,"column":398}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":1,"column":399}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":23},"generated":{"line":1,"column":407}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":24},"generated":{"line":1,"column":408}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":19,"column":24},"generated":{"line":1,"column":415}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":22,"column":9},"generated":{"line":1,"column":419}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":22,"column":9},"generated":{"line":1,"column":425}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":25,"column":0},"generated":{"line":1,"column":428}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":25,"column":9},"generated":{"line":1,"column":437}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":26,"column":2},"generated":{"line":1,"column":439}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":442}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":27,"column":3},"generated":{"line":1,"column":450}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":453}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":27,"column":2},"generated":{"line":1,"column":455}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":27,"column":20},"generated":{"line":1,"column":464}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":468}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":8},"generated":{"line":1,"column":474}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":22},"generated":{"line":1,"column":476}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":31},"generated":{"line":1,"column":478}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":1,"column":485}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":39},"generated":{"line":1,"column":486}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":29,"column":63},"generated":{"line":1,"column":488}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":493}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":30,"column":10},"generated":{"line":1,"column":499}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":30,"column":27},"generated":{"line":1,"column":501}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":30,"column":33},"generated":{"line":1,"column":503}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":30,"column":51},"generated":{"line":1,"column":521}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":524}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":527}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":31,"column":24},"generated":{"line":1,"column":529}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":530}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":536}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":32,"column":24},"generated":{"line":1,"column":538}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":32,"column":39},"generated":{"line":1,"column":540}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":32,"column":43},"generated":{"line":1,"column":544}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":1,"column":552}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":554}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":26},"generated":{"line":1,"column":556}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":34},"generated":{"line":1,"column":564}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":43},"generated":{"line":1,"column":566}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":44},"generated":{"line":1,"column":567}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":33,"column":50},"generated":{"line":1,"column":572}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":36,"column":10},"generated":{"line":1,"column":582}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":36,"column":19},"generated":{"line":1,"column":586}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":588}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":590}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":611}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":37,"column":8},"generated":{"line":1,"column":616}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":37,"column":19},"generated":{"line":1,"column":618}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":37,"column":28},"generated":{"line":1,"column":622}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":625}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":632}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":41,"column":5},"generated":{"line":1,"column":635}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":639}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":43,"column":17},"generated":{"line":1,"column":642}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":43,"column":22},"generated":{"line":1,"column":644}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":43,"column":22},"generated":{"line":1,"column":646}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":43,"column":22},"generated":{"line":1,"column":652}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":44,"column":6},"generated":{"line":1,"column":655}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":44,"column":6},"generated":{"line":1,"column":658}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":660}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":44,"column":22},"generated":{"line":1,"column":667}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":669}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":670}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":676}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":678}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":45,"column":25},"generated":{"line":1,"column":680}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":1,"column":685}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":690}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":697}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":18},"generated":{"line":1,"column":699}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":1,"column":703}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":31},"generated":{"line":1,"column":707}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":53},"generated":{"line":1,"column":709}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":53},"generated":{"line":1,"column":711}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":53},"generated":{"line":1,"column":734}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":60},"generated":{"line":1,"column":736}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":70},"generated":{"line":1,"column":740}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":46,"column":79},"generated":{"line":1,"column":749}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":756}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":765}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":51,"column":31},"generated":{"line":1,"column":767}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":51,"column":45},"generated":{"line":1,"column":769}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":772}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":780}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":784}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":786}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":792}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":1,"column":793}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":1,"column":794}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":798}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":37},"generated":{"line":1,"column":800}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":37},"generated":{"line":1,"column":802}},{"source":"../../../../../src/compile/mark/encode/defined.ts","name":null,"original":{"line":53,"column":37},"generated":{"line":1,"column":820}}],"sources":{"../../../../../src/compile/mark/encode/defined.ts":"import {POSITION_SCALE_CHANNELS} from '../../../channel';\nimport {ScaleChannel} from '../../../channel';\nimport {Value} from '../../../channeldef';\nimport {hasContinuousDomain} from '../../../scale';\nimport {Dict, keys} from '../../../util';\nimport {VgEncodeEntry} from '../../../vega.schema';\nimport {getMarkPropOrConfig, signalOrValueRef} from '../../common';\nimport {UnitModel} from '../../unit';\nimport {fieldInvalidPredicate} from './valueref';\n\nexport function defined(model: UnitModel): VgEncodeEntry {\n  const {config, markDef} = model;\n\n  const invalid = getMarkPropOrConfig('invalid', markDef, config);\n  if (invalid) {\n    const signal = allFieldsInvalidPredicate(model, {channels: POSITION_SCALE_CHANNELS});\n\n    if (signal) {\n      return {defined: {signal}};\n    }\n  }\n  return {};\n}\n\nfunction allFieldsInvalidPredicate(\n  model: UnitModel,\n  {invalid = false, channels}: {invalid?: boolean; channels: ScaleChannel[]}\n) {\n  const filterIndex = channels.reduce((aggregator: Dict<true>, channel) => {\n    const scaleComponent = model.getScaleComponent(channel);\n    if (scaleComponent) {\n      const scaleType = scaleComponent.get('type');\n      const field = model.vgField(channel, {expr: 'datum'});\n\n      // While discrete domain scales can handle invalid values, continuous scales can't.\n      if (field && hasContinuousDomain(scaleType)) {\n        aggregator[field] = true;\n      }\n    }\n    return aggregator;\n  }, {});\n\n  const fields = keys(filterIndex);\n  if (fields.length > 0) {\n    const op = invalid ? '||' : '&&';\n    return fields.map(field => fieldInvalidPredicate(field, invalid)).join(` ${op} `);\n  }\n  return undefined;\n}\n\nexport function valueIfDefined(prop: string, value: Value): VgEncodeEntry {\n  if (value !== undefined) {\n    return {[prop]: signalOrValueRef(value)};\n  }\n  return undefined;\n}\n"},"lineCount":null}},"error":null,"hash":"7f44ba2cca7c42ea39200e75f489825e","cacheData":{"env":{}}}