{"id":"idma","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/projection/assemble.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/projection/assemble.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974472658},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../util","loc":{"line":1,"column":25},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/projection/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"},{"name":"../../vega.schema","loc":{"line":2,"column":28},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/projection/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/vega.schema.js"},{"name":"../model","loc":{"line":3,"column":44},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/projection/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/model.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.assembleProjections=r,exports.assembleProjectionsForModelAndChildren=o,exports.assembleProjectionForModel=s;var e=require(\"../../util\"),n=require(\"../../vega.schema\"),t=require(\"../model\");function r(e){return(0,t.isLayerModel)(e)||(0,t.isConcatModel)(e)?o(e):s(e)}function o(e){return e.children.reduce((e,n)=>e.concat(n.assembleProjections()),s(e))}function s(t){const r=t.component.projection;if(!r||r.merged)return[];const o=r.combine(),{name:s}=o;if(r.data){const i={signal:`[${r.size.map(e=>e.signal).join(\", \")}]`},a=r.data.reduce((r,o)=>{const s=(0,n.isSignalRef)(o)?o.signal:`data('${t.lookupDataSource(o)}')`;return(0,e.contains)(r,s)||r.push(s),r},[]);if(a.length<=0)throw new Error(\"Projection's fit didn't find any data sources\");return[Object.assign({name:s,size:i,fit:{signal:a.length>1?`[${a.join(\", \")}]`:a[0]}},o)]}return[Object.assign(Object.assign({name:s},{translate:{signal:\"[width / 2, height / 2]\"}}),o)]}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":96}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":98}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":106}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":145}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":147}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":155}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":70,"column":1},"generated":{"line":1,"column":182}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":184}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":188}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":190}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":198}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":212}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":214}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":222}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":243}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":245}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":253}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":6,"column":6},"generated":{"line":1,"column":265}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":6,"column":16},"generated":{"line":1,"column":274}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":6,"column":36},"generated":{"line":1,"column":276}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":1,"column":279}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":1,"column":286}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":19},"generated":{"line":1,"column":288}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":19},"generated":{"line":1,"column":290}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":19},"generated":{"line":1,"column":304}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":29},"generated":{"line":1,"column":309}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":43},"generated":{"line":1,"column":311}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":43},"generated":{"line":1,"column":313}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":7,"column":43},"generated":{"line":1,"column":328}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":8,"column":11},"generated":{"line":1,"column":331}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":8,"column":50},"generated":{"line":1,"column":333}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":10,"column":11},"generated":{"line":1,"column":336}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":10,"column":38},"generated":{"line":1,"column":338}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":14,"column":6},"generated":{"line":1,"column":341}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":14,"column":16},"generated":{"line":1,"column":350}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":14,"column":55},"generated":{"line":1,"column":352}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":355}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":9},"generated":{"line":1,"column":362}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":15},"generated":{"line":1,"column":364}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":24},"generated":{"line":1,"column":373}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":31},"generated":{"line":1,"column":380}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":32},"generated":{"line":1,"column":381}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":15,"column":45},"generated":{"line":1,"column":383}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":16,"column":11},"generated":{"line":1,"column":387}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":1,"column":389}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":16,"column":30},"generated":{"line":1,"column":396}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":16,"column":36},"generated":{"line":1,"column":398}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":17,"column":5},"generated":{"line":1,"column":421}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":17,"column":32},"generated":{"line":1,"column":423}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":427}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":436}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":20,"column":43},"generated":{"line":1,"column":438}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":441}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":447}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":449}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":21,"column":26},"generated":{"line":1,"column":451}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":21,"column":36},"generated":{"line":1,"column":461}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":22,"column":6},"generated":{"line":1,"column":472}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":22,"column":7},"generated":{"line":1,"column":476}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":479}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":1,"column":481}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":488}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":23,"column":11},"generated":{"line":1,"column":494}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":497}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":503}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":26,"column":21},"generated":{"line":1,"column":505}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":26,"column":31},"generated":{"line":1,"column":507}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":518}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":1,"column":523}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":27,"column":17},"generated":{"line":1,"column":526}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":528}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":29,"column":7},"generated":{"line":1,"column":531}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":29,"column":17},"generated":{"line":1,"column":533}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":40,"column":9},"generated":{"line":1,"column":538}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":539}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":42,"column":10},"generated":{"line":1,"column":545}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":42,"column":28},"generated":{"line":1,"column":547}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":6},"generated":{"line":1,"column":548}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":18},"generated":{"line":1,"column":559}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":28},"generated":{"line":1,"column":561}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":33},"generated":{"line":1,"column":566}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":37},"generated":{"line":1,"column":570}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":44},"generated":{"line":1,"column":573}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":48},"generated":{"line":1,"column":575}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":56},"generated":{"line":1,"column":583}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":43,"column":61},"generated":{"line":1,"column":588}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":598}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":27},"generated":{"line":1,"column":600}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":37},"generated":{"line":1,"column":602}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":42},"generated":{"line":1,"column":607}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":49},"generated":{"line":1,"column":614}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":50},"generated":{"line":1,"column":615}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":46,"column":59},"generated":{"line":1,"column":617}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":622}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":12},"generated":{"line":1,"column":628}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":1,"column":631}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":41},"generated":{"line":1,"column":633}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":41},"generated":{"line":1,"column":635}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":41},"generated":{"line":1,"column":648}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":49},"generated":{"line":1,"column":651}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":54},"generated":{"line":1,"column":653}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":72},"generated":{"line":1,"column":669}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":78},"generated":{"line":1,"column":671}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":47,"column":95},"generated":{"line":1,"column":688}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":695}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":48,"column":11},"generated":{"line":1,"column":702}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":1,"column":704}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":1,"column":706}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":1,"column":716}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":48,"column":29},"generated":{"line":1,"column":718}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":1,"column":722}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":724}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":50,"column":21},"generated":{"line":1,"column":729}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":732}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":53,"column":7},"generated":{"line":1,"column":735}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":739}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":742}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":744}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":55,"column":23},"generated":{"line":1,"column":752}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":754}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":760}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":56,"column":16},"generated":{"line":1,"column":764}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":56,"column":22},"generated":{"line":1,"column":770}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":819}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":825}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":826}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":833}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":840}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":841}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":846}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":848}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":853}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":1,"column":855}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":63,"column":13},"generated":{"line":1,"column":859}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":10},"generated":{"line":1,"column":860}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":18},"generated":{"line":1,"column":867}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":23},"generated":{"line":1,"column":869}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":32},"generated":{"line":1,"column":876}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":40},"generated":{"line":1,"column":882}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":45},"generated":{"line":1,"column":884}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":50},"generated":{"line":1,"column":889}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":61},"generated":{"line":1,"column":898}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":64,"column":66},"generated":{"line":1,"column":900}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":66,"column":11},"generated":{"line":1,"column":905}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":909}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":915}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":916}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":923}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":930}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":937}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":944}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":945}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":950}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":35,"column":11},"generated":{"line":1,"column":953}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":35,"column":12},"generated":{"line":1,"column":954}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":35,"column":23},"generated":{"line":1,"column":964}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":35,"column":24},"generated":{"line":1,"column":965}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":35,"column":32},"generated":{"line":1,"column":972}},{"source":"../../../../src/compile/projection/assemble.ts","name":null,"original":{"line":37,"column":11},"generated":{"line":1,"column":1001}}],"sources":{"../../../../src/compile/projection/assemble.ts":"import {Projection as VgProjection, SignalRef} from 'vega';\nimport {contains} from '../../util';\nimport {isSignalRef} from '../../vega.schema';\nimport {isConcatModel, isLayerModel, Model} from '../model';\n\nexport function assembleProjections(model: Model): VgProjection[] {\n  if (isLayerModel(model) || isConcatModel(model)) {\n    return assembleProjectionsForModelAndChildren(model);\n  } else {\n    return assembleProjectionForModel(model);\n  }\n}\n\nexport function assembleProjectionsForModelAndChildren(model: Model): VgProjection[] {\n  return model.children.reduce((projections, child) => {\n    return projections.concat(child.assembleProjections());\n  }, assembleProjectionForModel(model));\n}\n\nexport function assembleProjectionForModel(model: Model): VgProjection[] {\n  const component = model.component.projection;\n  if (!component || component.merged) {\n    return [];\n  }\n\n  const projection = component.combine();\n  const {name} = projection; // we need to extract name so that it is always present in the output and pass TS type validation\n\n  if (!component.data) {\n    // generate custom projection, no automatic fitting\n    return [\n      {\n        name,\n        // translate to center by default\n        ...{translate: {signal: '[width / 2, height / 2]'}},\n        // parameters, overwrite default translate if specified\n        ...projection\n      }\n    ];\n  } else {\n    // generate projection that uses extent fitting\n    const size: SignalRef = {\n      signal: `[${component.size.map(ref => ref.signal).join(', ')}]`\n    };\n\n    const fits: string[] = component.data.reduce((sources, data) => {\n      const source: string = isSignalRef(data) ? data.signal : `data('${model.lookupDataSource(data)}')`;\n      if (!contains(sources, source)) {\n        // build a unique list of sources\n        sources.push(source);\n      }\n      return sources;\n    }, []);\n\n    if (fits.length <= 0) {\n      throw new Error(\"Projection's fit didn't find any data sources\");\n    }\n\n    return [\n      {\n        name,\n        size,\n        fit: {\n          signal: fits.length > 1 ? `[${fits.join(', ')}]` : fits[0]\n        },\n        ...projection\n      }\n    ];\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"b961a57184252a178303501d2c66de56","cacheData":{"env":{}}}