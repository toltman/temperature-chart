{"id":"hGbv","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974472658},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"./util/util","loc":{"line":1,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/KDE.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/util/util.js"},{"name":"vega-statistics","loc":{"line":4,"column":26},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/KDE.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-statistics/index.js"},{"name":"vega-dataflow","loc":{"line":3,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/KDE.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":5,"column":52},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/KDE.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=r;var e=require(\"./util/util\"),t=require(\"vega-statistics\"),a=require(\"vega-dataflow\"),n=require(\"vega-util\");function r(e){a.Transform.call(this,null,e)}r.Definition={type:\"KDE\",metadata:{generates:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"field\",type:\"field\",required:!0},{name:\"cumulative\",type:\"boolean\",default:!1},{name:\"counts\",type:\"boolean\",default:!1},{name:\"bandwidth\",type:\"number\",default:0},{name:\"extent\",type:\"number\",array:!0,length:2},{name:\"resolve\",type:\"enum\",values:[\"shared\",\"independent\"],default:\"independent\"},{name:\"steps\",type:\"number\"},{name:\"minsteps\",type:\"number\",default:25},{name:\"maxsteps\",type:\"number\",default:200},{name:\"as\",type:\"string\",array:!0,default:[\"value\",\"density\"]}]};var s=(0,n.inherits)(r,a.Transform);s.transform=function(r,s){var i=s.fork(s.NO_SOURCE|s.NO_FIELDS);if(!this.value||s.changed()||r.modified()){const u=s.materialize(s.SOURCE).source,d=(0,e.partition)(u,r.groupby,r.field),l=(r.groupby||[]).map(n.accessorName),m=r.bandwidth,o=r.cumulative?\"cdf\":\"pdf\",p=r.as||[\"value\",\"density\"],f=[];let c=r.extent,y=r.steps||r.minsteps||25,v=r.steps||r.maxsteps||200;\"pdf\"!==o&&\"cdf\"!==o&&(0,n.error)(\"Invalid density method: \"+o),\"shared\"===r.resolve&&(c||(c=(0,n.extent)(u,r.field)),y=v=r.steps||v),d.forEach(e=>{const s=(0,t.randomKDE)(e,m)[o],i=r.counts?e.length:1,u=c||(0,n.extent)(e);(0,t.sampleCurve)(s,u,y,v).forEach(t=>{const n={};for(let a=0;a<l.length;++a)n[l[a]]=e.dims[a];n[p[0]]=t[0],n[p[1]]=t[1]*i,f.push((0,a.ingest)(n))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=f}return i};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":3,"column":0},"generated":{"line":1,"column":144}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":3,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":3,"column":0},"generated":{"line":1,"column":154}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":5,"column":0},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":5,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":5,"column":0},"generated":{"line":1,"column":181}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":38,"column":15},"generated":{"line":1,"column":194}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"KDE","original":{"line":38,"column":24},"generated":{"line":1,"column":203}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"params","original":{"line":38,"column":28},"generated":{"line":1,"column":205}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"call","original":{"line":39,"column":12},"generated":{"line":1,"column":208}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"call","original":{"line":39,"column":12},"generated":{"line":1,"column":210}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"call","original":{"line":39,"column":12},"generated":{"line":1,"column":220}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":39,"column":17},"generated":{"line":1,"column":225}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":39,"column":23},"generated":{"line":1,"column":230}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"params","original":{"line":39,"column":29},"generated":{"line":1,"column":235}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"KDE","original":{"line":42,"column":0},"generated":{"line":1,"column":238}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"Definition","original":{"line":42,"column":4},"generated":{"line":1,"column":240}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":42,"column":17},"generated":{"line":1,"column":251}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":43,"column":10},"generated":{"line":1,"column":252}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":43,"column":10},"generated":{"line":1,"column":257}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":44,"column":14},"generated":{"line":1,"column":263}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":44,"column":14},"generated":{"line":1,"column":272}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":44,"column":28},"generated":{"line":1,"column":273}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":44,"column":28},"generated":{"line":1,"column":284}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":45,"column":12},"generated":{"line":1,"column":287}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":45,"column":12},"generated":{"line":1,"column":294}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":4},"generated":{"line":1,"column":295}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":14},"generated":{"line":1,"column":296}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":14},"generated":{"line":1,"column":301}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":33},"generated":{"line":1,"column":311}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":33},"generated":{"line":1,"column":316}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":51},"generated":{"line":1,"column":324}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":46,"column":51},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":4},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":14},"generated":{"line":1,"column":335}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":14},"generated":{"line":1,"column":340}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":31},"generated":{"line":1,"column":348}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":31},"generated":{"line":1,"column":353}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":52},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":47,"column":52},"generated":{"line":1,"column":371}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":4},"generated":{"line":1,"column":374}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":14},"generated":{"line":1,"column":375}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":14},"generated":{"line":1,"column":380}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":36},"generated":{"line":1,"column":393}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":36},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":58},"generated":{"line":1,"column":408}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":48,"column":58},"generated":{"line":1,"column":417}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":4},"generated":{"line":1,"column":420}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":14},"generated":{"line":1,"column":421}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":14},"generated":{"line":1,"column":426}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":32},"generated":{"line":1,"column":435}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":32},"generated":{"line":1,"column":440}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":54},"generated":{"line":1,"column":450}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":49,"column":54},"generated":{"line":1,"column":459}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":4},"generated":{"line":1,"column":462}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":14},"generated":{"line":1,"column":463}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":14},"generated":{"line":1,"column":468}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":35},"generated":{"line":1,"column":480}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":35},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":56},"generated":{"line":1,"column":494}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":50,"column":56},"generated":{"line":1,"column":502}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":4},"generated":{"line":1,"column":505}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":14},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":14},"generated":{"line":1,"column":511}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":32},"generated":{"line":1,"column":520}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":32},"generated":{"line":1,"column":525}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":51},"generated":{"line":1,"column":534}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":51},"generated":{"line":1,"column":541}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":67},"generated":{"line":1,"column":543}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":51,"column":67},"generated":{"line":1,"column":550}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":4},"generated":{"line":1,"column":553}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":14},"generated":{"line":1,"column":554}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":14},"generated":{"line":1,"column":559}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":33},"generated":{"line":1,"column":569}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":33},"generated":{"line":1,"column":574}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":51},"generated":{"line":1,"column":581}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":51},"generated":{"line":1,"column":588}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":52},"generated":{"line":1,"column":589}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":62},"generated":{"line":1,"column":598}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":89},"generated":{"line":1,"column":613}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":52,"column":89},"generated":{"line":1,"column":621}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":53,"column":4},"generated":{"line":1,"column":636}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":53,"column":14},"generated":{"line":1,"column":637}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":53,"column":14},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":53,"column":31},"generated":{"line":1,"column":650}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":53,"column":31},"generated":{"line":1,"column":655}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":4},"generated":{"line":1,"column":665}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":14},"generated":{"line":1,"column":666}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":14},"generated":{"line":1,"column":671}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":34},"generated":{"line":1,"column":682}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":34},"generated":{"line":1,"column":687}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":55},"generated":{"line":1,"column":696}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":54,"column":55},"generated":{"line":1,"column":704}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":4},"generated":{"line":1,"column":708}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":14},"generated":{"line":1,"column":709}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":14},"generated":{"line":1,"column":714}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":34},"generated":{"line":1,"column":725}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":34},"generated":{"line":1,"column":730}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":55},"generated":{"line":1,"column":739}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":55,"column":55},"generated":{"line":1,"column":747}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":4},"generated":{"line":1,"column":752}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":14},"generated":{"line":1,"column":753}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":14},"generated":{"line":1,"column":758}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":28},"generated":{"line":1,"column":763}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":28},"generated":{"line":1,"column":768}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":47},"generated":{"line":1,"column":777}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":47},"generated":{"line":1,"column":784}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":64},"generated":{"line":1,"column":786}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":64},"generated":{"line":1,"column":794}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":65},"generated":{"line":1,"column":795}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":56,"column":74},"generated":{"line":1,"column":803}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":60,"column":0},"generated":{"line":1,"column":817}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"prototype","original":{"line":60,"column":4},"generated":{"line":1,"column":821}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":60,"column":16},"generated":{"line":1,"column":824}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"KDE","original":{"line":60,"column":25},"generated":{"line":1,"column":826}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"KDE","original":{"line":60,"column":25},"generated":{"line":1,"column":828}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"KDE","original":{"line":60,"column":25},"generated":{"line":1,"column":838}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"Transform","original":{"line":60,"column":30},"generated":{"line":1,"column":840}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":60,"column":16},"generated":{"line":1,"column":842}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"prototype","original":{"line":62,"column":0},"generated":{"line":1,"column":853}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"transform","original":{"line":62,"column":10},"generated":{"line":1,"column":855}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":62,"column":22},"generated":{"line":1,"column":865}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":62,"column":31},"generated":{"line":1,"column":874}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":62,"column":34},"generated":{"line":1,"column":876}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":63,"column":6},"generated":{"line":1,"column":879}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":63,"column":6},"generated":{"line":1,"column":883}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":63,"column":12},"generated":{"line":1,"column":885}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"fork","original":{"line":63,"column":18},"generated":{"line":1,"column":887}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":63,"column":23},"generated":{"line":1,"column":892}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"NO_SOURCE","original":{"line":63,"column":29},"generated":{"line":1,"column":894}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":63,"column":41},"generated":{"line":1,"column":904}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"NO_FIELDS","original":{"line":63,"column":47},"generated":{"line":1,"column":906}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":65,"column":6},"generated":{"line":1,"column":917}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":65,"column":7},"generated":{"line":1,"column":921}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"value","original":{"line":65,"column":12},"generated":{"line":1,"column":926}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":65,"column":21},"generated":{"line":1,"column":933}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"changed","original":{"line":65,"column":27},"generated":{"line":1,"column":935}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":65,"column":40},"generated":{"line":1,"column":946}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"modified","original":{"line":65,"column":42},"generated":{"line":1,"column":948}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":65,"column":54},"generated":{"line":1,"column":959}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":66,"column":10},"generated":{"line":1,"column":960}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":66,"column":10},"generated":{"line":1,"column":966}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":66,"column":19},"generated":{"line":1,"column":968}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"materialize","original":{"line":66,"column":25},"generated":{"line":1,"column":970}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"pulse","original":{"line":66,"column":37},"generated":{"line":1,"column":982}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"SOURCE","original":{"line":66,"column":43},"generated":{"line":1,"column":984}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":66,"column":51},"generated":{"line":1,"column":992}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"groups","original":{"line":67,"column":10},"generated":{"line":1,"column":999}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":67,"column":19},"generated":{"line":1,"column":1002}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":67,"column":29},"generated":{"line":1,"column":1004}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":67,"column":29},"generated":{"line":1,"column":1006}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":67,"column":29},"generated":{"line":1,"column":1017}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":67,"column":37},"generated":{"line":1,"column":1019}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"groupby","original":{"line":67,"column":39},"generated":{"line":1,"column":1021}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":67,"column":48},"generated":{"line":1,"column":1029}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"field","original":{"line":67,"column":50},"generated":{"line":1,"column":1031}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"names","original":{"line":68,"column":10},"generated":{"line":1,"column":1038}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":68,"column":19},"generated":{"line":1,"column":1041}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"groupby","original":{"line":68,"column":21},"generated":{"line":1,"column":1043}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":68,"column":32},"generated":{"line":1,"column":1052}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"map","original":{"line":68,"column":36},"generated":{"line":1,"column":1056}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"accessorName","original":{"line":68,"column":40},"generated":{"line":1,"column":1060}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":68,"column":18},"generated":{"line":1,"column":1062}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"bandwidth","original":{"line":69,"column":10},"generated":{"line":1,"column":1076}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":69,"column":22},"generated":{"line":1,"column":1078}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"bandwidth","original":{"line":69,"column":24},"generated":{"line":1,"column":1080}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"method","original":{"line":70,"column":10},"generated":{"line":1,"column":1090}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":70,"column":19},"generated":{"line":1,"column":1092}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"cumulative","original":{"line":70,"column":21},"generated":{"line":1,"column":1094}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":70,"column":34},"generated":{"line":1,"column":1105}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":70,"column":42},"generated":{"line":1,"column":1111}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"as","original":{"line":71,"column":10},"generated":{"line":1,"column":1117}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":71,"column":15},"generated":{"line":1,"column":1119}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"as","original":{"line":71,"column":17},"generated":{"line":1,"column":1121}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":71,"column":23},"generated":{"line":1,"column":1125}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":71,"column":24},"generated":{"line":1,"column":1126}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":71,"column":33},"generated":{"line":1,"column":1134}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"values","original":{"line":72,"column":10},"generated":{"line":1,"column":1145}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":72,"column":19},"generated":{"line":1,"column":1147}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"domain","original":{"line":74,"column":8},"generated":{"line":1,"column":1150}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"domain","original":{"line":74,"column":8},"generated":{"line":1,"column":1154}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":74,"column":17},"generated":{"line":1,"column":1156}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"extent","original":{"line":74,"column":19},"generated":{"line":1,"column":1158}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"minsteps","original":{"line":75,"column":8},"generated":{"line":1,"column":1165}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":75,"column":19},"generated":{"line":1,"column":1167}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"steps","original":{"line":75,"column":21},"generated":{"line":1,"column":1169}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":75,"column":30},"generated":{"line":1,"column":1176}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"minsteps","original":{"line":75,"column":32},"generated":{"line":1,"column":1178}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":75,"column":44},"generated":{"line":1,"column":1188}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"maxsteps","original":{"line":76,"column":8},"generated":{"line":1,"column":1191}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":76,"column":19},"generated":{"line":1,"column":1193}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"steps","original":{"line":76,"column":21},"generated":{"line":1,"column":1195}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":76,"column":30},"generated":{"line":1,"column":1202}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"maxsteps","original":{"line":76,"column":32},"generated":{"line":1,"column":1204}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":76,"column":44},"generated":{"line":1,"column":1214}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":78,"column":19},"generated":{"line":1,"column":1218}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"method","original":{"line":78,"column":8},"generated":{"line":1,"column":1226}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":78,"column":39},"generated":{"line":1,"column":1229}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"method","original":{"line":78,"column":28},"generated":{"line":1,"column":1237}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":79,"column":12},"generated":{"line":1,"column":1241}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":79,"column":12},"generated":{"line":1,"column":1243}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":79,"column":12},"generated":{"line":1,"column":1245}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":79,"column":12},"generated":{"line":1,"column":1252}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"method","original":{"line":79,"column":41},"generated":{"line":1,"column":1279}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":82,"column":22},"generated":{"line":1,"column":1282}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":82,"column":8},"generated":{"line":1,"column":1293}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"resolve","original":{"line":82,"column":10},"generated":{"line":1,"column":1295}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"domain","original":{"line":83,"column":11},"generated":{"line":1,"column":1305}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"domain","original":{"line":83,"column":19},"generated":{"line":1,"column":1309}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":83,"column":28},"generated":{"line":1,"column":1312}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":83,"column":35},"generated":{"line":1,"column":1314}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":83,"column":35},"generated":{"line":1,"column":1316}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":83,"column":35},"generated":{"line":1,"column":1324}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":83,"column":43},"generated":{"line":1,"column":1326}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"field","original":{"line":83,"column":45},"generated":{"line":1,"column":1328}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"minsteps","original":{"line":84,"column":6},"generated":{"line":1,"column":1336}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"maxsteps","original":{"line":84,"column":17},"generated":{"line":1,"column":1338}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":84,"column":28},"generated":{"line":1,"column":1340}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"steps","original":{"line":84,"column":30},"generated":{"line":1,"column":1342}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"maxsteps","original":{"line":84,"column":39},"generated":{"line":1,"column":1349}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"groups","original":{"line":87,"column":4},"generated":{"line":1,"column":1352}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"forEach","original":{"line":87,"column":11},"generated":{"line":1,"column":1354}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":87,"column":19},"generated":{"line":1,"column":1362}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":88,"column":12},"generated":{"line":1,"column":1366}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":88,"column":12},"generated":{"line":1,"column":1372}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":88,"column":22},"generated":{"line":1,"column":1375}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":88,"column":32},"generated":{"line":1,"column":1377}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":88,"column":32},"generated":{"line":1,"column":1379}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":88,"column":32},"generated":{"line":1,"column":1390}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"bandwidth","original":{"line":88,"column":35},"generated":{"line":1,"column":1392}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"method","original":{"line":88,"column":46},"generated":{"line":1,"column":1395}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"scale","original":{"line":89,"column":12},"generated":{"line":1,"column":1398}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"_","original":{"line":89,"column":20},"generated":{"line":1,"column":1400}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"counts","original":{"line":89,"column":22},"generated":{"line":1,"column":1402}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":89,"column":31},"generated":{"line":1,"column":1409}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"length","original":{"line":89,"column":33},"generated":{"line":1,"column":1411}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":89,"column":42},"generated":{"line":1,"column":1418}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"local","original":{"line":90,"column":12},"generated":{"line":1,"column":1420}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"domain","original":{"line":90,"column":20},"generated":{"line":1,"column":1422}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":90,"column":30},"generated":{"line":1,"column":1426}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":90,"column":37},"generated":{"line":1,"column":1428}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":90,"column":37},"generated":{"line":1,"column":1430}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":90,"column":37},"generated":{"line":1,"column":1438}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":92,"column":18},"generated":{"line":1,"column":1442}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":92,"column":18},"generated":{"line":1,"column":1444}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":92,"column":18},"generated":{"line":1,"column":1446}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"density","original":{"line":92,"column":18},"generated":{"line":1,"column":1459}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"local","original":{"line":92,"column":27},"generated":{"line":1,"column":1461}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"minsteps","original":{"line":92,"column":34},"generated":{"line":1,"column":1463}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"maxsteps","original":{"line":92,"column":44},"generated":{"line":1,"column":1465}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"forEach","original":{"line":92,"column":54},"generated":{"line":1,"column":1468}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"v","original":{"line":92,"column":62},"generated":{"line":1,"column":1476}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":93,"column":14},"generated":{"line":1,"column":1480}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":93,"column":14},"generated":{"line":1,"column":1486}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":93,"column":18},"generated":{"line":1,"column":1488}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":94,"column":13},"generated":{"line":1,"column":1491}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":94,"column":13},"generated":{"line":1,"column":1495}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"i","original":{"line":94,"column":17},"generated":{"line":1,"column":1499}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":94,"column":19},"generated":{"line":1,"column":1501}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"i","original":{"line":94,"column":22},"generated":{"line":1,"column":1503}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"names","original":{"line":94,"column":24},"generated":{"line":1,"column":1505}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"length","original":{"line":94,"column":30},"generated":{"line":1,"column":1507}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"i","original":{"line":94,"column":40},"generated":{"line":1,"column":1516}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":95,"column":10},"generated":{"line":1,"column":1518}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"names","original":{"line":95,"column":12},"generated":{"line":1,"column":1520}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"i","original":{"line":95,"column":18},"generated":{"line":1,"column":1522}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"g","original":{"line":95,"column":24},"generated":{"line":1,"column":1526}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"dims","original":{"line":95,"column":26},"generated":{"line":1,"column":1528}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"i","original":{"line":95,"column":31},"generated":{"line":1,"column":1533}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":97,"column":8},"generated":{"line":1,"column":1536}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"as","original":{"line":97,"column":10},"generated":{"line":1,"column":1538}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":97,"column":13},"generated":{"line":1,"column":1540}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"v","original":{"line":97,"column":19},"generated":{"line":1,"column":1544}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":97,"column":21},"generated":{"line":1,"column":1546}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":98,"column":8},"generated":{"line":1,"column":1549}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"as","original":{"line":98,"column":10},"generated":{"line":1,"column":1551}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":98,"column":13},"generated":{"line":1,"column":1553}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"v","original":{"line":98,"column":19},"generated":{"line":1,"column":1557}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":98,"column":21},"generated":{"line":1,"column":1559}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"scale","original":{"line":98,"column":26},"generated":{"line":1,"column":1562}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"values","original":{"line":99,"column":8},"generated":{"line":1,"column":1564}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"push","original":{"line":99,"column":15},"generated":{"line":1,"column":1566}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":99,"column":20},"generated":{"line":1,"column":1572}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":99,"column":27},"generated":{"line":1,"column":1574}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":99,"column":27},"generated":{"line":1,"column":1576}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"t","original":{"line":99,"column":27},"generated":{"line":1,"column":1584}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":103,"column":8},"generated":{"line":1,"column":1592}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"value","original":{"line":103,"column":13},"generated":{"line":1,"column":1597}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":103,"column":20},"generated":{"line":1,"column":1605}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"rem","original":{"line":103,"column":24},"generated":{"line":1,"column":1607}},{"source":"node_modules/vega-transforms/src/KDE.js","original":{"line":103,"column":30},"generated":{"line":1,"column":1611}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"value","original":{"line":103,"column":35},"generated":{"line":1,"column":1616}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"value","original":{"line":104,"column":9},"generated":{"line":1,"column":1623}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"value","original":{"line":104,"column":9},"generated":{"line":1,"column":1628}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":104,"column":17},"generated":{"line":1,"column":1634}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"add","original":{"line":104,"column":21},"generated":{"line":1,"column":1636}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":104,"column":27},"generated":{"line":1,"column":1640}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"source","original":{"line":104,"column":31},"generated":{"line":1,"column":1642}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"values","original":{"line":104,"column":40},"generated":{"line":1,"column":1649}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":107,"column":9},"generated":{"line":1,"column":1651}},{"source":"node_modules/vega-transforms/src/KDE.js","name":"out","original":{"line":107,"column":9},"generated":{"line":1,"column":1658}}],"sources":{"node_modules/vega-transforms/src/KDE.js":"import {partition} from './util/util';\nimport {randomKDE} from 'vega-statistics';\nimport {Transform, ingest} from 'vega-dataflow';\nimport {sampleCurve} from 'vega-statistics';\nimport {accessorName, error, extent, inherits} from 'vega-util';\n\n/**\n * Compute kernel density estimates (KDE) for one or more data groups.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n *   to groupby.\n * @param {function(object): *} params.field - An accessor for the data field\n *   to estimate.\n * @param {number} [params.bandwidth=0] - The KDE kernel bandwidth.\n *   If zero or unspecified, the bandwidth is automatically determined.\n * @param {boolean} [params.counts=false] - A boolean flag indicating if the\n *   output values should be probability estimates (false, default) or\n *   smoothed counts (true).\n * @param {string} [params.cumulative=false] - A boolean flag indicating if a\n *   density (false) or cumulative distribution (true) should be generated.\n * @param {Array<number>} [params.extent] - The domain extent over which to\n *   plot the density. If unspecified, the [min, max] data extent is used.\n * @param {string} [params.resolve='independent'] - Indicates how parameters for\n *   multiple densities should be resolved. If \"independent\" (the default), each\n *   density may have its own domain extent and dynamic number of curve sample\n *   steps. If \"shared\", the KDE transform will ensure that all densities are\n *   defined over a shared domain and curve steps, enabling stacking.\n * @param {number} [params.minsteps=25] - The minimum number of curve samples\n *   for plotting the density.\n * @param {number} [params.maxsteps=200] - The maximum number of curve samples\n *   for plotting the density.\n * @param {number} [params.steps] - The exact number of curve samples for\n *   plotting the density. If specified, overrides both minsteps and maxsteps\n *   to set an exact number of uniform samples. Useful in conjunction with\n *   a fixed extent to ensure consistent sample points for stacked densities.\n */\nexport default function KDE(params) {\n  Transform.call(this, null, params);\n}\n\nKDE.Definition = {\n  'type': 'KDE',\n  'metadata': {'generates': true},\n  'params': [\n    { 'name': 'groupby', 'type': 'field', 'array': true },\n    { 'name': 'field', 'type': 'field', 'required': true },\n    { 'name': 'cumulative', 'type': 'boolean', 'default': false },\n    { 'name': 'counts', 'type': 'boolean', 'default': false },\n    { 'name': 'bandwidth', 'type': 'number', 'default': 0 },\n    { 'name': 'extent', 'type': 'number', 'array': true, 'length': 2 },\n    { 'name': 'resolve', 'type': 'enum', 'values': ['shared', 'independent'], 'default': 'independent' },\n    { 'name': 'steps', 'type': 'number' },\n    { 'name': 'minsteps', 'type': 'number', 'default': 25 },\n    { 'name': 'maxsteps', 'type': 'number', 'default': 200 },\n    { 'name': 'as', 'type': 'string', 'array': true, 'default': ['value', 'density'] }\n  ]\n};\n\nvar prototype = inherits(KDE, Transform);\n\nprototype.transform = function(_, pulse) {\n  var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS);\n\n  if (!this.value || pulse.changed() || _.modified()) {\n    const source = pulse.materialize(pulse.SOURCE).source,\n          groups = partition(source, _.groupby, _.field),\n          names = (_.groupby || []).map(accessorName),\n          bandwidth = _.bandwidth,\n          method = _.cumulative ? 'cdf' : 'pdf',\n          as = _.as || ['value', 'density'],\n          values = [];\n\n    let domain = _.extent,\n        minsteps = _.steps || _.minsteps || 25,\n        maxsteps = _.steps || _.maxsteps || 200;\n\n    if (method !== 'pdf' && method !== 'cdf') {\n      error('Invalid density method: ' + method);\n    }\n\n    if (_.resolve === 'shared') {\n      if (!domain) domain = extent(source, _.field);\n      minsteps = maxsteps = _.steps || maxsteps;\n    }\n\n    groups.forEach(g => {\n      const density = randomKDE(g, bandwidth)[method],\n            scale = _.counts ? g.length : 1,\n            local = domain || extent(g);\n\n      sampleCurve(density, local, minsteps, maxsteps).forEach(v => {\n        const t = {};\n        for (let i=0; i<names.length; ++i) {\n          t[names[i]] = g.dims[i];\n        }\n        t[as[0]] = v[0];\n        t[as[1]] = v[1] * scale;\n        values.push(ingest(t));\n      });\n    });\n\n    if (this.value) out.rem = this.value;\n    this.value = out.add = out.source = values;\n  }\n\n  return out;\n};\n"},"lineCount":null}},"error":null,"hash":"1308e7eb41deb3369e5db1311bb10a7f","cacheData":{"env":{}}}