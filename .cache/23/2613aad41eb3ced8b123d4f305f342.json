{"id":"QmGF","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591977532257},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"./util/util","loc":{"line":1,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Quantile.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/util/util.js"},{"name":"vega-dataflow","loc":{"line":2,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Quantile.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-statistics","loc":{"line":3,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Quantile.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-statistics/index.js"},{"name":"vega-util","loc":{"line":4,"column":37},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Quantile.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"},{"name":"d3-array","loc":{"line":5,"column":20},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Quantile.js","resolved":"/home/toltm/data-viz/temperature/node_modules/d3-array/src/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=s;var e=require(\"./util/util\"),r=require(\"vega-dataflow\"),a=require(\"vega-statistics\"),t=require(\"vega-util\"),i=require(\"d3-array\");function s(e){r.Transform.call(this,null,e)}s.Definition={type:\"Quantile\",metadata:{generates:!0,changes:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"field\",type:\"field\",required:!0},{name:\"probs\",type:\"number\",array:!0},{name:\"step\",type:\"number\",default:.01},{name:\"as\",type:\"string\",array:!0,default:[\"prob\",\"value\"]}]};var u=(0,t.inherits)(s,r.Transform),n=1e-14;u.transform=function(s,u){var l=u.fork(u.NO_SOURCE|u.NO_FIELDS),o=s.as||[\"prob\",\"value\"];if(this.value&&!s.modified()&&!u.changed())return l.source=this.value,l;const p=u.materialize(u.SOURCE).source,f=(0,e.partition)(p,s.groupby,s.field),d=(s.groupby||[]).map(t.accessorName),m=[],c=s.step||.01,g=s.probs||(0,i.range)(c/2,1-n,c),v=g.length;return f.forEach(e=>{const t=(0,a.quantiles)(e,g);for(let a=0;a<v;++a){const i={};for(let r=0;r<d.length;++r)i[d[r]]=e.dims[r];i[o[0]]=g[a],i[o[1]]=t[a],m.push((0,r.ingest)(i))}}),this.value&&(l.rem=this.value),this.value=l.add=l.source=m,l};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":3,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":3,"column":0},"generated":{"line":1,"column":144}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":3,"column":0},"generated":{"line":1,"column":152}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":4,"column":0},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":4,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":4,"column":0},"generated":{"line":1,"column":181}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":5,"column":0},"generated":{"line":1,"column":194}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":5,"column":0},"generated":{"line":1,"column":196}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":5,"column":0},"generated":{"line":1,"column":204}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":23,"column":15},"generated":{"line":1,"column":216}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Quantile","original":{"line":23,"column":24},"generated":{"line":1,"column":225}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"params","original":{"line":23,"column":33},"generated":{"line":1,"column":227}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"call","original":{"line":24,"column":12},"generated":{"line":1,"column":230}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"call","original":{"line":24,"column":12},"generated":{"line":1,"column":232}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"call","original":{"line":24,"column":12},"generated":{"line":1,"column":242}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":24,"column":17},"generated":{"line":1,"column":247}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":24,"column":23},"generated":{"line":1,"column":252}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"params","original":{"line":24,"column":29},"generated":{"line":1,"column":257}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Quantile","original":{"line":27,"column":0},"generated":{"line":1,"column":260}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Definition","original":{"line":27,"column":9},"generated":{"line":1,"column":262}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":27,"column":22},"generated":{"line":1,"column":273}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":28,"column":10},"generated":{"line":1,"column":274}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":28,"column":10},"generated":{"line":1,"column":279}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":14},"generated":{"line":1,"column":290}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":14},"generated":{"line":1,"column":299}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":28},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":28},"generated":{"line":1,"column":311}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":45},"generated":{"line":1,"column":313}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":29,"column":45},"generated":{"line":1,"column":322}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":30,"column":12},"generated":{"line":1,"column":325}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":30,"column":12},"generated":{"line":1,"column":332}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":4},"generated":{"line":1,"column":333}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":14},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":14},"generated":{"line":1,"column":339}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":33},"generated":{"line":1,"column":349}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":33},"generated":{"line":1,"column":354}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":51},"generated":{"line":1,"column":362}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":31,"column":51},"generated":{"line":1,"column":369}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":4},"generated":{"line":1,"column":372}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":14},"generated":{"line":1,"column":373}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":14},"generated":{"line":1,"column":378}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":31},"generated":{"line":1,"column":386}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":31},"generated":{"line":1,"column":391}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":52},"generated":{"line":1,"column":399}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":32,"column":52},"generated":{"line":1,"column":409}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":4},"generated":{"line":1,"column":412}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":14},"generated":{"line":1,"column":413}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":14},"generated":{"line":1,"column":418}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":31},"generated":{"line":1,"column":426}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":31},"generated":{"line":1,"column":431}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":50},"generated":{"line":1,"column":440}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":33,"column":50},"generated":{"line":1,"column":447}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":4},"generated":{"line":1,"column":450}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":14},"generated":{"line":1,"column":451}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":14},"generated":{"line":1,"column":456}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":30},"generated":{"line":1,"column":463}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":30},"generated":{"line":1,"column":468}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":51},"generated":{"line":1,"column":477}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":34,"column":51},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":4},"generated":{"line":1,"column":490}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":14},"generated":{"line":1,"column":491}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":14},"generated":{"line":1,"column":496}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":28},"generated":{"line":1,"column":501}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":28},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":47},"generated":{"line":1,"column":515}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":47},"generated":{"line":1,"column":522}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":64},"generated":{"line":1,"column":524}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":64},"generated":{"line":1,"column":532}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":65},"generated":{"line":1,"column":533}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":35,"column":73},"generated":{"line":1,"column":540}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":39,"column":0},"generated":{"line":1,"column":552}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"prototype","original":{"line":39,"column":4},"generated":{"line":1,"column":556}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":39,"column":16},"generated":{"line":1,"column":559}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Quantile","original":{"line":39,"column":25},"generated":{"line":1,"column":561}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Quantile","original":{"line":39,"column":25},"generated":{"line":1,"column":563}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Quantile","original":{"line":39,"column":25},"generated":{"line":1,"column":573}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"Transform","original":{"line":39,"column":35},"generated":{"line":1,"column":575}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":39,"column":16},"generated":{"line":1,"column":577}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"EPSILON","original":{"line":41,"column":4},"generated":{"line":1,"column":588}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":41,"column":14},"generated":{"line":1,"column":590}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"prototype","original":{"line":43,"column":0},"generated":{"line":1,"column":596}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"transform","original":{"line":43,"column":10},"generated":{"line":1,"column":598}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":43,"column":22},"generated":{"line":1,"column":608}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":43,"column":31},"generated":{"line":1,"column":617}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":43,"column":34},"generated":{"line":1,"column":619}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":44,"column":6},"generated":{"line":1,"column":622}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":44,"column":6},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":44,"column":12},"generated":{"line":1,"column":628}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"fork","original":{"line":44,"column":18},"generated":{"line":1,"column":630}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":44,"column":23},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"NO_SOURCE","original":{"line":44,"column":29},"generated":{"line":1,"column":637}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":44,"column":41},"generated":{"line":1,"column":647}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"NO_FIELDS","original":{"line":44,"column":47},"generated":{"line":1,"column":649}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"as","original":{"line":45,"column":6},"generated":{"line":1,"column":660}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":45,"column":11},"generated":{"line":1,"column":662}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"as","original":{"line":45,"column":13},"generated":{"line":1,"column":664}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":45,"column":19},"generated":{"line":1,"column":668}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":45,"column":20},"generated":{"line":1,"column":669}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":45,"column":28},"generated":{"line":1,"column":676}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":47,"column":6},"generated":{"line":1,"column":685}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":47,"column":6},"generated":{"line":1,"column":688}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":47,"column":11},"generated":{"line":1,"column":693}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":47,"column":21},"generated":{"line":1,"column":701}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"modified","original":{"line":47,"column":23},"generated":{"line":1,"column":703}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":47,"column":38},"generated":{"line":1,"column":716}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"changed","original":{"line":47,"column":44},"generated":{"line":1,"column":718}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":49,"column":11},"generated":{"line":1,"column":728}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":48,"column":4},"generated":{"line":1,"column":735}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":48,"column":8},"generated":{"line":1,"column":737}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":48,"column":17},"generated":{"line":1,"column":744}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":48,"column":22},"generated":{"line":1,"column":749}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":49,"column":11},"generated":{"line":1,"column":755}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":52,"column":8},"generated":{"line":1,"column":757}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":52,"column":8},"generated":{"line":1,"column":763}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":52,"column":17},"generated":{"line":1,"column":765}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"materialize","original":{"line":52,"column":23},"generated":{"line":1,"column":767}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"pulse","original":{"line":52,"column":35},"generated":{"line":1,"column":779}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"SOURCE","original":{"line":52,"column":41},"generated":{"line":1,"column":781}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":52,"column":49},"generated":{"line":1,"column":789}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"groups","original":{"line":53,"column":8},"generated":{"line":1,"column":796}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":53,"column":17},"generated":{"line":1,"column":799}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":53,"column":27},"generated":{"line":1,"column":801}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":53,"column":27},"generated":{"line":1,"column":803}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":53,"column":27},"generated":{"line":1,"column":814}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":53,"column":35},"generated":{"line":1,"column":816}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"groupby","original":{"line":53,"column":37},"generated":{"line":1,"column":818}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":53,"column":46},"generated":{"line":1,"column":826}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"field","original":{"line":53,"column":48},"generated":{"line":1,"column":828}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"names","original":{"line":54,"column":8},"generated":{"line":1,"column":835}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":54,"column":17},"generated":{"line":1,"column":838}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"groupby","original":{"line":54,"column":19},"generated":{"line":1,"column":840}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":54,"column":30},"generated":{"line":1,"column":849}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"map","original":{"line":54,"column":34},"generated":{"line":1,"column":853}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"accessorName","original":{"line":54,"column":38},"generated":{"line":1,"column":857}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":54,"column":16},"generated":{"line":1,"column":859}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"values","original":{"line":55,"column":8},"generated":{"line":1,"column":873}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":55,"column":17},"generated":{"line":1,"column":875}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":56,"column":8},"generated":{"line":1,"column":878}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":56,"column":15},"generated":{"line":1,"column":880}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":56,"column":17},"generated":{"line":1,"column":882}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":56,"column":25},"generated":{"line":1,"column":888}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"p","original":{"line":57,"column":8},"generated":{"line":1,"column":892}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"_","original":{"line":57,"column":12},"generated":{"line":1,"column":894}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"probs","original":{"line":57,"column":14},"generated":{"line":1,"column":896}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":57,"column":23},"generated":{"line":1,"column":904}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":57,"column":29},"generated":{"line":1,"column":906}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":57,"column":29},"generated":{"line":1,"column":908}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":57,"column":29},"generated":{"line":1,"column":915}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":57,"column":34},"generated":{"line":1,"column":917}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":57,"column":37},"generated":{"line":1,"column":919}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"EPSILON","original":{"line":57,"column":41},"generated":{"line":1,"column":921}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"step","original":{"line":57,"column":50},"generated":{"line":1,"column":923}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"n","original":{"line":58,"column":8},"generated":{"line":1,"column":926}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"p","original":{"line":58,"column":12},"generated":{"line":1,"column":928}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"length","original":{"line":58,"column":14},"generated":{"line":1,"column":930}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":77,"column":9},"generated":{"line":1,"column":937}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"groups","original":{"line":60,"column":2},"generated":{"line":1,"column":944}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"forEach","original":{"line":60,"column":9},"generated":{"line":1,"column":946}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"g","original":{"line":60,"column":17},"generated":{"line":1,"column":954}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"q","original":{"line":61,"column":10},"generated":{"line":1,"column":958}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"q","original":{"line":61,"column":10},"generated":{"line":1,"column":964}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":61,"column":14},"generated":{"line":1,"column":967}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"g","original":{"line":61,"column":24},"generated":{"line":1,"column":969}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"g","original":{"line":61,"column":24},"generated":{"line":1,"column":971}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"g","original":{"line":61,"column":24},"generated":{"line":1,"column":982}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"p","original":{"line":61,"column":27},"generated":{"line":1,"column":984}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":63,"column":9},"generated":{"line":1,"column":987}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":63,"column":9},"generated":{"line":1,"column":991}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":63,"column":13},"generated":{"line":1,"column":995}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":63,"column":15},"generated":{"line":1,"column":997}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":63,"column":18},"generated":{"line":1,"column":999}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"n","original":{"line":63,"column":20},"generated":{"line":1,"column":1001}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":63,"column":25},"generated":{"line":1,"column":1005}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":63,"column":28},"generated":{"line":1,"column":1007}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":64,"column":12},"generated":{"line":1,"column":1008}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":64,"column":12},"generated":{"line":1,"column":1014}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1016}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":65,"column":11},"generated":{"line":1,"column":1019}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":65,"column":11},"generated":{"line":1,"column":1023}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":65,"column":15},"generated":{"line":1,"column":1027}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":65,"column":17},"generated":{"line":1,"column":1029}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":65,"column":20},"generated":{"line":1,"column":1031}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"names","original":{"line":65,"column":22},"generated":{"line":1,"column":1033}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"length","original":{"line":65,"column":28},"generated":{"line":1,"column":1035}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":65,"column":38},"generated":{"line":1,"column":1044}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":66,"column":8},"generated":{"line":1,"column":1046}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"names","original":{"line":66,"column":10},"generated":{"line":1,"column":1048}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":66,"column":16},"generated":{"line":1,"column":1050}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"g","original":{"line":66,"column":22},"generated":{"line":1,"column":1054}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"dims","original":{"line":66,"column":24},"generated":{"line":1,"column":1056}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":66,"column":29},"generated":{"line":1,"column":1061}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":68,"column":6},"generated":{"line":1,"column":1064}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"as","original":{"line":68,"column":8},"generated":{"line":1,"column":1066}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":68,"column":11},"generated":{"line":1,"column":1068}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"p","original":{"line":68,"column":17},"generated":{"line":1,"column":1072}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":68,"column":19},"generated":{"line":1,"column":1074}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":69,"column":6},"generated":{"line":1,"column":1077}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"as","original":{"line":69,"column":8},"generated":{"line":1,"column":1079}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":69,"column":11},"generated":{"line":1,"column":1081}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"q","original":{"line":69,"column":17},"generated":{"line":1,"column":1085}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"i","original":{"line":69,"column":19},"generated":{"line":1,"column":1087}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"values","original":{"line":70,"column":6},"generated":{"line":1,"column":1090}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"push","original":{"line":70,"column":13},"generated":{"line":1,"column":1092}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":70,"column":18},"generated":{"line":1,"column":1098}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":70,"column":25},"generated":{"line":1,"column":1100}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":70,"column":25},"generated":{"line":1,"column":1102}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"t","original":{"line":70,"column":25},"generated":{"line":1,"column":1110}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":74,"column":6},"generated":{"line":1,"column":1117}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":74,"column":11},"generated":{"line":1,"column":1122}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":74,"column":18},"generated":{"line":1,"column":1130}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"rem","original":{"line":74,"column":22},"generated":{"line":1,"column":1132}},{"source":"node_modules/vega-transforms/src/Quantile.js","original":{"line":74,"column":28},"generated":{"line":1,"column":1136}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":74,"column":33},"generated":{"line":1,"column":1141}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":75,"column":7},"generated":{"line":1,"column":1148}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"value","original":{"line":75,"column":7},"generated":{"line":1,"column":1153}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":75,"column":15},"generated":{"line":1,"column":1159}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"add","original":{"line":75,"column":19},"generated":{"line":1,"column":1161}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":75,"column":25},"generated":{"line":1,"column":1165}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"source","original":{"line":75,"column":29},"generated":{"line":1,"column":1167}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"values","original":{"line":75,"column":38},"generated":{"line":1,"column":1174}},{"source":"node_modules/vega-transforms/src/Quantile.js","name":"out","original":{"line":77,"column":9},"generated":{"line":1,"column":1176}}],"sources":{"node_modules/vega-transforms/src/Quantile.js":"import {partition} from './util/util';\nimport {Transform, ingest} from 'vega-dataflow';\nimport {quantiles} from 'vega-statistics';\nimport {accessorName, inherits} from 'vega-util';\nimport {range} from 'd3-array';\n\n/**\n * Generates sample quantile values from an input data stream.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): *} params.field - An accessor for the data field\n *   over which to calculate quantile values.\n * @param {Array<function(object): *>} [params.groupby] - An array of accessors\n *   to groupby.\n * @param {Array<number>} [params.probs] - An array of probabilities in\n *   the range (0, 1) for which to compute quantile values. If not specified,\n *   the *step* parameter will be used.\n * @param {Array<number>} [params.step=0.01] - A probability step size for\n *   sampling quantile values. All values from one-half the step size up to\n *   1 (exclusive) will be sampled. This parameter is only used if the\n *   *quantiles* parameter is not provided.\n */\nexport default function Quantile(params) {\n  Transform.call(this, null, params);\n}\n\nQuantile.Definition = {\n  'type': 'Quantile',\n  'metadata': {'generates': true, 'changes': true},\n  'params': [\n    { 'name': 'groupby', 'type': 'field', 'array': true },\n    { 'name': 'field', 'type': 'field', 'required': true },\n    { 'name': 'probs', 'type': 'number', 'array': true },\n    { 'name': 'step', 'type': 'number', 'default': 0.01 },\n    { 'name': 'as', 'type': 'string', 'array': true, 'default': ['prob', 'value'] }\n  ]\n};\n\nvar prototype = inherits(Quantile, Transform);\n\nvar EPSILON = 1e-14;\n\nprototype.transform = function(_, pulse) {\n  var out = pulse.fork(pulse.NO_SOURCE | pulse.NO_FIELDS),\n      as = _.as || ['prob', 'value'];\n\n  if (this.value && !_.modified() && !pulse.changed()) {\n    out.source = this.value;\n    return out;\n  }\n\n  const source = pulse.materialize(pulse.SOURCE).source,\n        groups = partition(source, _.groupby, _.field),\n        names = (_.groupby || []).map(accessorName),\n        values = [],\n        step = _.step || 0.01,\n        p = _.probs || range(step/2, 1 - EPSILON, step),\n        n = p.length;\n\n  groups.forEach(g => {\n    const q = quantiles(g, p);\n\n    for (let i=0; i<n; ++i) {\n      const t = {};\n      for (let i=0; i<names.length; ++i) {\n        t[names[i]] = g.dims[i];\n      }\n      t[as[0]] = p[i];\n      t[as[1]] = q[i];\n      values.push(ingest(t));\n    }\n  });\n\n  if (this.value) out.rem = this.value;\n  this.value = out.add = out.source = values;\n\n  return out;\n};\n"},"lineCount":null}},"error":null,"hash":"c5b2c6b3714c00d4c1713f6a183e2bfe","cacheData":{"env":{}}}