{"id":"cCGj","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974399859},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"vega-dataflow","loc":{"line":1,"column":33},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Filter.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":2,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Filter.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=r;var e=require(\"vega-dataflow\"),t=require(\"vega-util\");function r(r){e.Transform.call(this,(0,t.fastmap)(),r)}r.Definition={type:\"Filter\",metadata:{changes:!0},params:[{name:\"expr\",type:\"expr\",required:!0}]};var i=(0,t.inherits)(r,e.Transform);i.transform=function(t,r){var i=r.dataflow,a=this.value,s=r.fork(),u=s.add,n=s.rem,o=s.mod,p=t.expr,d=!0;function l(r){var i=(0,e.tupleid)(r),s=p(r,t),l=a.get(i);s&&l?(a.delete(i),u.push(r)):s||l?d&&s&&!l&&o.push(r):(a.set(i,1),n.push(r))}return r.visit(r.REM,function(t){var r=(0,e.tupleid)(t);a.has(r)?a.delete(r):n.push(t)}),r.visit(r.ADD,function(r){p(r,t)?u.push(r):a.set((0,e.tupleid)(r),1)}),r.visit(r.MOD,l),t.modified()&&(d=!1,r.visit(r.REFLOW,l)),a.empty>i.cleanThreshold&&i.runAfter(a.clean),s};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":11,"column":15},"generated":{"line":1,"column":140}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Filter","original":{"line":11,"column":24},"generated":{"line":1,"column":149}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"params","original":{"line":11,"column":31},"generated":{"line":1,"column":151}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"call","original":{"line":12,"column":12},"generated":{"line":1,"column":154}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"call","original":{"line":12,"column":12},"generated":{"line":1,"column":156}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"call","original":{"line":12,"column":12},"generated":{"line":1,"column":166}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":12,"column":17},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":12,"column":23},"generated":{"line":1,"column":177}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":12,"column":2},"generated":{"line":1,"column":179}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":12,"column":2},"generated":{"line":1,"column":181}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"params","original":{"line":12,"column":34},"generated":{"line":1,"column":192}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Filter","original":{"line":15,"column":0},"generated":{"line":1,"column":195}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Definition","original":{"line":15,"column":7},"generated":{"line":1,"column":197}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":15,"column":20},"generated":{"line":1,"column":208}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":16,"column":10},"generated":{"line":1,"column":209}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":16,"column":10},"generated":{"line":1,"column":214}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":17,"column":14},"generated":{"line":1,"column":223}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":17,"column":14},"generated":{"line":1,"column":232}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":17,"column":26},"generated":{"line":1,"column":233}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":17,"column":26},"generated":{"line":1,"column":242}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":18,"column":12},"generated":{"line":1,"column":245}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":18,"column":12},"generated":{"line":1,"column":252}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":4},"generated":{"line":1,"column":253}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":14},"generated":{"line":1,"column":254}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":14},"generated":{"line":1,"column":259}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":30},"generated":{"line":1,"column":266}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":30},"generated":{"line":1,"column":271}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":50},"generated":{"line":1,"column":278}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":19,"column":50},"generated":{"line":1,"column":288}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":23,"column":0},"generated":{"line":1,"column":293}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"prototype","original":{"line":23,"column":4},"generated":{"line":1,"column":297}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":23,"column":16},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Filter","original":{"line":23,"column":25},"generated":{"line":1,"column":302}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Filter","original":{"line":23,"column":25},"generated":{"line":1,"column":304}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Filter","original":{"line":23,"column":25},"generated":{"line":1,"column":314}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"Transform","original":{"line":23,"column":33},"generated":{"line":1,"column":316}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":23,"column":16},"generated":{"line":1,"column":318}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"prototype","original":{"line":25,"column":0},"generated":{"line":1,"column":329}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"transform","original":{"line":25,"column":10},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":25,"column":22},"generated":{"line":1,"column":341}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"_","original":{"line":25,"column":31},"generated":{"line":1,"column":350}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":25,"column":34},"generated":{"line":1,"column":352}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"df","original":{"line":26,"column":6},"generated":{"line":1,"column":355}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"df","original":{"line":26,"column":6},"generated":{"line":1,"column":359}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":26,"column":11},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"dataflow","original":{"line":26,"column":17},"generated":{"line":1,"column":363}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":27,"column":6},"generated":{"line":1,"column":372}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":27,"column":14},"generated":{"line":1,"column":374}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"value","original":{"line":27,"column":19},"generated":{"line":1,"column":379}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":28,"column":6},"generated":{"line":1,"column":385}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":28,"column":15},"generated":{"line":1,"column":387}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"fork","original":{"line":28,"column":21},"generated":{"line":1,"column":389}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"add","original":{"line":29,"column":6},"generated":{"line":1,"column":396}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":29,"column":12},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"add","original":{"line":29,"column":19},"generated":{"line":1,"column":400}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"rem","original":{"line":30,"column":6},"generated":{"line":1,"column":404}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":30,"column":12},"generated":{"line":1,"column":406}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"rem","original":{"line":30,"column":19},"generated":{"line":1,"column":408}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"mod","original":{"line":31,"column":6},"generated":{"line":1,"column":412}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":31,"column":12},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"mod","original":{"line":31,"column":19},"generated":{"line":1,"column":416}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"test","original":{"line":32,"column":6},"generated":{"line":1,"column":420}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"_","original":{"line":32,"column":13},"generated":{"line":1,"column":422}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"expr","original":{"line":32,"column":15},"generated":{"line":1,"column":424}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"isMod","original":{"line":33,"column":6},"generated":{"line":1,"column":429}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":33,"column":14},"generated":{"line":1,"column":432}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"revisit","original":{"line":46,"column":11},"generated":{"line":1,"column":434}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"revisit","original":{"line":46,"column":11},"generated":{"line":1,"column":443}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":46,"column":19},"generated":{"line":1,"column":445}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":47,"column":8},"generated":{"line":1,"column":448}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":47,"column":8},"generated":{"line":1,"column":452}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":47,"column":13},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":47,"column":21},"generated":{"line":1,"column":457}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":47,"column":21},"generated":{"line":1,"column":459}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":47,"column":21},"generated":{"line":1,"column":468}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"b","original":{"line":48,"column":8},"generated":{"line":1,"column":471}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"test","original":{"line":48,"column":12},"generated":{"line":1,"column":473}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":48,"column":17},"generated":{"line":1,"column":475}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"_","original":{"line":48,"column":20},"generated":{"line":1,"column":477}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"s","original":{"line":49,"column":8},"generated":{"line":1,"column":480}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":49,"column":12},"generated":{"line":1,"column":482}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"get","original":{"line":49,"column":18},"generated":{"line":1,"column":484}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":49,"column":22},"generated":{"line":1,"column":488}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"b","original":{"line":50,"column":8},"generated":{"line":1,"column":491}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"s","original":{"line":50,"column":13},"generated":{"line":1,"column":494}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":51,"column":6},"generated":{"line":1,"column":497}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"delete","original":{"line":51,"column":12},"generated":{"line":1,"column":499}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":51,"column":19},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"add","original":{"line":52,"column":6},"generated":{"line":1,"column":509}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"push","original":{"line":52,"column":10},"generated":{"line":1,"column":511}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":52,"column":15},"generated":{"line":1,"column":516}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"b","original":{"line":53,"column":16},"generated":{"line":1,"column":520}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"s","original":{"line":53,"column":22},"generated":{"line":1,"column":523}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"isMod","original":{"line":56,"column":15},"generated":{"line":1,"column":525}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"b","original":{"line":56,"column":24},"generated":{"line":1,"column":528}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"s","original":{"line":56,"column":30},"generated":{"line":1,"column":532}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"mod","original":{"line":57,"column":6},"generated":{"line":1,"column":535}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"push","original":{"line":57,"column":10},"generated":{"line":1,"column":537}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":57,"column":15},"generated":{"line":1,"column":542}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":54,"column":6},"generated":{"line":1,"column":546}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"set","original":{"line":54,"column":12},"generated":{"line":1,"column":548}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":54,"column":16},"generated":{"line":1,"column":552}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":54,"column":20},"generated":{"line":1,"column":554}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"rem","original":{"line":55,"column":6},"generated":{"line":1,"column":557}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"push","original":{"line":55,"column":10},"generated":{"line":1,"column":559}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":55,"column":15},"generated":{"line":1,"column":564}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":69,"column":9},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":35,"column":2},"generated":{"line":1,"column":575}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"visit","original":{"line":35,"column":8},"generated":{"line":1,"column":577}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":35,"column":14},"generated":{"line":1,"column":583}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"REM","original":{"line":35,"column":20},"generated":{"line":1,"column":585}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":35,"column":25},"generated":{"line":1,"column":589}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":35,"column":34},"generated":{"line":1,"column":598}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":36,"column":8},"generated":{"line":1,"column":601}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":36,"column":8},"generated":{"line":1,"column":605}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":36,"column":13},"generated":{"line":1,"column":608}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":36,"column":21},"generated":{"line":1,"column":610}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":36,"column":21},"generated":{"line":1,"column":612}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":36,"column":21},"generated":{"line":1,"column":621}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":37,"column":9},"generated":{"line":1,"column":624}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"has","original":{"line":37,"column":15},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":37,"column":19},"generated":{"line":1,"column":630}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":38,"column":9},"generated":{"line":1,"column":633}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"delete","original":{"line":38,"column":15},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"id","original":{"line":38,"column":22},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"rem","original":{"line":37,"column":24},"generated":{"line":1,"column":645}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"push","original":{"line":37,"column":28},"generated":{"line":1,"column":647}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":37,"column":33},"generated":{"line":1,"column":652}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":41,"column":2},"generated":{"line":1,"column":657}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"visit","original":{"line":41,"column":8},"generated":{"line":1,"column":659}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":41,"column":14},"generated":{"line":1,"column":665}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"ADD","original":{"line":41,"column":20},"generated":{"line":1,"column":667}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":41,"column":25},"generated":{"line":1,"column":671}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":41,"column":34},"generated":{"line":1,"column":680}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"test","original":{"line":42,"column":8},"generated":{"line":1,"column":683}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":42,"column":13},"generated":{"line":1,"column":685}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"_","original":{"line":42,"column":16},"generated":{"line":1,"column":687}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"add","original":{"line":42,"column":20},"generated":{"line":1,"column":690}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"push","original":{"line":42,"column":24},"generated":{"line":1,"column":692}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":42,"column":29},"generated":{"line":1,"column":697}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":43,"column":9},"generated":{"line":1,"column":700}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"set","original":{"line":43,"column":15},"generated":{"line":1,"column":702}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":43,"column":19},"generated":{"line":1,"column":707}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":43,"column":27},"generated":{"line":1,"column":709}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":43,"column":27},"generated":{"line":1,"column":711}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"t","original":{"line":43,"column":27},"generated":{"line":1,"column":720}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":43,"column":31},"generated":{"line":1,"column":723}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":61,"column":2},"generated":{"line":1,"column":728}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"visit","original":{"line":61,"column":8},"generated":{"line":1,"column":730}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":61,"column":14},"generated":{"line":1,"column":736}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"MOD","original":{"line":61,"column":20},"generated":{"line":1,"column":738}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"revisit","original":{"line":61,"column":25},"generated":{"line":1,"column":742}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"_","original":{"line":63,"column":6},"generated":{"line":1,"column":745}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"modified","original":{"line":63,"column":8},"generated":{"line":1,"column":747}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"isMod","original":{"line":64,"column":4},"generated":{"line":1,"column":760}},{"source":"node_modules/vega-transforms/src/Filter.js","original":{"line":64,"column":12},"generated":{"line":1,"column":763}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":65,"column":4},"generated":{"line":1,"column":765}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"visit","original":{"line":65,"column":10},"generated":{"line":1,"column":767}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"pulse","original":{"line":65,"column":16},"generated":{"line":1,"column":773}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"REFLOW","original":{"line":65,"column":22},"generated":{"line":1,"column":775}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"revisit","original":{"line":65,"column":30},"generated":{"line":1,"column":782}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":68,"column":6},"generated":{"line":1,"column":786}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"empty","original":{"line":68,"column":12},"generated":{"line":1,"column":788}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"df","original":{"line":68,"column":20},"generated":{"line":1,"column":794}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cleanThreshold","original":{"line":68,"column":23},"generated":{"line":1,"column":796}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"df","original":{"line":68,"column":39},"generated":{"line":1,"column":812}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"runAfter","original":{"line":68,"column":42},"generated":{"line":1,"column":814}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"cache","original":{"line":68,"column":51},"generated":{"line":1,"column":823}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"clean","original":{"line":68,"column":57},"generated":{"line":1,"column":825}},{"source":"node_modules/vega-transforms/src/Filter.js","name":"output","original":{"line":69,"column":9},"generated":{"line":1,"column":832}}],"sources":{"node_modules/vega-transforms/src/Filter.js":"import {Transform, tupleid} from 'vega-dataflow';\nimport {fastmap, inherits} from 'vega-util';\n\n/**\n * Filters data tuples according to a predicate function.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): *} params.expr - The predicate expression function\n *   that determines a tuple's filter status. Truthy values pass the filter.\n */\nexport default function Filter(params) {\n  Transform.call(this, fastmap(), params);\n}\n\nFilter.Definition = {\n  'type': 'Filter',\n  'metadata': {'changes': true},\n  'params': [\n    { 'name': 'expr', 'type': 'expr', 'required': true }\n  ]\n};\n\nvar prototype = inherits(Filter, Transform);\n\nprototype.transform = function(_, pulse) {\n  var df = pulse.dataflow,\n      cache = this.value, // cache ids of filtered tuples\n      output = pulse.fork(),\n      add = output.add,\n      rem = output.rem,\n      mod = output.mod,\n      test = _.expr,\n      isMod = true;\n\n  pulse.visit(pulse.REM, function(t) {\n    var id = tupleid(t);\n    if (!cache.has(id)) rem.push(t);\n    else cache.delete(id);\n  });\n\n  pulse.visit(pulse.ADD, function(t) {\n    if (test(t, _)) add.push(t);\n    else cache.set(tupleid(t), 1);\n  });\n\n  function revisit(t) {\n    var id = tupleid(t),\n        b = test(t, _),\n        s = cache.get(id);\n    if (b && s) {\n      cache.delete(id);\n      add.push(t);\n    } else if (!b && !s) {\n      cache.set(id, 1);\n      rem.push(t);\n    } else if (isMod && b && !s) {\n      mod.push(t);\n    }\n  }\n\n  pulse.visit(pulse.MOD, revisit);\n\n  if (_.modified()) {\n    isMod = false;\n    pulse.visit(pulse.REFLOW, revisit);\n  }\n\n  if (cache.empty > df.cleanThreshold) df.runAfter(cache.clean);\n  return output;\n};\n"},"lineCount":null}},"error":null,"hash":"787aeb0fdfe835aaf2a2806f80336225","cacheData":{"env":{}}}