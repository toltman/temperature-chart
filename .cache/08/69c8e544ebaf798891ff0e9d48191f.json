{"id":"Hnm8","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974472658},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"vega-dataflow","loc":{"line":1,"column":41},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Relay.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":2,"column":23},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Relay.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=i;var e=require(\"vega-dataflow\"),r=require(\"vega-util\");function i(r){e.Transform.call(this,null,r)}var t=(0,r.inherits)(i,e.Transform);t.transform=function(r,i){var t,a;return this.value?a=this.value:(t=i=i.addAll(),a=this.value={}),r.derive&&(t=i.fork(i.NO_SOURCE),i.visit(i.REM,r=>{var i=(0,e.tupleid)(r);t.rem.push(a[i]),a[i]=null}),i.visit(i.ADD,r=>{var i=(0,e.derive)(r);a[(0,e.tupleid)(r)]=i,t.add.push(i)}),i.visit(i.MOD,r=>{var i,u=a[(0,e.tupleid)(r)];for(i in r)u[i]=r[i],t.modifies(i);t.mod.push(u)})),t};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":14,"column":15},"generated":{"line":1,"column":140}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"Relay","original":{"line":14,"column":24},"generated":{"line":1,"column":149}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"params","original":{"line":14,"column":30},"generated":{"line":1,"column":151}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"call","original":{"line":15,"column":12},"generated":{"line":1,"column":154}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"call","original":{"line":15,"column":12},"generated":{"line":1,"column":156}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"call","original":{"line":15,"column":12},"generated":{"line":1,"column":166}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":15,"column":17},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":15,"column":23},"generated":{"line":1,"column":176}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"params","original":{"line":15,"column":29},"generated":{"line":1,"column":181}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":18,"column":0},"generated":{"line":1,"column":184}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"prototype","original":{"line":18,"column":4},"generated":{"line":1,"column":188}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":18,"column":16},"generated":{"line":1,"column":191}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"Relay","original":{"line":18,"column":25},"generated":{"line":1,"column":193}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"Relay","original":{"line":18,"column":25},"generated":{"line":1,"column":195}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"Relay","original":{"line":18,"column":25},"generated":{"line":1,"column":205}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"Transform","original":{"line":18,"column":32},"generated":{"line":1,"column":207}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":18,"column":16},"generated":{"line":1,"column":209}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"prototype","original":{"line":20,"column":0},"generated":{"line":1,"column":220}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"transform","original":{"line":20,"column":10},"generated":{"line":1,"column":222}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":20,"column":22},"generated":{"line":1,"column":232}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"_","original":{"line":20,"column":31},"generated":{"line":1,"column":241}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":20,"column":34},"generated":{"line":1,"column":243}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":21,"column":6},"generated":{"line":1,"column":246}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":21,"column":6},"generated":{"line":1,"column":250}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":21,"column":11},"generated":{"line":1,"column":252}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":57,"column":9},"generated":{"line":1,"column":254}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":23,"column":6},"generated":{"line":1,"column":261}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"value","original":{"line":23,"column":11},"generated":{"line":1,"column":266}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":24,"column":4},"generated":{"line":1,"column":272}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":24,"column":10},"generated":{"line":1,"column":274}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"value","original":{"line":24,"column":15},"generated":{"line":1,"column":279}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":26,"column":4},"generated":{"line":1,"column":286}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":26,"column":10},"generated":{"line":1,"column":288}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":26,"column":18},"generated":{"line":1,"column":290}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"addAll","original":{"line":26,"column":24},"generated":{"line":1,"column":292}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":27,"column":4},"generated":{"line":1,"column":301}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":27,"column":10},"generated":{"line":1,"column":303}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"value","original":{"line":27,"column":15},"generated":{"line":1,"column":308}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":27,"column":23},"generated":{"line":1,"column":314}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"_","original":{"line":30,"column":6},"generated":{"line":1,"column":318}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"derive","original":{"line":30,"column":8},"generated":{"line":1,"column":320}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":31,"column":4},"generated":{"line":1,"column":329}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":31,"column":10},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"fork","original":{"line":31,"column":16},"generated":{"line":1,"column":333}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":31,"column":21},"generated":{"line":1,"column":338}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"NO_SOURCE","original":{"line":31,"column":27},"generated":{"line":1,"column":340}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":33,"column":4},"generated":{"line":1,"column":351}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"visit","original":{"line":33,"column":10},"generated":{"line":1,"column":353}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":33,"column":16},"generated":{"line":1,"column":359}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"REM","original":{"line":33,"column":22},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":33,"column":27},"generated":{"line":1,"column":365}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"id","original":{"line":34,"column":10},"generated":{"line":1,"column":369}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"id","original":{"line":34,"column":10},"generated":{"line":1,"column":373}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":34,"column":15},"generated":{"line":1,"column":376}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":34,"column":23},"generated":{"line":1,"column":378}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":34,"column":23},"generated":{"line":1,"column":380}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":34,"column":23},"generated":{"line":1,"column":389}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":35,"column":6},"generated":{"line":1,"column":392}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"rem","original":{"line":35,"column":10},"generated":{"line":1,"column":394}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"push","original":{"line":35,"column":14},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":35,"column":19},"generated":{"line":1,"column":403}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"id","original":{"line":35,"column":23},"generated":{"line":1,"column":405}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":36,"column":6},"generated":{"line":1,"column":409}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"id","original":{"line":36,"column":10},"generated":{"line":1,"column":411}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":36,"column":16},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":39,"column":4},"generated":{"line":1,"column":421}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"visit","original":{"line":39,"column":10},"generated":{"line":1,"column":423}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":39,"column":16},"generated":{"line":1,"column":429}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"ADD","original":{"line":39,"column":22},"generated":{"line":1,"column":431}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":39,"column":27},"generated":{"line":1,"column":435}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":40,"column":10},"generated":{"line":1,"column":439}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":40,"column":10},"generated":{"line":1,"column":443}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":40,"column":15},"generated":{"line":1,"column":446}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":40,"column":22},"generated":{"line":1,"column":448}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":40,"column":22},"generated":{"line":1,"column":450}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":40,"column":22},"generated":{"line":1,"column":458}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":41,"column":6},"generated":{"line":1,"column":461}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":41,"column":10},"generated":{"line":1,"column":464}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":41,"column":18},"generated":{"line":1,"column":466}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":41,"column":18},"generated":{"line":1,"column":468}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":41,"column":18},"generated":{"line":1,"column":477}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":41,"column":24},"generated":{"line":1,"column":481}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":42,"column":6},"generated":{"line":1,"column":483}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"add","original":{"line":42,"column":10},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"push","original":{"line":42,"column":14},"generated":{"line":1,"column":489}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":42,"column":19},"generated":{"line":1,"column":494}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":45,"column":4},"generated":{"line":1,"column":499}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"visit","original":{"line":45,"column":10},"generated":{"line":1,"column":501}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"pulse","original":{"line":45,"column":16},"generated":{"line":1,"column":507}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"MOD","original":{"line":45,"column":22},"generated":{"line":1,"column":509}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":45,"column":27},"generated":{"line":1,"column":513}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":46,"column":10},"generated":{"line":1,"column":517}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":46,"column":32},"generated":{"line":1,"column":521}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":46,"column":10},"generated":{"line":1,"column":523}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"lut","original":{"line":46,"column":15},"generated":{"line":1,"column":525}},{"source":"node_modules/vega-transforms/src/Relay.js","original":{"line":46,"column":19},"generated":{"line":1,"column":528}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":46,"column":27},"generated":{"line":1,"column":530}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":46,"column":27},"generated":{"line":1,"column":532}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":46,"column":27},"generated":{"line":1,"column":541}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":47,"column":11},"generated":{"line":1,"column":545}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":47,"column":11},"generated":{"line":1,"column":549}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":47,"column":16},"generated":{"line":1,"column":554}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":48,"column":8},"generated":{"line":1,"column":556}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":48,"column":11},"generated":{"line":1,"column":558}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"t","original":{"line":48,"column":16},"generated":{"line":1,"column":561}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":48,"column":18},"generated":{"line":1,"column":563}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":51,"column":8},"generated":{"line":1,"column":566}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"modifies","original":{"line":51,"column":12},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"k","original":{"line":51,"column":21},"generated":{"line":1,"column":577}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":53,"column":6},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"mod","original":{"line":53,"column":10},"generated":{"line":1,"column":582}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"push","original":{"line":53,"column":14},"generated":{"line":1,"column":586}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"dt","original":{"line":53,"column":19},"generated":{"line":1,"column":591}},{"source":"node_modules/vega-transforms/src/Relay.js","name":"out","original":{"line":57,"column":9},"generated":{"line":1,"column":597}}],"sources":{"node_modules/vega-transforms/src/Relay.js":"import {Transform, derive, tupleid} from 'vega-dataflow';\nimport {inherits} from 'vega-util';\n\n/**\n * Relays a data stream between data processing pipelines.\n * If the derive parameter is set, this transform will create derived\n * copies of observed tuples. This provides derived data streams in which\n * modifications to the tuples do not pollute an upstream data source.\n * @param {object} params - The parameters for this operator.\n * @param {number} [params.derive=false] - Boolean flag indicating if\n *   the transform should make derived copies of incoming tuples.\n * @constructor\n */\nexport default function Relay(params) {\n  Transform.call(this, null, params);\n}\n\nvar prototype = inherits(Relay, Transform);\n\nprototype.transform = function(_, pulse) {\n  var out, lut;\n\n  if (this.value) {\n    lut = this.value;\n  } else {\n    out = pulse = pulse.addAll();\n    lut = this.value = {};\n  }\n\n  if (_.derive) {\n    out = pulse.fork(pulse.NO_SOURCE);\n\n    pulse.visit(pulse.REM, t => {\n      var id = tupleid(t);\n      out.rem.push(lut[id]);\n      lut[id] = null;\n    });\n\n    pulse.visit(pulse.ADD, t => {\n      var dt = derive(t);\n      lut[tupleid(t)] = dt;\n      out.add.push(dt);\n    });\n\n    pulse.visit(pulse.MOD, t => {\n      var dt = lut[tupleid(t)], k;\n      for (k in t) {\n        dt[k] = t[k];\n        // down stream writes may overwrite re-derived tuples\n        // conservatively mark all source fields as modified\n        out.modifies(k);\n      }\n      out.mod.push(dt);\n    });\n  }\n\n  return out;\n};\n"},"lineCount":null}},"error":null,"hash":"30ca53ce48a7ae650e0ca7dd12e06bce","cacheData":{"env":{}}}