{"id":"xPnW","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/transformextract.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/transformextract.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591977532257},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"./encoding","loc":{"line":1,"column":46},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/transformextract.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/encoding.js"},{"name":"./spec/map","loc":{"line":2,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/transformextract.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/spec/map.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.extractTransforms=s;var e=require(\"./encoding\"),n=require(\"./spec/map\");class r extends n.SpecMapper{mapUnit(n,{config:r}){if(n.encoding){const{encoding:t,transform:s}=n,{bins:o,timeUnits:c,aggregate:g,groupby:i,encoding:a}=(0,e.extractTransformsFromEncoding)(t,r),p=[...s||[],...o,...c,...0===g.length?[]:[{aggregate:g,groupby:i}]];return Object.assign(Object.assign(Object.assign({},n),p.length>0?{transform:p}:{}),{encoding:a})}return n}}const t=new r;function s(e,n){return t.map(e,{config:n})}"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":0}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":13}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":20}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":35}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":43}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":56}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":57}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":64}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":68}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":76}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":38,"column":1},"generated":{"line":1,"column":94}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":96}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":100}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":102}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":110}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":124}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":126}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":134}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":148}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":1,"column":154}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":7,"column":37},"generated":{"line":1,"column":164}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":166}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":8,"column":9},"generated":{"line":1,"column":177}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":8,"column":17},"generated":{"line":1,"column":185}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":8,"column":50},"generated":{"line":1,"column":188}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":8,"column":51},"generated":{"line":1,"column":195}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":9,"column":8},"generated":{"line":1,"column":199}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":9,"column":8},"generated":{"line":1,"column":202}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":204}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":9,"column":23},"generated":{"line":1,"column":213}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":12},"generated":{"line":1,"column":214}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":220}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":23},"generated":{"line":1,"column":229}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":36},"generated":{"line":1,"column":231}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":47},"generated":{"line":1,"column":241}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":10,"column":64},"generated":{"line":1,"column":244}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":12},"generated":{"line":1,"column":247}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":13},"generated":{"line":1,"column":252}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":12},"generated":{"line":1,"column":254}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":19},"generated":{"line":1,"column":264}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":12},"generated":{"line":1,"column":266}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":30},"generated":{"line":1,"column":276}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":12},"generated":{"line":1,"column":278}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":41},"generated":{"line":1,"column":286}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":12},"generated":{"line":1,"column":288}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":50},"generated":{"line":1,"column":297}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":62},"generated":{"line":1,"column":301}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":92},"generated":{"line":1,"column":303}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":92},"generated":{"line":1,"column":305}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":92},"generated":{"line":1,"column":336}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":11,"column":105},"generated":{"line":1,"column":338}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":13,"column":12},"generated":{"line":1,"column":341}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":13,"column":24},"generated":{"line":1,"column":343}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":14,"column":12},"generated":{"line":1,"column":347}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":14,"column":44},"generated":{"line":1,"column":350}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":15,"column":11},"generated":{"line":1,"column":356}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":16,"column":11},"generated":{"line":1,"column":361}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":33},"generated":{"line":1,"column":366}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":12},"generated":{"line":1,"column":370}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":22},"generated":{"line":1,"column":372}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":37},"generated":{"line":1,"column":379}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":42},"generated":{"line":1,"column":382}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":43},"generated":{"line":1,"column":383}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":384}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":44},"generated":{"line":1,"column":394}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":55},"generated":{"line":1,"column":396}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":17,"column":55},"generated":{"line":1,"column":404}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":409}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":416}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":423}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":430}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":437}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":444}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":451}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":20,"column":6},"generated":{"line":1,"column":458}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":21,"column":11},"generated":{"line":1,"column":461}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":12},"generated":{"line":1,"column":464}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":22},"generated":{"line":1,"column":466}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":31},"generated":{"line":1,"column":473}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":35},"generated":{"line":1,"column":475}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":36},"generated":{"line":1,"column":476}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":36},"generated":{"line":1,"column":486}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":49},"generated":{"line":1,"column":489}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":22,"column":52},"generated":{"line":1,"column":493}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":494}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":503}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":507}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":26,"column":13},"generated":{"line":1,"column":514}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":517}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":31,"column":6},"generated":{"line":1,"column":523}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":525}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":1,"column":529}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":1,"column":531}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":540}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":36,"column":34},"generated":{"line":1,"column":542}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":36,"column":56},"generated":{"line":1,"column":544}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":547}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":554}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":19},"generated":{"line":1,"column":556}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":23},"generated":{"line":1,"column":560}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":29},"generated":{"line":1,"column":562}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":1,"column":563}},{"source":"../../src/transformextract.ts","name":null,"original":{"line":37,"column":30},"generated":{"line":1,"column":570}}],"sources":{"../../src/transformextract.ts":"import {Config} from './config';\nimport {extractTransformsFromEncoding} from './encoding';\nimport {NormalizedSpec} from './spec';\nimport {SpecMapper} from './spec/map';\nimport {GenericUnitSpec} from './spec/unit';\n\nclass TransformExtractMapper extends SpecMapper<{config: Config}, GenericUnitSpec<any, any>> {\n  public mapUnit(spec: GenericUnitSpec<any, any>, {config}: {config: Config}) {\n    if (spec.encoding) {\n      const {encoding: oldEncoding, transform: oldTransforms} = spec;\n      const {bins, timeUnits, aggregate, groupby, encoding} = extractTransformsFromEncoding(oldEncoding, config);\n\n      const transform = [\n        ...(oldTransforms ? oldTransforms : []),\n        ...bins,\n        ...timeUnits,\n        ...(aggregate.length === 0 ? [] : [{aggregate, groupby}])\n      ];\n\n      return {\n        ...spec,\n        ...(transform.length > 0 ? {transform} : {}),\n        encoding\n      };\n    } else {\n      return spec;\n    }\n  }\n}\n\nconst extractor = new TransformExtractMapper();\n\n/**\n * Modifies spec extracting transformations from encoding and moving them to the transforms array\n */\nexport function extractTransforms(spec: NormalizedSpec, config: Config): NormalizedSpec {\n  return extractor.map(spec, {config});\n}\n"},"lineCount":null}},"error":null,"hash":"1a922a820c9e10a460c19e7293254427","cacheData":{"env":{}}}