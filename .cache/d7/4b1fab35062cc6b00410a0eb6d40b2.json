{"id":"WBrd","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/legend/assemble.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974472658},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"tslib","loc":{"line":1,"column":23},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/tslib/tslib.es6.js"},{"name":"../../legend","loc":{"line":2,"column":64},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/legend.js"},{"name":"../../util","loc":{"line":3,"column":50},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"},{"name":"../../vega.schema","loc":{"line":4,"column":28},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/vega.schema.js"},{"name":"./parse","loc":{"line":5,"column":37},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/assemble.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/legend/parse.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.assembleLegends=i,exports.assembleLegend=a;var e=require(\"tslib\"),l=require(\"../../legend\"),o=require(\"../../util\"),n=require(\"../../vega.schema\"),t=require(\"./parse\");function s(e,l,o,n){var t,s,i;e.encode=null!==(t=e.encode)&&void 0!==t?t:{},e.encode[l]=null!==(s=e.encode[l])&&void 0!==s?s:{},e.encode[l].update=null!==(i=e.encode[l].update)&&void 0!==i?i:{},e.encode[l].update[o]=n}function i(e){const l=e.component.legends,n={};for(const s of(0,o.keys)(l)){const i=e.getScaleComponent(s),a=(0,o.stringify)(i.get(\"domains\"));if(n[a])for(const e of n[a]){(0,t.mergeLegendComponent)(e,l[s])||n[a].push(l[s])}else n[a]=[l[s].clone()]}return(0,o.vals)(n).flat().map(l=>a(l,e.config)).filter(e=>void 0!==e)}function a(t,i){var a,r,d;const c=t.combine(),{disable:u,labelExpr:f,selections:p}=c,v=(0,e.__rest)(c,[\"disable\",\"labelExpr\",\"selections\"]);if(!u){if(!1===i.aria&&null==v.aria&&(v.aria=!1),null===(a=v.encode)||void 0===a?void 0:a.symbols){const e=v.encode.symbols.update;!e.fill||\"transparent\"===e.fill.value||e.stroke||v.stroke||(e.stroke={value:\"transparent\"});for(const o of l.LEGEND_SCALE_CHANNELS)v[o]&&delete e[o]}if(v.title||delete v.title,void 0!==f){let e=f;(null===(d=null===(r=v.encode)||void 0===r?void 0:r.labels)||void 0===d?void 0:d.update)&&(0,n.isSignalRef)(v.encode.labels.update.text)&&(e=(0,o.replaceAll)(f,\"datum.label\",v.encode.labels.update.text.signal)),s(v,\"labels\",\"text\",{signal:e})}for(const e in v){const o=v[e];if((0,n.isSignalRef)(o)){const n=l.SIGNAL_LEGEND_PROP_INDEX[e];if(n){const{vgProp:l,part:t}=n;s(v,t,l,o),delete v[e]}}}return v}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":92}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":94}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":102}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":117}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":119}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":123}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":125}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":133}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":142}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":144}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":152}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":168}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":170}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":178}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":192}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":194}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":202}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":223}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":225}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":233}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":244}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":10,"column":9},"generated":{"line":1,"column":253}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":255}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":257}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":13,"column":2},"generated":{"line":1,"column":259}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":261}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":264}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":268}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":270}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":272}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":274}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":1,"column":276}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":31},"generated":{"line":1,"column":283}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":15},"generated":{"line":1,"column":291}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":18},"generated":{"line":1,"column":293}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":25},"generated":{"line":1,"column":295}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":31},"generated":{"line":1,"column":309}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":31},"generated":{"line":1,"column":313}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":31},"generated":{"line":1,"column":315}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":16,"column":35},"generated":{"line":1,"column":317}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":2},"generated":{"line":1,"column":320}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":9},"generated":{"line":1,"column":322}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":16},"generated":{"line":1,"column":329}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":43},"generated":{"line":1,"column":332}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":21},"generated":{"line":1,"column":340}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":24},"generated":{"line":1,"column":342}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":31},"generated":{"line":1,"column":344}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":38},"generated":{"line":1,"column":351}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":43},"generated":{"line":1,"column":361}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":43},"generated":{"line":1,"column":365}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":43},"generated":{"line":1,"column":367}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":17,"column":47},"generated":{"line":1,"column":369}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":372}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":9},"generated":{"line":1,"column":374}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":16},"generated":{"line":1,"column":381}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":22},"generated":{"line":1,"column":384}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":57},"generated":{"line":1,"column":391}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":28},"generated":{"line":1,"column":399}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":31},"generated":{"line":1,"column":401}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":38},"generated":{"line":1,"column":403}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":45},"generated":{"line":1,"column":410}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":51},"generated":{"line":1,"column":413}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":57},"generated":{"line":1,"column":427}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":57},"generated":{"line":1,"column":431}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":57},"generated":{"line":1,"column":433}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":18,"column":61},"generated":{"line":1,"column":435}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":3},"generated":{"line":1,"column":438}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":10},"generated":{"line":1,"column":440}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":17},"generated":{"line":1,"column":447}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":23},"generated":{"line":1,"column":450}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":30},"generated":{"line":1,"column":457}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":20,"column":48},"generated":{"line":1,"column":460}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":1,"column":462}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":471}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":23,"column":32},"generated":{"line":1,"column":473}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":476}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":482}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":24,"column":31},"generated":{"line":1,"column":484}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":24,"column":37},"generated":{"line":1,"column":486}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":24,"column":47},"generated":{"line":1,"column":496}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":25,"column":8},"generated":{"line":1,"column":504}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":25,"column":60},"generated":{"line":1,"column":506}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":7},"generated":{"line":1,"column":509}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":7},"generated":{"line":1,"column":513}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":1,"column":519}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":24},"generated":{"line":1,"column":524}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":29},"generated":{"line":1,"column":526}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":29},"generated":{"line":1,"column":528}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":29},"generated":{"line":1,"column":534}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":27,"column":52},"generated":{"line":1,"column":537}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":538}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":28,"column":10},"generated":{"line":1,"column":544}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":28,"column":27},"generated":{"line":1,"column":546}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":28,"column":33},"generated":{"line":1,"column":548}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":28,"column":51},"generated":{"line":1,"column":566}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":569}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":23},"generated":{"line":1,"column":572}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":574}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":576}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":587}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":48},"generated":{"line":1,"column":589}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":29,"column":52},"generated":{"line":1,"column":593}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":605}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":30,"column":8},"generated":{"line":1,"column":608}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":30,"column":23},"generated":{"line":1,"column":610}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":613}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":11},"generated":{"line":1,"column":617}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":623}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":42},"generated":{"line":1,"column":628}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":57},"generated":{"line":1,"column":630}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":31,"column":70},"generated":{"line":1,"column":633}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":1,"column":635}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":44},"generated":{"line":1,"column":637}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":44},"generated":{"line":1,"column":639}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":44},"generated":{"line":1,"column":661}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":67},"generated":{"line":1,"column":663}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":32,"column":88},"generated":{"line":1,"column":665}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":670}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":35,"column":25},"generated":{"line":1,"column":672}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":35,"column":37},"generated":{"line":1,"column":675}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":35,"column":42},"generated":{"line":1,"column":680}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":35,"column":63},"generated":{"line":1,"column":682}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":6},"generated":{"line":1,"column":691}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":1,"column":693}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":35},"generated":{"line":1,"column":696}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":36},"generated":{"line":1,"column":697}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":57},"generated":{"line":1,"column":699}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":39,"column":66},"generated":{"line":1,"column":702}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":711}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":43,"column":18},"generated":{"line":1,"column":718}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":720}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":722}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":728}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":44,"column":5},"generated":{"line":1,"column":731}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":5},"generated":{"line":1,"column":738}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":1,"column":742}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":1,"column":745}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":1,"column":747}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":32},"generated":{"line":1,"column":749}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":45,"column":38},"generated":{"line":1,"column":751}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":46,"column":5},"generated":{"line":1,"column":760}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":767}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":775}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":46,"column":17},"generated":{"line":1,"column":779}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":782}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":791}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":51,"column":31},"generated":{"line":1,"column":793}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":51,"column":60},"generated":{"line":1,"column":795}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":798}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":802}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":804}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":103,"column":1},"generated":{"line":1,"column":806}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":808}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":814}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":54},"generated":{"line":1,"column":816}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":65},"generated":{"line":1,"column":818}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":829}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":9},"generated":{"line":1,"column":837}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":839}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":18},"generated":{"line":1,"column":849}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":851}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":29},"generated":{"line":1,"column":862}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":39},"generated":{"line":1,"column":865}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":44},"generated":{"line":1,"column":867}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":870}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":872}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":874}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":50},"generated":{"line":1,"column":882}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":884}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":885}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":895}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":907}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":922}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":926}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":928}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":2},"generated":{"line":1,"column":929}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":22},"generated":{"line":1,"column":933}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":937}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":13},"generated":{"line":1,"column":939}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":46},"generated":{"line":1,"column":945}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":31},"generated":{"line":1,"column":951}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":58,"column":38},"generated":{"line":1,"column":953}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":1,"column":960}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":962}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":59,"column":18},"generated":{"line":1,"column":968}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":971}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":2},"generated":{"line":1,"column":979}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":1,"column":981}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":13},"generated":{"line":1,"column":983}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":997}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":1001}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":1008}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":19},"generated":{"line":1,"column":1010}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":1012}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":62,"column":30},"generated":{"line":1,"column":1020}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":1021}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":1027}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":16},"generated":{"line":1,"column":1029}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":23},"generated":{"line":1,"column":1031}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":30},"generated":{"line":1,"column":1038}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":63,"column":38},"generated":{"line":1,"column":1046}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":1,"column":1054}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":1056}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":42},"generated":{"line":1,"column":1062}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":20},"generated":{"line":1,"column":1078}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":24},"generated":{"line":1,"column":1080}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":20},"generated":{"line":1,"column":1085}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":60},"generated":{"line":1,"column":1092}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":64},"generated":{"line":1,"column":1094}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":75},"generated":{"line":1,"column":1102}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":64,"column":82},"generated":{"line":1,"column":1104}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":66,"column":6},"generated":{"line":1,"column":1113}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":66,"column":10},"generated":{"line":1,"column":1115}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":66,"column":19},"generated":{"line":1,"column":1122}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":1,"column":1123}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":66,"column":27},"generated":{"line":1,"column":1129}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":70,"column":9},"generated":{"line":1,"column":1145}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":70,"column":9},"generated":{"line":1,"column":1149}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":70,"column":15},"generated":{"line":1,"column":1155}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":70,"column":27},"generated":{"line":1,"column":1160}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":70,"column":4},"generated":{"line":1,"column":1162}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":71,"column":10},"generated":{"line":1,"column":1184}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":71,"column":17},"generated":{"line":1,"column":1186}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":1,"column":1197}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":72,"column":19},"generated":{"line":1,"column":1199}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":1202}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":77,"column":7},"generated":{"line":1,"column":1205}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":1,"column":1207}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":79,"column":11},"generated":{"line":1,"column":1221}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":79,"column":18},"generated":{"line":1,"column":1223}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":82,"column":20},"generated":{"line":1,"column":1234}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":1238}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":82,"column":31},"generated":{"line":1,"column":1240}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":83,"column":8},"generated":{"line":1,"column":1241}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":83,"column":8},"generated":{"line":1,"column":1245}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":83,"column":15},"generated":{"line":1,"column":1247}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":29},"generated":{"line":1,"column":1250}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1258}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1260}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1268}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":1270}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":1272}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1286}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1290}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1297}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":21},"generated":{"line":1,"column":1299}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":23},"generated":{"line":1,"column":1301}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":29},"generated":{"line":1,"column":1315}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":29},"generated":{"line":1,"column":1319}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":29},"generated":{"line":1,"column":1326}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":29},"generated":{"line":1,"column":1328}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":31},"generated":{"line":1,"column":1330}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":41},"generated":{"line":1,"column":1340}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":53},"generated":{"line":1,"column":1342}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":53},"generated":{"line":1,"column":1344}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":53},"generated":{"line":1,"column":1357}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":60},"generated":{"line":1,"column":1359}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":67},"generated":{"line":1,"column":1366}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":74},"generated":{"line":1,"column":1373}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":84,"column":81},"generated":{"line":1,"column":1380}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":6},"generated":{"line":1,"column":1388}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":13},"generated":{"line":1,"column":1391}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":24},"generated":{"line":1,"column":1393}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":24},"generated":{"line":1,"column":1395}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":24},"generated":{"line":1,"column":1407}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":35},"generated":{"line":1,"column":1409}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":50},"generated":{"line":1,"column":1423}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":57},"generated":{"line":1,"column":1425}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":64},"generated":{"line":1,"column":1432}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":71},"generated":{"line":1,"column":1439}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":78},"generated":{"line":1,"column":1446}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":85,"column":83},"generated":{"line":1,"column":1451}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":1,"column":1460}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":20},"generated":{"line":1,"column":1462}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":28},"generated":{"line":1,"column":1464}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":38},"generated":{"line":1,"column":1473}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":46},"generated":{"line":1,"column":1480}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":47},"generated":{"line":1,"column":1481}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":87,"column":55},"generated":{"line":1,"column":1488}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":90,"column":7},"generated":{"line":1,"column":1492}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":90,"column":7},"generated":{"line":1,"column":1496}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":90,"column":13},"generated":{"line":1,"column":1502}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":90,"column":21},"generated":{"line":1,"column":1507}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":90,"column":29},"generated":{"line":1,"column":1509}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":1,"column":1510}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":1,"column":1516}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":91,"column":22},"generated":{"line":1,"column":1518}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":91,"column":29},"generated":{"line":1,"column":1520}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":1523}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":8},"generated":{"line":1,"column":1527}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":20},"generated":{"line":1,"column":1529}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":20},"generated":{"line":1,"column":1531}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":20},"generated":{"line":1,"column":1544}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":92,"column":32},"generated":{"line":1,"column":1547}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":1548}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":93,"column":12},"generated":{"line":1,"column":1554}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":93,"column":24},"generated":{"line":1,"column":1556}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":93,"column":49},"generated":{"line":1,"column":1558}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":93,"column":49},"generated":{"line":1,"column":1583}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":94,"column":10},"generated":{"line":1,"column":1586}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":94,"column":10},"generated":{"line":1,"column":1589}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":94,"column":21},"generated":{"line":1,"column":1591}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":14},"generated":{"line":1,"column":1592}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":14},"generated":{"line":1,"column":1598}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":15},"generated":{"line":1,"column":1605}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":14},"generated":{"line":1,"column":1607}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":23},"generated":{"line":1,"column":1612}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":95,"column":31},"generated":{"line":1,"column":1615}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":96,"column":8},"generated":{"line":1,"column":1617}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":96,"column":24},"generated":{"line":1,"column":1619}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":96,"column":32},"generated":{"line":1,"column":1621}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":96,"column":38},"generated":{"line":1,"column":1623}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":96,"column":46},"generated":{"line":1,"column":1625}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":97,"column":15},"generated":{"line":1,"column":1635}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":97,"column":22},"generated":{"line":1,"column":1637}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":1642}},{"source":"../../../../src/compile/legend/assemble.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":1649}}],"sources":{"../../../../src/compile/legend/assemble.ts":"import {Legend as VgLegend, LegendEncode} from 'vega';\nimport {Config} from '../../config';\nimport {LEGEND_SCALE_CHANNELS, SIGNAL_LEGEND_PROP_INDEX} from '../../legend';\nimport {keys, replaceAll, stringify, vals} from '../../util';\nimport {isSignalRef, VgEncodeChannel, VgValueRef} from '../../vega.schema';\nimport {Model} from '../model';\nimport {LegendComponent} from './component';\nimport {mergeLegendComponent} from './parse';\n\nfunction setLegendEncode(\n  legend: VgLegend,\n  part: keyof LegendEncode,\n  vgProp: VgEncodeChannel,\n  vgRef: VgValueRef | VgValueRef[]\n) {\n  legend.encode = legend.encode ?? {};\n  legend.encode[part] = legend.encode[part] ?? {};\n  legend.encode[part].update = legend.encode[part].update ?? {};\n  // TODO: remove as any after https://github.com/prisma/nexus-prisma/issues/291\n  (legend.encode[part].update[vgProp] as any) = vgRef;\n}\n\nexport function assembleLegends(model: Model): VgLegend[] {\n  const legendComponentIndex = model.component.legends;\n  const legendByDomain: Record<string, LegendComponent[]> = {};\n\n  for (const channel of keys(legendComponentIndex)) {\n    const scaleComponent = model.getScaleComponent(channel);\n    const domainHash = stringify(scaleComponent.get('domains'));\n    if (legendByDomain[domainHash]) {\n      for (const mergedLegendComponent of legendByDomain[domainHash]) {\n        const merged = mergeLegendComponent(mergedLegendComponent, legendComponentIndex[channel]);\n        if (!merged) {\n          // If cannot merge, need to add this legend separately\n          legendByDomain[domainHash].push(legendComponentIndex[channel]);\n        }\n      }\n    } else {\n      legendByDomain[domainHash] = [legendComponentIndex[channel].clone()];\n    }\n  }\n\n  const legends = vals(legendByDomain)\n    .flat()\n    .map(l => assembleLegend(l, model.config))\n    .filter(l => l !== undefined);\n\n  return legends;\n}\n\nexport function assembleLegend(legendCmpt: LegendComponent, config: Config) {\n  const {disable, labelExpr, selections, ...legend} = legendCmpt.combine();\n\n  if (disable) {\n    return undefined;\n  }\n\n  if (config.aria === false && legend.aria == undefined) {\n    legend.aria = false;\n  }\n\n  if (legend.encode?.symbols) {\n    const out = legend.encode.symbols.update;\n    if (out.fill && out.fill['value'] !== 'transparent' && !out.stroke && !legend.stroke) {\n      // For non color channel's legend, we need to override symbol stroke config from Vega config if stroke channel is not used.\n      out.stroke = {value: 'transparent'};\n    }\n\n    // Remove properties that the legend is encoding.\n    for (const property of LEGEND_SCALE_CHANNELS) {\n      if (legend[property]) {\n        delete out[property];\n      }\n    }\n  }\n\n  if (!legend.title) {\n    // title schema doesn't include null, ''\n    delete legend.title;\n  }\n\n  if (labelExpr !== undefined) {\n    let expr = labelExpr;\n    if (legend.encode?.labels?.update && isSignalRef(legend.encode.labels.update.text)) {\n      expr = replaceAll(labelExpr, 'datum.label', legend.encode.labels.update.text.signal);\n    }\n    setLegendEncode(legend, 'labels', 'text', {signal: expr});\n  }\n\n  for (const prop in legend) {\n    const propValue = legend[prop];\n    if (isSignalRef(propValue)) {\n      const propIndex = SIGNAL_LEGEND_PROP_INDEX[prop];\n      if (propIndex) {\n        const {vgProp, part} = propIndex;\n        setLegendEncode(legend, part, vgProp, propValue);\n        delete legend[prop];\n      }\n    }\n  }\n\n  return legend;\n}\n"},"lineCount":null}},"error":null,"hash":"38ef28b9bb32187e0553c2ed244e8cb6","cacheData":{"env":{}}}