{"id":"hwFy","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591970318768},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"./Facet","loc":{"line":1,"column":18},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/PreFacet.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Facet.js"},{"name":"vega-dataflow","loc":{"line":2,"column":30},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/PreFacet.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":3,"column":46},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/PreFacet.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=s;var e=r(require(\"./Facet\")),t=require(\"vega-dataflow\"),i=require(\"vega-util\");function r(e){return e&&e.__esModule?e:{default:e}}function s(t){e.default.call(this,t)}const o=(0,i.inherits)(s,e.default);o.transform=function(e,r){const s=e.subflow,o=e.field,d=e=>this.subflow((0,t.tupleid)(e),s,r,e);return(e.modified(\"field\")||o&&r.modified((0,i.accessorFields)(o)))&&(0,i.error)(\"PreFacet does not support field modification.\"),this.initTargets(),o?(r.visit(r.MOD,e=>{const t=d(e);o(e).forEach(e=>t.mod(e))}),r.visit(r.ADD,e=>{const i=d(e);o(e).forEach(e=>i.add((0,t.ingest)(e)))}),r.visit(r.REM,e=>{const t=d(e);o(e).forEach(e=>t.rem(e))})):(r.visit(r.MOD,e=>d(e).mod(e)),r.visit(r.ADD,e=>d(e).add(e)),r.visit(r.REM,e=>d(e).rem(e))),r.clean()&&r.runAfter(()=>this.clean()),r};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":2,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":2,"column":0},"generated":{"line":1,"column":116}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":2,"column":0},"generated":{"line":1,"column":124}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":3,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":3,"column":0},"generated":{"line":1,"column":143}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":3,"column":0},"generated":{"line":1,"column":151}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":164}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":175}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":178}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":185}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":190}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":201}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":203}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":204}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":0},"generated":{"line":1,"column":212}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":14,"column":15},"generated":{"line":1,"column":215}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"PreFacet","original":{"line":14,"column":24},"generated":{"line":1,"column":224}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"params","original":{"line":14,"column":33},"generated":{"line":1,"column":226}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"call","original":{"line":15,"column":8},"generated":{"line":1,"column":229}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"call","original":{"line":15,"column":8},"generated":{"line":1,"column":231}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"call","original":{"line":15,"column":8},"generated":{"line":1,"column":239}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":15,"column":13},"generated":{"line":1,"column":244}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"params","original":{"line":15,"column":19},"generated":{"line":1,"column":249}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":18,"column":0},"generated":{"line":1,"column":252}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"prototype","original":{"line":18,"column":6},"generated":{"line":1,"column":258}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":18,"column":18},"generated":{"line":1,"column":261}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"PreFacet","original":{"line":18,"column":27},"generated":{"line":1,"column":263}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"PreFacet","original":{"line":18,"column":27},"generated":{"line":1,"column":265}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"PreFacet","original":{"line":18,"column":27},"generated":{"line":1,"column":275}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"Facet","original":{"line":18,"column":37},"generated":{"line":1,"column":277}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":18,"column":18},"generated":{"line":1,"column":279}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"prototype","original":{"line":20,"column":0},"generated":{"line":1,"column":288}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"transform","original":{"line":20,"column":10},"generated":{"line":1,"column":290}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":20,"column":22},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":20,"column":31},"generated":{"line":1,"column":309}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":20,"column":34},"generated":{"line":1,"column":311}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"flow","original":{"line":21,"column":8},"generated":{"line":1,"column":314}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"flow","original":{"line":21,"column":8},"generated":{"line":1,"column":320}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":21,"column":15},"generated":{"line":1,"column":322}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":21,"column":17},"generated":{"line":1,"column":324}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":22,"column":8},"generated":{"line":1,"column":332}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":22,"column":16},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":22,"column":18},"generated":{"line":1,"column":336}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":23,"column":8},"generated":{"line":1,"column":342}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":23,"column":18},"generated":{"line":1,"column":344}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":23,"column":23},"generated":{"line":1,"column":347}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":23,"column":28},"generated":{"line":1,"column":352}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":23,"column":36},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":23,"column":44},"generated":{"line":1,"column":363}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":23,"column":44},"generated":{"line":1,"column":365}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":23,"column":44},"generated":{"line":1,"column":374}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"flow","original":{"line":23,"column":48},"generated":{"line":1,"column":377}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":23,"column":54},"generated":{"line":1,"column":379}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":23,"column":61},"generated":{"line":1,"column":381}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":56,"column":9},"generated":{"line":1,"column":384}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":25,"column":6},"generated":{"line":1,"column":391}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"modified","original":{"line":25,"column":8},"generated":{"line":1,"column":393}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":25,"column":17},"generated":{"line":1,"column":402}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":25,"column":29},"generated":{"line":1,"column":412}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":25,"column":38},"generated":{"line":1,"column":415}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"modified","original":{"line":25,"column":44},"generated":{"line":1,"column":417}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":25,"column":53},"generated":{"line":1,"column":427}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":25,"column":68},"generated":{"line":1,"column":429}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":25,"column":68},"generated":{"line":1,"column":431}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":25,"column":68},"generated":{"line":1,"column":447}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":26,"column":10},"generated":{"line":1,"column":454}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":26,"column":10},"generated":{"line":1,"column":456}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":26,"column":10},"generated":{"line":1,"column":458}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":26,"column":10},"generated":{"line":1,"column":465}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"initTargets","original":{"line":29,"column":7},"generated":{"line":1,"column":514}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"initTargets","original":{"line":29,"column":7},"generated":{"line":1,"column":519}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":31,"column":6},"generated":{"line":1,"column":533}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":32,"column":4},"generated":{"line":1,"column":536}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":32,"column":10},"generated":{"line":1,"column":538}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":32,"column":16},"generated":{"line":1,"column":544}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"MOD","original":{"line":32,"column":22},"generated":{"line":1,"column":546}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":32,"column":27},"generated":{"line":1,"column":550}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":33,"column":12},"generated":{"line":1,"column":554}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":33,"column":12},"generated":{"line":1,"column":560}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":33,"column":17},"generated":{"line":1,"column":562}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":33,"column":25},"generated":{"line":1,"column":564}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":34,"column":6},"generated":{"line":1,"column":567}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":34,"column":12},"generated":{"line":1,"column":569}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"forEach","original":{"line":34,"column":15},"generated":{"line":1,"column":572}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":34,"column":23},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":34,"column":28},"generated":{"line":1,"column":583}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"mod","original":{"line":34,"column":31},"generated":{"line":1,"column":585}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":34,"column":35},"generated":{"line":1,"column":589}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":37,"column":4},"generated":{"line":1,"column":595}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":37,"column":10},"generated":{"line":1,"column":597}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":37,"column":16},"generated":{"line":1,"column":603}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"ADD","original":{"line":37,"column":22},"generated":{"line":1,"column":605}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":37,"column":27},"generated":{"line":1,"column":609}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":38,"column":12},"generated":{"line":1,"column":613}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":38,"column":12},"generated":{"line":1,"column":619}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":38,"column":17},"generated":{"line":1,"column":621}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":38,"column":25},"generated":{"line":1,"column":623}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":39,"column":6},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":39,"column":12},"generated":{"line":1,"column":628}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"forEach","original":{"line":39,"column":15},"generated":{"line":1,"column":631}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":39,"column":23},"generated":{"line":1,"column":639}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":39,"column":28},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"add","original":{"line":39,"column":31},"generated":{"line":1,"column":644}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":39,"column":35},"generated":{"line":1,"column":649}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":39,"column":42},"generated":{"line":1,"column":651}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":39,"column":42},"generated":{"line":1,"column":653}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":39,"column":42},"generated":{"line":1,"column":661}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":42,"column":4},"generated":{"line":1,"column":668}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":42,"column":10},"generated":{"line":1,"column":670}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":42,"column":16},"generated":{"line":1,"column":676}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"REM","original":{"line":42,"column":22},"generated":{"line":1,"column":678}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":42,"column":27},"generated":{"line":1,"column":682}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":43,"column":12},"generated":{"line":1,"column":686}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":43,"column":12},"generated":{"line":1,"column":692}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":43,"column":17},"generated":{"line":1,"column":694}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":43,"column":25},"generated":{"line":1,"column":696}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"field","original":{"line":44,"column":6},"generated":{"line":1,"column":699}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":44,"column":12},"generated":{"line":1,"column":701}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"forEach","original":{"line":44,"column":15},"generated":{"line":1,"column":704}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":44,"column":23},"generated":{"line":1,"column":712}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"sf","original":{"line":44,"column":28},"generated":{"line":1,"column":715}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"rem","original":{"line":44,"column":31},"generated":{"line":1,"column":717}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"_","original":{"line":44,"column":35},"generated":{"line":1,"column":721}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":47,"column":4},"generated":{"line":1,"column":729}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":47,"column":10},"generated":{"line":1,"column":731}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":47,"column":16},"generated":{"line":1,"column":737}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"MOD","original":{"line":47,"column":22},"generated":{"line":1,"column":739}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":47,"column":27},"generated":{"line":1,"column":743}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":47,"column":32},"generated":{"line":1,"column":746}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":47,"column":40},"generated":{"line":1,"column":748}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"mod","original":{"line":47,"column":43},"generated":{"line":1,"column":751}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":47,"column":47},"generated":{"line":1,"column":755}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":48,"column":4},"generated":{"line":1,"column":759}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":48,"column":10},"generated":{"line":1,"column":761}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":48,"column":16},"generated":{"line":1,"column":767}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"ADD","original":{"line":48,"column":22},"generated":{"line":1,"column":769}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":48,"column":27},"generated":{"line":1,"column":773}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":48,"column":32},"generated":{"line":1,"column":776}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":48,"column":40},"generated":{"line":1,"column":778}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"add","original":{"line":48,"column":43},"generated":{"line":1,"column":781}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":48,"column":47},"generated":{"line":1,"column":785}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":49,"column":4},"generated":{"line":1,"column":789}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"visit","original":{"line":49,"column":10},"generated":{"line":1,"column":791}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":49,"column":16},"generated":{"line":1,"column":797}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"REM","original":{"line":49,"column":22},"generated":{"line":1,"column":799}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":49,"column":27},"generated":{"line":1,"column":803}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"subflow","original":{"line":49,"column":32},"generated":{"line":1,"column":806}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":49,"column":40},"generated":{"line":1,"column":808}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"rem","original":{"line":49,"column":43},"generated":{"line":1,"column":811}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"t","original":{"line":49,"column":47},"generated":{"line":1,"column":815}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":52,"column":6},"generated":{"line":1,"column":820}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"clean","original":{"line":52,"column":12},"generated":{"line":1,"column":822}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":53,"column":4},"generated":{"line":1,"column":831}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"runAfter","original":{"line":53,"column":10},"generated":{"line":1,"column":833}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":53,"column":19},"generated":{"line":1,"column":842}},{"source":"node_modules/vega-transforms/src/PreFacet.js","original":{"line":53,"column":25},"generated":{"line":1,"column":846}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"clean","original":{"line":53,"column":30},"generated":{"line":1,"column":851}},{"source":"node_modules/vega-transforms/src/PreFacet.js","name":"pulse","original":{"line":56,"column":9},"generated":{"line":1,"column":860}}],"sources":{"node_modules/vega-transforms/src/PreFacet.js":"import Facet from './Facet';\nimport {ingest, tupleid} from 'vega-dataflow';\nimport {accessorFields, error, inherits} from 'vega-util';\n\n/**\n * Partitions pre-faceted data into tuple subflows.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(Dataflow, string): Operator} params.subflow - A function\n *   that generates a subflow of operators and returns its root operator.\n * @param {function(object): Array<object>} params.field - The field\n *   accessor for an array of subflow tuple objects.\n */\nexport default function PreFacet(params) {\n  Facet.call(this, params);\n}\n\nconst prototype = inherits(PreFacet, Facet);\n\nprototype.transform = function(_, pulse) {\n  const flow = _.subflow,\n        field = _.field,\n        subflow = t => this.subflow(tupleid(t), flow, pulse, t);\n\n  if (_.modified('field') || field && pulse.modified(accessorFields(field))) {\n    error('PreFacet does not support field modification.');\n  }\n\n  this.initTargets(); // reset list of active subflows\n\n  if (field) {\n    pulse.visit(pulse.MOD, t => {\n      const sf = subflow(t);\n      field(t).forEach(_ => sf.mod(_));\n    });\n\n    pulse.visit(pulse.ADD, t => {\n      const sf = subflow(t);\n      field(t).forEach(_ => sf.add(ingest(_)));\n    });\n\n    pulse.visit(pulse.REM, t => {\n      const sf = subflow(t);\n      field(t).forEach(_ => sf.rem(_));\n    });\n  } else {\n    pulse.visit(pulse.MOD, t => subflow(t).mod(t));\n    pulse.visit(pulse.ADD, t => subflow(t).add(t));\n    pulse.visit(pulse.REM, t => subflow(t).rem(t));\n  }\n\n  if (pulse.clean()) {\n    pulse.runAfter(() => this.clean());\n  }\n\n  return pulse;\n};\n"},"lineCount":null}},"error":null,"hash":"9c169e8ffb4a0d786971ea0c14be448f","cacheData":{"env":{}}}