{"id":"BLux","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591977532257},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/package.json","includedInParent":true,"mtime":1591969205163},{"name":"./lookup","loc":{"line":1,"column":19},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/src/Nest.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/src/lookup.js"},{"name":"vega-dataflow","loc":{"line":2,"column":50},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/src/Nest.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":3,"column":37},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/src/Nest.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"},{"name":"d3-hierarchy","loc":{"line":4,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-hierarchy/src/Nest.js","resolved":"/home/toltm/data-viz/temperature/node_modules/d3-hierarchy/src/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=n;var e=u(require(\"./lookup\")),r=require(\"vega-dataflow\"),t=require(\"vega-util\"),a=require(\"d3-hierarchy\");function u(e){return e&&e.__esModule?e:{default:e}}function n(e){r.Transform.call(this,null,e)}n.Definition={type:\"Nest\",metadata:{treesource:!0,changes:!0},params:[{name:\"keys\",type:\"field\",array:!0},{name:\"generate\",type:\"boolean\"}]};var s=(0,t.inherits)(n,r.Transform);function i(e){return e.values}function o(){var e,r=[];return e={entries:e=>(function e(t,a){if(++a>r.length)return t;var u,n=[];for(u in t)n.push({key:u,values:e(t[u],a)});return n})(function e(t,a){if(a>=r.length)return t;for(var u,n,s,i=-1,o=t.length,l=r[a++],c={},d={};++i<o;)(s=c[u=l(n=t[i])+\"\"])?s.push(n):c[u]=[n];for(u in c)d[u]=e(c[u],a);return d}(e,0),0),key:t=>(r.push(t),e)}}s.transform=function(u,n){n.source||(0,t.error)(\"Nest transform requires an upstream data source.\");var s=u.generate,l=u.modified(),c=n.clone(),d=this.value;return(!d||l||n.changed())&&(d&&d.each(e=>{e.children&&(0,r.isTuple)(e.data)&&c.rem.push(e.data)}),this.value=d=(0,a.hierarchy)({values:(0,t.array)(u.keys).reduce((e,r)=>(e.key(r),e),o()).entries(c.source)},i),s&&d.each(e=>{e.children&&(e=(0,r.ingest)(e.data),c.add.push(e),c.source.push(e))}),(0,e.default)(d,r.tupleid,r.tupleid)),c.source.root=d,c};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":3,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":3,"column":0},"generated":{"line":1,"column":144}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":3,"column":0},"generated":{"line":1,"column":152}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":4,"column":0},"generated":{"line":1,"column":165}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":4,"column":0},"generated":{"line":1,"column":167}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":4,"column":0},"generated":{"line":1,"column":175}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":191}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":200}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":202}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":205}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":212}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":215}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":217}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":228}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":230}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":231}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":128,"column":1},"generated":{"line":1,"column":239}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":16,"column":15},"generated":{"line":1,"column":242}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Nest","original":{"line":16,"column":24},"generated":{"line":1,"column":251}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"params","original":{"line":16,"column":29},"generated":{"line":1,"column":253}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"call","original":{"line":17,"column":12},"generated":{"line":1,"column":256}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"call","original":{"line":17,"column":12},"generated":{"line":1,"column":258}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"call","original":{"line":17,"column":12},"generated":{"line":1,"column":268}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":17,"column":17},"generated":{"line":1,"column":273}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":17,"column":23},"generated":{"line":1,"column":278}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"params","original":{"line":17,"column":29},"generated":{"line":1,"column":283}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Nest","original":{"line":20,"column":0},"generated":{"line":1,"column":286}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Definition","original":{"line":20,"column":5},"generated":{"line":1,"column":288}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":20,"column":18},"generated":{"line":1,"column":299}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":21,"column":10},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":21,"column":10},"generated":{"line":1,"column":305}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":14},"generated":{"line":1,"column":312}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":14},"generated":{"line":1,"column":321}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":29},"generated":{"line":1,"column":322}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":29},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":46},"generated":{"line":1,"column":336}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":22,"column":46},"generated":{"line":1,"column":345}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":23,"column":12},"generated":{"line":1,"column":348}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":23,"column":12},"generated":{"line":1,"column":355}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":4},"generated":{"line":1,"column":356}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":14},"generated":{"line":1,"column":357}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":14},"generated":{"line":1,"column":362}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":30},"generated":{"line":1,"column":369}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":30},"generated":{"line":1,"column":374}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":48},"generated":{"line":1,"column":382}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":24,"column":48},"generated":{"line":1,"column":389}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":25,"column":4},"generated":{"line":1,"column":392}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":25,"column":14},"generated":{"line":1,"column":393}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":25,"column":14},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":25,"column":34},"generated":{"line":1,"column":409}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":25,"column":34},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":29,"column":0},"generated":{"line":1,"column":427}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"prototype","original":{"line":29,"column":4},"generated":{"line":1,"column":431}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":29,"column":16},"generated":{"line":1,"column":434}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Nest","original":{"line":29,"column":25},"generated":{"line":1,"column":436}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Nest","original":{"line":29,"column":25},"generated":{"line":1,"column":438}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Nest","original":{"line":29,"column":25},"generated":{"line":1,"column":448}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"Transform","original":{"line":29,"column":31},"generated":{"line":1,"column":450}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":29,"column":16},"generated":{"line":1,"column":452}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":31,"column":0},"generated":{"line":1,"column":463}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"children","original":{"line":31,"column":9},"generated":{"line":1,"column":472}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":31,"column":18},"generated":{"line":1,"column":474}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":32,"column":9},"generated":{"line":1,"column":477}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":32,"column":9},"generated":{"line":1,"column":484}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":32,"column":11},"generated":{"line":1,"column":486}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":81,"column":0},"generated":{"line":1,"column":493}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":81,"column":9},"generated":{"line":1,"column":502}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":82,"column":6},"generated":{"line":1,"column":506}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":83,"column":6},"generated":{"line":1,"column":510}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":82,"column":6},"generated":{"line":1,"column":512}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":82,"column":13},"generated":{"line":1,"column":514}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":124,"column":9},"generated":{"line":1,"column":517}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":124,"column":9},"generated":{"line":1,"column":524}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":124,"column":16},"generated":{"line":1,"column":526}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":125,"column":4},"generated":{"line":1,"column":527}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":125,"column":13},"generated":{"line":1,"column":535}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":115,"column":11},"generated":{"line":1,"column":539}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":115,"column":11},"generated":{"line":1,"column":548}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"map","original":{"line":115,"column":19},"generated":{"line":1,"column":550}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":115,"column":24},"generated":{"line":1,"column":552}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":116,"column":8},"generated":{"line":1,"column":555}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":116,"column":10},"generated":{"line":1,"column":560}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":116,"column":18},"generated":{"line":1,"column":562}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"length","original":{"line":116,"column":23},"generated":{"line":1,"column":564}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":116,"column":31},"generated":{"line":1,"column":571}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"map","original":{"line":116,"column":38},"generated":{"line":1,"column":578}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":117,"column":8},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":117,"column":20},"generated":{"line":1,"column":584}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":117,"column":8},"generated":{"line":1,"column":586}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":117,"column":16},"generated":{"line":1,"column":588}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":118,"column":9},"generated":{"line":1,"column":591}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":118,"column":9},"generated":{"line":1,"column":595}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"map","original":{"line":118,"column":14},"generated":{"line":1,"column":600}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":119,"column":6},"generated":{"line":1,"column":602}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":119,"column":12},"generated":{"line":1,"column":604}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":119,"column":17},"generated":{"line":1,"column":609}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"key","original":{"line":119,"column":18},"generated":{"line":1,"column":610}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":119,"column":23},"generated":{"line":1,"column":614}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":119,"column":26},"generated":{"line":1,"column":616}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":119,"column":34},"generated":{"line":1,"column":623}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"map","original":{"line":119,"column":42},"generated":{"line":1,"column":625}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":119,"column":46},"generated":{"line":1,"column":627}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":119,"column":50},"generated":{"line":1,"column":630}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":121,"column":11},"generated":{"line":1,"column":635}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":121,"column":11},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":125,"column":22},"generated":{"line":1,"column":645}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"apply","original":{"line":85,"column":11},"generated":{"line":1,"column":646}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"apply","original":{"line":85,"column":11},"generated":{"line":1,"column":655}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":85,"column":17},"generated":{"line":1,"column":657}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":85,"column":24},"generated":{"line":1,"column":659}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":86,"column":8},"generated":{"line":1,"column":662}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":86,"column":8},"generated":{"line":1,"column":665}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":86,"column":17},"generated":{"line":1,"column":668}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"length","original":{"line":86,"column":22},"generated":{"line":1,"column":670}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":87,"column":13},"generated":{"line":1,"column":677}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":87,"column":13},"generated":{"line":1,"column":684}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":99,"column":11},"generated":{"line":1,"column":686}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"i","original":{"line":90,"column":8},"generated":{"line":1,"column":690}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":93,"column":8},"generated":{"line":1,"column":694}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":94,"column":8},"generated":{"line":1,"column":696}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":96,"column":8},"generated":{"line":1,"column":698}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"i","original":{"line":90,"column":8},"generated":{"line":1,"column":700}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":90,"column":13},"generated":{"line":1,"column":703}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":91,"column":8},"generated":{"line":1,"column":705}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":91,"column":12},"generated":{"line":1,"column":707}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"length","original":{"line":91,"column":18},"generated":{"line":1,"column":709}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"key","original":{"line":92,"column":8},"generated":{"line":1,"column":716}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":92,"column":14},"generated":{"line":1,"column":718}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":92,"column":19},"generated":{"line":1,"column":720}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"valuesByKey","original":{"line":95,"column":8},"generated":{"line":1,"column":725}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":95,"column":22},"generated":{"line":1,"column":727}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"result","original":{"line":97,"column":8},"generated":{"line":1,"column":730}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":97,"column":17},"generated":{"line":1,"column":732}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"i","original":{"line":99,"column":13},"generated":{"line":1,"column":737}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":99,"column":17},"generated":{"line":1,"column":739}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":101,"column":10},"generated":{"line":1,"column":743}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"valuesByKey","original":{"line":101,"column":19},"generated":{"line":1,"column":745}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":100,"column":6},"generated":{"line":1,"column":747}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"key","original":{"line":100,"column":17},"generated":{"line":1,"column":749}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":100,"column":21},"generated":{"line":1,"column":751}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":100,"column":29},"generated":{"line":1,"column":753}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"i","original":{"line":100,"column":35},"generated":{"line":1,"column":755}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":100,"column":41},"generated":{"line":1,"column":759}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":102,"column":8},"generated":{"line":1,"column":764}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":102,"column":15},"generated":{"line":1,"column":766}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":102,"column":20},"generated":{"line":1,"column":771}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"valuesByKey","original":{"line":104,"column":8},"generated":{"line":1,"column":774}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":104,"column":20},"generated":{"line":1,"column":776}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":104,"column":32},"generated":{"line":1,"column":779}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":104,"column":33},"generated":{"line":1,"column":780}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":108,"column":9},"generated":{"line":1,"column":783}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":108,"column":9},"generated":{"line":1,"column":787}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"valuesByKey","original":{"line":108,"column":21},"generated":{"line":1,"column":792}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"result","original":{"line":109,"column":6},"generated":{"line":1,"column":794}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":109,"column":13},"generated":{"line":1,"column":796}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"apply","original":{"line":109,"column":25},"generated":{"line":1,"column":799}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"valuesByKey","original":{"line":109,"column":31},"generated":{"line":1,"column":801}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keyValue","original":{"line":109,"column":43},"generated":{"line":1,"column":803}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"depth","original":{"line":109,"column":54},"generated":{"line":1,"column":806}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"result","original":{"line":112,"column":11},"generated":{"line":1,"column":809}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"result","original":{"line":112,"column":11},"generated":{"line":1,"column":816}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"apply","original":{"line":125,"column":30},"generated":{"line":1,"column":818}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"array","original":{"line":125,"column":36},"generated":{"line":1,"column":819}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":125,"column":43},"generated":{"line":1,"column":821}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":125,"column":47},"generated":{"line":1,"column":824}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"key","original":{"line":126,"column":4},"generated":{"line":1,"column":827}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"d","original":{"line":126,"column":9},"generated":{"line":1,"column":831}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":126,"column":16},"generated":{"line":1,"column":835}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":126,"column":21},"generated":{"line":1,"column":837}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"d","original":{"line":126,"column":26},"generated":{"line":1,"column":842}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":126,"column":37},"generated":{"line":1,"column":845}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"prototype","original":{"line":35,"column":0},"generated":{"line":1,"column":849}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"transform","original":{"line":35,"column":10},"generated":{"line":1,"column":851}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":35,"column":22},"generated":{"line":1,"column":861}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":35,"column":31},"generated":{"line":1,"column":870}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"pulse","original":{"line":35,"column":34},"generated":{"line":1,"column":872}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"pulse","original":{"line":36,"column":7},"generated":{"line":1,"column":875}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"source","original":{"line":36,"column":13},"generated":{"line":1,"column":877}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":37,"column":10},"generated":{"line":1,"column":886}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":37,"column":10},"generated":{"line":1,"column":888}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":37,"column":10},"generated":{"line":1,"column":890}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":37,"column":10},"generated":{"line":1,"column":897}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"gen","original":{"line":40,"column":6},"generated":{"line":1,"column":949}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"gen","original":{"line":40,"column":6},"generated":{"line":1,"column":953}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":40,"column":12},"generated":{"line":1,"column":955}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"generate","original":{"line":40,"column":14},"generated":{"line":1,"column":957}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"mod","original":{"line":41,"column":6},"generated":{"line":1,"column":966}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":41,"column":12},"generated":{"line":1,"column":968}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"modified","original":{"line":41,"column":14},"generated":{"line":1,"column":970}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":42,"column":6},"generated":{"line":1,"column":981}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"pulse","original":{"line":42,"column":12},"generated":{"line":1,"column":983}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"clone","original":{"line":42,"column":18},"generated":{"line":1,"column":985}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":43,"column":6},"generated":{"line":1,"column":993}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":43,"column":13},"generated":{"line":1,"column":995}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":43,"column":18},"generated":{"line":1,"column":1000}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":78,"column":9},"generated":{"line":1,"column":1006}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":45,"column":7},"generated":{"line":1,"column":1014}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"mod","original":{"line":45,"column":15},"generated":{"line":1,"column":1017}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"pulse","original":{"line":45,"column":22},"generated":{"line":1,"column":1020}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"changed","original":{"line":45,"column":28},"generated":{"line":1,"column":1022}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":47,"column":8},"generated":{"line":1,"column":1035}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":48,"column":6},"generated":{"line":1,"column":1038}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"each","original":{"line":48,"column":11},"generated":{"line":1,"column":1040}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":48,"column":16},"generated":{"line":1,"column":1045}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":49,"column":12},"generated":{"line":1,"column":1049}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"children","original":{"line":49,"column":17},"generated":{"line":1,"column":1051}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":49,"column":29},"generated":{"line":1,"column":1062}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":49,"column":37},"generated":{"line":1,"column":1064}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":49,"column":37},"generated":{"line":1,"column":1066}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":49,"column":37},"generated":{"line":1,"column":1075}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"data","original":{"line":49,"column":42},"generated":{"line":1,"column":1077}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":50,"column":10},"generated":{"line":1,"column":1084}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"rem","original":{"line":50,"column":14},"generated":{"line":1,"column":1086}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":50,"column":18},"generated":{"line":1,"column":1090}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":50,"column":23},"generated":{"line":1,"column":1095}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"data","original":{"line":50,"column":28},"generated":{"line":1,"column":1097}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":56,"column":9},"generated":{"line":1,"column":1105}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"value","original":{"line":56,"column":9},"generated":{"line":1,"column":1110}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":56,"column":17},"generated":{"line":1,"column":1116}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":56,"column":24},"generated":{"line":1,"column":1119}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":56,"column":34},"generated":{"line":1,"column":1121}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":56,"column":34},"generated":{"line":1,"column":1123}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":56,"column":34},"generated":{"line":1,"column":1134}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"values","original":{"line":57,"column":6},"generated":{"line":1,"column":1135}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":57,"column":14},"generated":{"line":1,"column":1143}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":57,"column":20},"generated":{"line":1,"column":1145}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":57,"column":20},"generated":{"line":1,"column":1147}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"_","original":{"line":57,"column":20},"generated":{"line":1,"column":1154}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"keys","original":{"line":57,"column":22},"generated":{"line":1,"column":1156}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"reduce","original":{"line":58,"column":9},"generated":{"line":1,"column":1162}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":58,"column":16},"generated":{"line":1,"column":1169}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":58,"column":17},"generated":{"line":1,"column":1170}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":58,"column":20},"generated":{"line":1,"column":1172}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":58,"column":28},"generated":{"line":1,"column":1177}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"key","original":{"line":58,"column":30},"generated":{"line":1,"column":1179}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"k","original":{"line":58,"column":34},"generated":{"line":1,"column":1183}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"n","original":{"line":58,"column":45},"generated":{"line":1,"column":1186}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"nest","original":{"line":58,"column":51},"generated":{"line":1,"column":1189}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"entries","original":{"line":59,"column":9},"generated":{"line":1,"column":1194}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":59,"column":17},"generated":{"line":1,"column":1202}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"source","original":{"line":59,"column":21},"generated":{"line":1,"column":1204}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"children","original":{"line":60,"column":7},"generated":{"line":1,"column":1213}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"gen","original":{"line":63,"column":8},"generated":{"line":1,"column":1216}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":64,"column":6},"generated":{"line":1,"column":1219}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"each","original":{"line":64,"column":11},"generated":{"line":1,"column":1221}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":64,"column":16},"generated":{"line":1,"column":1226}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":65,"column":12},"generated":{"line":1,"column":1230}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"children","original":{"line":65,"column":17},"generated":{"line":1,"column":1232}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":66,"column":10},"generated":{"line":1,"column":1243}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":66,"column":17},"generated":{"line":1,"column":1246}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":66,"column":24},"generated":{"line":1,"column":1248}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":66,"column":24},"generated":{"line":1,"column":1250}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":66,"column":24},"generated":{"line":1,"column":1258}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"data","original":{"line":66,"column":29},"generated":{"line":1,"column":1260}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":67,"column":10},"generated":{"line":1,"column":1266}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"add","original":{"line":67,"column":14},"generated":{"line":1,"column":1268}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":67,"column":18},"generated":{"line":1,"column":1272}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":67,"column":23},"generated":{"line":1,"column":1277}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":68,"column":10},"generated":{"line":1,"column":1280}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"source","original":{"line":68,"column":14},"generated":{"line":1,"column":1282}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"push","original":{"line":68,"column":21},"generated":{"line":1,"column":1289}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"node","original":{"line":68,"column":26},"generated":{"line":1,"column":1294}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":74,"column":11},"generated":{"line":1,"column":1301}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":74,"column":11},"generated":{"line":1,"column":1303}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":74,"column":11},"generated":{"line":1,"column":1305}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":74,"column":11},"generated":{"line":1,"column":1314}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tupleid","original":{"line":74,"column":17},"generated":{"line":1,"column":1316}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":74,"column":4},"generated":{"line":1,"column":1318}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tupleid","original":{"line":74,"column":26},"generated":{"line":1,"column":1326}},{"source":"node_modules/vega-hierarchy/src/Nest.js","original":{"line":74,"column":4},"generated":{"line":1,"column":1328}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":77,"column":2},"generated":{"line":1,"column":1338}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"source","original":{"line":77,"column":6},"generated":{"line":1,"column":1340}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"root","original":{"line":77,"column":13},"generated":{"line":1,"column":1347}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"tree","original":{"line":77,"column":20},"generated":{"line":1,"column":1352}},{"source":"node_modules/vega-hierarchy/src/Nest.js","name":"out","original":{"line":78,"column":9},"generated":{"line":1,"column":1354}}],"sources":{"node_modules/vega-hierarchy/src/Nest.js":"import lookup from './lookup';\nimport {Transform, ingest, isTuple, tupleid} from 'vega-dataflow';\nimport {array, error, inherits} from 'vega-util';\nimport {hierarchy} from 'd3-hierarchy';\n\n /**\n  * Nest tuples into a tree structure, grouped by key values.\n  * @constructor\n  * @param {object} params - The parameters for this operator.\n  * @param {Array<function(object): *>} params.keys - The key fields to nest by, in order.\n  * @param {boolean} [params.generate=false] - A boolean flag indicating if\n  *   non-leaf nodes generated by this transform should be included in the\n  *   output. The default (false) includes only the input data (leaf nodes)\n  *   in the data stream.\n  */\nexport default function Nest(params) {\n  Transform.call(this, null, params);\n}\n\nNest.Definition = {\n  'type': 'Nest',\n  'metadata': {'treesource': true, 'changes': true},\n  'params': [\n    { 'name': 'keys', 'type': 'field', 'array': true },\n    { 'name': 'generate', 'type': 'boolean' }\n  ]\n};\n\nvar prototype = inherits(Nest, Transform);\n\nfunction children(n) {\n  return n.values;\n}\n\nprototype.transform = function(_, pulse) {\n  if (!pulse.source) {\n    error('Nest transform requires an upstream data source.');\n  }\n\n  var gen = _.generate,\n      mod = _.modified(),\n      out = pulse.clone(),\n      tree = this.value;\n\n  if (!tree || mod || pulse.changed()) {\n    // collect nodes to remove\n    if (tree) {\n      tree.each(node => {\n        if (node.children && isTuple(node.data)) {\n          out.rem.push(node.data);\n        }\n      });\n    }\n\n    // generate new tree structure\n    this.value = tree = hierarchy({\n      values: array(_.keys)\n        .reduce((n, k) => { n.key(k); return n; }, nest())\n        .entries(out.source)\n    }, children);\n\n    // collect nodes to add\n    if (gen) {\n      tree.each(node => {\n        if (node.children) {\n          node = ingest(node.data);\n          out.add.push(node);\n          out.source.push(node);\n        }\n      });\n    }\n\n    // build lookup table\n    lookup(tree, tupleid, tupleid);\n  }\n\n  out.source.root = tree;\n  return out;\n};\n\nfunction nest() {\n  var keys = [],\n      nest;\n\n  function apply(array, depth) {\n    if (depth >= keys.length) {\n      return array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = {},\n        values,\n        result = {};\n\n    while (++i < n) {\n      keyValue = key(value = array[i]) + '';\n      if (values = valuesByKey[keyValue]) {\n        values.push(value);\n      } else {\n        valuesByKey[keyValue] = [value];\n      }\n    }\n\n    for (keyValue in valuesByKey) {\n      result[keyValue] = apply(valuesByKey[keyValue], depth);\n    }\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array = [], k;\n    for (k in map) {\n      array.push({key: k, values: entries(map[k], depth)});\n    }\n    return array;\n  }\n\n  return nest = {\n    entries: array => entries(apply(array, 0), 0),\n    key: d => { keys.push(d); return nest; }\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"7e196ae70efd306cd9af3f4152dbfa71","cacheData":{"env":{}}}