{"id":"OjFY","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591970318768},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-parser/package.json","includedInParent":true,"mtime":1591969205174},{"name":"./stream","loc":{"line":1,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/update.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/stream.js"},{"name":"../util","loc":{"line":2,"column":26},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/update.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/util.js"},{"name":"vega-event-selector","loc":{"line":3,"column":23},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/update.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-event-selector/index.js"},{"name":"vega-functions","loc":{"line":4,"column":30},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/update.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-functions/index.js"},{"name":"vega-util","loc":{"line":5,"column":58},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/update.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=t;var e=s(require(\"./stream\")),a=require(\"../util\"),r=require(\"vega-event-selector\"),n=require(\"vega-functions\"),l=require(\"vega-util\");function s(e){return e&&e.__esModule?e:{default:e}}const i={code:\"_.$value\",ast:{type:\"Identifier\",value:\"value\"}};function t(e,s,t){var o=e.events,p=e.update,g=e.encode,d=[],f={target:t};o||(0,l.error)(\"Signal update missing events specification.\"),(0,l.isString)(o)&&(o=(0,r.selector)(o,s.isSubscope()?a.Scope:a.View)),o=(0,l.array)(o).filter(e=>e.signal||e.scale?(d.push(e),0):1),d.length>1&&(d=[c(d)]),o.length&&d.push(o.length>1?{merge:o}:o[0]),null!=g&&(p&&(0,l.error)(\"Signal encode and update are mutually exclusive.\"),p=\"encode(item(),\"+(0,l.stringValue)(g)+\")\"),f.update=(0,l.isString)(p)?(0,n.parseExpression)(p,s):null!=p.expr?(0,n.parseExpression)(p.expr,s):null!=p.value?p.value:null!=p.signal?{$expr:i,$params:{$value:s.signalRef(p.signal)}}:(0,l.error)(\"Invalid signal update specification.\"),e.force&&(f.options={force:!0}),d.forEach(function(e){s.addUpdate((0,l.extend)(u(e,s),f))})}function u(a,r){return{source:a.signal?r.signalRef(a.signal):a.scale?r.scaleRef(a.scale):(0,e.default)(a,r)}}function c(e){return{signal:\"[\"+e.map(e=>e.scale?'scale(\"'+e.scale+'\")':e.signal)+\"]\"}}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":136}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":138}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":146}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":169}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":4,"column":0},"generated":{"line":1,"column":179}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":197}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":199}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":5,"column":0},"generated":{"line":1,"column":207}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":220}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":229}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":231}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":234}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":241}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":244}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":246}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":257}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":259}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":260}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":81,"column":1},"generated":{"line":1,"column":268}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":8,"column":0},"generated":{"line":1,"column":271}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"OP_VALUE_EXPR","original":{"line":8,"column":6},"generated":{"line":1,"column":277}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":8,"column":22},"generated":{"line":1,"column":279}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"code","original":{"line":9,"column":2},"generated":{"line":1,"column":280}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":9,"column":8},"generated":{"line":1,"column":285}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"ast","original":{"line":10,"column":2},"generated":{"line":1,"column":296}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":10,"column":7},"generated":{"line":1,"column":300}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"type","original":{"line":10,"column":8},"generated":{"line":1,"column":301}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":10,"column":14},"generated":{"line":1,"column":306}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"value","original":{"line":10,"column":28},"generated":{"line":1,"column":319}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":10,"column":35},"generated":{"line":1,"column":325}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":13,"column":15},"generated":{"line":1,"column":335}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":13,"column":24},"generated":{"line":1,"column":344}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":13,"column":24},"generated":{"line":1,"column":346}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":13,"column":30},"generated":{"line":1,"column":348}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"target","original":{"line":13,"column":37},"generated":{"line":1,"column":350}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":14,"column":6},"generated":{"line":1,"column":353}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":14,"column":6},"generated":{"line":1,"column":357}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":14,"column":15},"generated":{"line":1,"column":359}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":14,"column":20},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":15,"column":6},"generated":{"line":1,"column":368}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":15,"column":15},"generated":{"line":1,"column":370}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":15,"column":20},"generated":{"line":1,"column":372}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":16,"column":6},"generated":{"line":1,"column":379}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":16,"column":15},"generated":{"line":1,"column":381}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":16,"column":20},"generated":{"line":1,"column":383}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":17,"column":6},"generated":{"line":1,"column":390}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":17,"column":16},"generated":{"line":1,"column":392}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"entry","original":{"line":18,"column":6},"generated":{"line":1,"column":395}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":18,"column":14},"generated":{"line":1,"column":397}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"target","original":{"line":18,"column":15},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"target","original":{"line":18,"column":23},"generated":{"line":1,"column":405}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":20,"column":7},"generated":{"line":1,"column":408}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":21,"column":10},"generated":{"line":1,"column":412}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":21,"column":10},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":21,"column":10},"generated":{"line":1,"column":416}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":21,"column":10},"generated":{"line":1,"column":423}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":25,"column":6},"generated":{"line":1,"column":471}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":25,"column":15},"generated":{"line":1,"column":473}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":25,"column":15},"generated":{"line":1,"column":475}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":25,"column":15},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":26,"column":4},"generated":{"line":1,"column":490}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":26,"column":13},"generated":{"line":1,"column":493}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":26,"column":22},"generated":{"line":1,"column":495}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":26,"column":22},"generated":{"line":1,"column":497}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":26,"column":22},"generated":{"line":1,"column":507}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":26,"column":30},"generated":{"line":1,"column":509}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"isSubscope","original":{"line":26,"column":36},"generated":{"line":1,"column":511}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"Scope","original":{"line":26,"column":51},"generated":{"line":1,"column":524}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":26,"column":30},"generated":{"line":1,"column":526}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"View","original":{"line":26,"column":59},"generated":{"line":1,"column":532}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":26,"column":13},"generated":{"line":1,"column":534}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":30,"column":2},"generated":{"line":1,"column":541}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":30,"column":11},"generated":{"line":1,"column":544}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":30,"column":17},"generated":{"line":1,"column":546}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":30,"column":17},"generated":{"line":1,"column":548}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":30,"column":17},"generated":{"line":1,"column":555}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"filter","original":{"line":31,"column":5},"generated":{"line":1,"column":558}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":31,"column":12},"generated":{"line":1,"column":565}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":31,"column":17},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":31,"column":19},"generated":{"line":1,"column":570}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":31,"column":29},"generated":{"line":1,"column":578}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scale","original":{"line":31,"column":31},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":31,"column":40},"generated":{"line":1,"column":587}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"push","original":{"line":31,"column":48},"generated":{"line":1,"column":589}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":31,"column":53},"generated":{"line":1,"column":594}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":31,"column":57},"generated":{"line":1,"column":597}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":31,"column":62},"generated":{"line":1,"column":600}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":34,"column":6},"generated":{"line":1,"column":603}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"length","original":{"line":34,"column":14},"generated":{"line":1,"column":605}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":34,"column":23},"generated":{"line":1,"column":612}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":35,"column":4},"generated":{"line":1,"column":616}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":35,"column":14},"generated":{"line":1,"column":618}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"mergeSources","original":{"line":35,"column":15},"generated":{"line":1,"column":619}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":35,"column":28},"generated":{"line":1,"column":621}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":39,"column":6},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"length","original":{"line":39,"column":13},"generated":{"line":1,"column":628}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":40,"column":4},"generated":{"line":1,"column":636}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"push","original":{"line":40,"column":12},"generated":{"line":1,"column":638}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":40,"column":17},"generated":{"line":1,"column":643}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"length","original":{"line":40,"column":24},"generated":{"line":1,"column":645}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":40,"column":33},"generated":{"line":1,"column":652}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":40,"column":37},"generated":{"line":1,"column":654}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"merge","original":{"line":40,"column":38},"generated":{"line":1,"column":655}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":40,"column":45},"generated":{"line":1,"column":661}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"events","original":{"line":40,"column":55},"generated":{"line":1,"column":664}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":40,"column":62},"generated":{"line":1,"column":666}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":43,"column":16},"generated":{"line":1,"column":670}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":43,"column":6},"generated":{"line":1,"column":676}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":44,"column":8},"generated":{"line":1,"column":680}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":44,"column":16},"generated":{"line":1,"column":684}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":44,"column":22},"generated":{"line":1,"column":686}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":44,"column":22},"generated":{"line":1,"column":688}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":44,"column":22},"generated":{"line":1,"column":695}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":45,"column":4},"generated":{"line":1,"column":747}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":45,"column":13},"generated":{"line":1,"column":749}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":45,"column":32},"generated":{"line":1,"column":767}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":45,"column":44},"generated":{"line":1,"column":769}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":45,"column":44},"generated":{"line":1,"column":771}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"encode","original":{"line":45,"column":44},"generated":{"line":1,"column":784}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":45,"column":54},"generated":{"line":1,"column":787}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"entry","original":{"line":49,"column":2},"generated":{"line":1,"column":792}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":8},"generated":{"line":1,"column":794}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":49,"column":17},"generated":{"line":1,"column":802}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":26},"generated":{"line":1,"column":804}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":26},"generated":{"line":1,"column":806}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":26},"generated":{"line":1,"column":816}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":49,"column":36},"generated":{"line":1,"column":820}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":52},"generated":{"line":1,"column":822}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":52},"generated":{"line":1,"column":824}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":49,"column":52},"generated":{"line":1,"column":841}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":49,"column":60},"generated":{"line":1,"column":843}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":50,"column":21},"generated":{"line":1,"column":846}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":50,"column":6},"generated":{"line":1,"column":852}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"expr","original":{"line":50,"column":13},"generated":{"line":1,"column":854}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":50,"column":28},"generated":{"line":1,"column":860}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":50,"column":44},"generated":{"line":1,"column":862}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":50,"column":44},"generated":{"line":1,"column":864}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":50,"column":44},"generated":{"line":1,"column":881}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"expr","original":{"line":50,"column":51},"generated":{"line":1,"column":883}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":50,"column":57},"generated":{"line":1,"column":888}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":51,"column":22},"generated":{"line":1,"column":891}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":51,"column":6},"generated":{"line":1,"column":897}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"value","original":{"line":51,"column":13},"generated":{"line":1,"column":899}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":51,"column":29},"generated":{"line":1,"column":905}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"value","original":{"line":51,"column":36},"generated":{"line":1,"column":907}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":52,"column":23},"generated":{"line":1,"column":913}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":52,"column":6},"generated":{"line":1,"column":919}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":52,"column":13},"generated":{"line":1,"column":921}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":52,"column":30},"generated":{"line":1,"column":928}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"$expr","original":{"line":53,"column":8},"generated":{"line":1,"column":929}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"OP_VALUE_EXPR","original":{"line":53,"column":17},"generated":{"line":1,"column":935}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"$params","original":{"line":54,"column":8},"generated":{"line":1,"column":937}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":54,"column":17},"generated":{"line":1,"column":945}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"$value","original":{"line":54,"column":18},"generated":{"line":1,"column":946}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":54,"column":26},"generated":{"line":1,"column":953}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signalRef","original":{"line":54,"column":32},"generated":{"line":1,"column":955}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"update","original":{"line":54,"column":42},"generated":{"line":1,"column":965}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":54,"column":49},"generated":{"line":1,"column":967}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":56,"column":6},"generated":{"line":1,"column":978}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":56,"column":12},"generated":{"line":1,"column":980}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":56,"column":12},"generated":{"line":1,"column":982}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":56,"column":12},"generated":{"line":1,"column":989}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"spec","original":{"line":58,"column":6},"generated":{"line":1,"column":1029}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"force","original":{"line":58,"column":11},"generated":{"line":1,"column":1031}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"entry","original":{"line":59,"column":4},"generated":{"line":1,"column":1039}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"options","original":{"line":59,"column":10},"generated":{"line":1,"column":1041}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":59,"column":20},"generated":{"line":1,"column":1049}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"force","original":{"line":59,"column":21},"generated":{"line":1,"column":1050}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":59,"column":28},"generated":{"line":1,"column":1057}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":62,"column":2},"generated":{"line":1,"column":1061}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"forEach","original":{"line":62,"column":10},"generated":{"line":1,"column":1063}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":62,"column":18},"generated":{"line":1,"column":1071}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"source","original":{"line":62,"column":27},"generated":{"line":1,"column":1080}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":63,"column":4},"generated":{"line":1,"column":1083}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"addUpdate","original":{"line":63,"column":10},"generated":{"line":1,"column":1085}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":63,"column":20},"generated":{"line":1,"column":1096}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"streamSource","original":{"line":63,"column":27},"generated":{"line":1,"column":1098}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"streamSource","original":{"line":63,"column":27},"generated":{"line":1,"column":1100}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"streamSource","original":{"line":63,"column":27},"generated":{"line":1,"column":1108}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"source","original":{"line":63,"column":40},"generated":{"line":1,"column":1110}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":63,"column":48},"generated":{"line":1,"column":1112}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"entry","original":{"line":63,"column":56},"generated":{"line":1,"column":1115}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1121}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"streamSource","original":{"line":67,"column":9},"generated":{"line":1,"column":1130}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":67,"column":22},"generated":{"line":1,"column":1132}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":67,"column":30},"generated":{"line":1,"column":1134}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":68,"column":9},"generated":{"line":1,"column":1137}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":68,"column":9},"generated":{"line":1,"column":1143}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"source","original":{"line":69,"column":4},"generated":{"line":1,"column":1144}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":69,"column":12},"generated":{"line":1,"column":1151}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":69,"column":19},"generated":{"line":1,"column":1153}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":69,"column":28},"generated":{"line":1,"column":1160}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signalRef","original":{"line":69,"column":34},"generated":{"line":1,"column":1162}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":69,"column":44},"generated":{"line":1,"column":1172}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":69,"column":51},"generated":{"line":1,"column":1174}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":70,"column":12},"generated":{"line":1,"column":1182}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scale","original":{"line":70,"column":19},"generated":{"line":1,"column":1184}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":70,"column":27},"generated":{"line":1,"column":1190}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scaleRef","original":{"line":70,"column":33},"generated":{"line":1,"column":1192}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":70,"column":42},"generated":{"line":1,"column":1201}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scale","original":{"line":70,"column":49},"generated":{"line":1,"column":1203}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":71,"column":12},"generated":{"line":1,"column":1211}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":71,"column":24},"generated":{"line":1,"column":1213}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":71,"column":24},"generated":{"line":1,"column":1215}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"stream","original":{"line":71,"column":24},"generated":{"line":1,"column":1224}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scope","original":{"line":71,"column":32},"generated":{"line":1,"column":1226}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1230}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"mergeSources","original":{"line":75,"column":9},"generated":{"line":1,"column":1239}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":75,"column":22},"generated":{"line":1,"column":1241}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":76,"column":9},"generated":{"line":1,"column":1244}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":76,"column":9},"generated":{"line":1,"column":1250}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":77,"column":4},"generated":{"line":1,"column":1251}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":77,"column":12},"generated":{"line":1,"column":1258}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"sources","original":{"line":78,"column":8},"generated":{"line":1,"column":1262}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"map","original":{"line":78,"column":16},"generated":{"line":1,"column":1264}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":78,"column":20},"generated":{"line":1,"column":1268}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":78,"column":25},"generated":{"line":1,"column":1271}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scale","original":{"line":78,"column":27},"generated":{"line":1,"column":1273}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":78,"column":35},"generated":{"line":1,"column":1279}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":78,"column":47},"generated":{"line":1,"column":1289}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"scale","original":{"line":78,"column":49},"generated":{"line":1,"column":1291}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":78,"column":57},"generated":{"line":1,"column":1297}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"s","original":{"line":78,"column":64},"generated":{"line":1,"column":1302}},{"source":"node_modules/vega-parser/src/parsers/update.js","name":"signal","original":{"line":78,"column":66},"generated":{"line":1,"column":1304}},{"source":"node_modules/vega-parser/src/parsers/update.js","original":{"line":79,"column":8},"generated":{"line":1,"column":1312}}],"sources":{"node_modules/vega-parser/src/parsers/update.js":"import parseStream from './stream';\nimport {Scope, View} from '../util';\nimport {selector} from 'vega-event-selector';\nimport {parseExpression} from 'vega-functions';\nimport {array, error, extend, isString, stringValue} from 'vega-util';\n\n// bypass expression parser for internal operator references\nconst OP_VALUE_EXPR = {\n  code: '_.$value',\n  ast: {type: 'Identifier', value: 'value'}\n};\n\nexport default function(spec, scope, target) {\n  var events = spec.events,\n      update = spec.update,\n      encode = spec.encode,\n      sources = [],\n      entry = {target: target};\n\n  if (!events) {\n    error('Signal update missing events specification.');\n  }\n\n  // interpret as an event selector string\n  if (isString(events)) {\n    events = selector(events, scope.isSubscope() ? Scope : View);\n  }\n\n  // separate event streams from signal updates\n  events = array(events)\n    .filter(s => s.signal || s.scale ? (sources.push(s), 0) : 1);\n\n  // merge internal operator listeners\n  if (sources.length > 1) {\n    sources = [mergeSources(sources)];\n  }\n\n  // merge event streams, include as source\n  if (events.length) {\n    sources.push(events.length > 1 ? {merge: events} : events[0]);\n  }\n\n  if (encode != null) {\n    if (update) error('Signal encode and update are mutually exclusive.');\n    update = 'encode(item(),' + stringValue(encode) + ')';\n  }\n\n  // resolve update value\n  entry.update = isString(update) ? parseExpression(update, scope)\n    : update.expr != null ? parseExpression(update.expr, scope)\n    : update.value != null ? update.value\n    : update.signal != null ? {\n        $expr:   OP_VALUE_EXPR,\n        $params: {$value: scope.signalRef(update.signal)}\n      }\n    : error('Invalid signal update specification.');\n\n  if (spec.force) {\n    entry.options = {force: true};\n  }\n\n  sources.forEach(function(source) {\n    scope.addUpdate(extend(streamSource(source, scope), entry));\n  });\n}\n\nfunction streamSource(stream, scope) {\n  return {\n    source: stream.signal ? scope.signalRef(stream.signal)\n          : stream.scale ? scope.scaleRef(stream.scale)\n          : parseStream(stream, scope)\n  };\n}\n\nfunction mergeSources(sources) {\n  return {\n    signal: '['\n      + sources.map(s => s.scale ? 'scale(\"' + s.scale + '\")' : s.signal)\n      + ']'\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"6d3adda8413846f5d8d550f25e4d9e9d","cacheData":{"env":{}}}