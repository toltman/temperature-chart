{"id":"NbmS","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/debug.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/data/debug.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../util","loc":{"line":1,"column":34},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/debug.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"},{"name":"./dataflow","loc":{"line":2,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/debug.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/dataflow.js"},{"name":"./source","loc":{"line":3,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/debug.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/source.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.debug=r,exports.draw=t,exports.checkLinks=i;var e=require(\"../../util\"),n=require(\"./dataflow\"),o=require(\"./source\");function r(e){console.log(`${e.constructor.name}${e.debugName?`(${e.debugName})`:\"\"} -> ${e.children.map(e=>`${e.constructor.name}${e.debugName?` (${e.debugName})`:\"\"}`)}`),console.log(e),e.children.forEach(r)}function t(r){i(r);const t={},u=[];function a(n){let o=n.__uniqueid;return void 0===o&&(o=(0,e.uniqueId)(),n.__uniqueid=o),o}function d(e){var r;const t=[e.constructor.name.slice(0,-4)];e.debugName?t.push(`<i>${e.debugName}</i>`):e instanceof o.SourceNode&&(e.data.name||e.data.url)&&t.push(`<i>${null!==(r=e.data.name)&&void 0!==r?r:e.data.url}</i>`);const i=e.dependentFields();(null==i?void 0:i.size)&&t.push(`<font color=\"grey\" point-size=\"10\">IN:</font> ${[...e.dependentFields()].join(\", \")}`);const u=e.producedFields();return(null==u?void 0:u.size)&&t.push(`<font color=\"grey\" point-size=\"10\">OUT:</font> ${[...e.producedFields()].join(\", \")}`),e instanceof n.OutputNode&&t.push(`<font color=\"grey\" point-size=\"10\">required:</font> ${e.isRequired()}`),t.join(\"<br/>\")}function s(e){var n,r;const i=a(e);t[i]={id:i,label:d(e),hash:e instanceof o.SourceNode?null!==(r=null!==(n=e.data.url)&&void 0!==n?n:e.data.name)&&void 0!==r?r:e.debugName:String(e.hash()).replace(/\"/g,\"\")};for(const o of e.children)u.push([i,a(o)]),s(o)}for(const e of r)s(e);const c=`digraph DataFlow {\\n  rankdir = TB;\\n  node [shape=record]\\n  ${(0,e.entries)(t).map(({key:e,value:n})=>`  \"${e}\" [\\n    label = <${n.label}>;\\n    tooltip = \"[${n.id}]&#010;${n.hash}\"\\n  ]`).join(\"\\n\")}\\n\\n  ${u.map(([e,n])=>`\"${e}\" -> \"${n}\"`).join(\" \")}\\n}`;return console.log(c),c}function i(e){for(const n of e){for(const e of n.children)if(e.parent!==n)return console.error(\"Dataflow graph is inconsistent.\",n,e),!1;if(!i(n.children))return!1}return!0}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":82}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":84}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":92}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":97}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":99}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":107}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":118}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":120}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":124}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":126}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":134}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":148}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":150}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":158}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":172}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":174}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":182}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":8,"column":6},"generated":{"line":1,"column":194}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":8,"column":16},"generated":{"line":1,"column":203}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":8,"column":22},"generated":{"line":1,"column":205}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":9,"column":2},"generated":{"line":1,"column":208}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":9,"column":10},"generated":{"line":1,"column":216}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":1,"column":223}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":225}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":33},"generated":{"line":1,"column":237}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":40},"generated":{"line":1,"column":244}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":45},"generated":{"line":1,"column":246}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":61},"generated":{"line":1,"column":260}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":66},"generated":{"line":1,"column":262}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":81},"generated":{"line":1,"column":275}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":90},"generated":{"line":1,"column":284}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":95},"generated":{"line":1,"column":286}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":104},"generated":{"line":1,"column":295}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":10,"column":108},"generated":{"line":1,"column":299}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":17},"generated":{"line":1,"column":305}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":19},"generated":{"line":1,"column":307}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":39},"generated":{"line":1,"column":319}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":46},"generated":{"line":1,"column":326}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":48},"generated":{"line":1,"column":328}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":65},"generated":{"line":1,"column":343}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":67},"generated":{"line":1,"column":345}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":11,"column":82},"generated":{"line":1,"column":358}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":367}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":375}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":379}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":382}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":15,"column":7},"generated":{"line":1,"column":384}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":15,"column":16},"generated":{"line":1,"column":393}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":15,"column":24},"generated":{"line":1,"column":401}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":23,"column":6},"generated":{"line":1,"column":404}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":413}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":415}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":25,"column":2},"generated":{"line":1,"column":418}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":25,"column":13},"generated":{"line":1,"column":420}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":423}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":27,"column":8},"generated":{"line":1,"column":429}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":27,"column":93},"generated":{"line":1,"column":431}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":434}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":28,"column":36},"generated":{"line":1,"column":436}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":30,"column":11},"generated":{"line":1,"column":439}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":30,"column":11},"generated":{"line":1,"column":448}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":30,"column":17},"generated":{"line":1,"column":450}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":453}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":1,"column":457}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":459}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":461}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":1,"column":472}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":484}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":488}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":492}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":33,"column":11},"generated":{"line":1,"column":495}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":497}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":499}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":511}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":34,"column":10},"generated":{"line":1,"column":513}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":34,"column":27},"generated":{"line":1,"column":524}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":36,"column":11},"generated":{"line":1,"column":527}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":39,"column":11},"generated":{"line":1,"column":529}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":39,"column":11},"generated":{"line":1,"column":538}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":540}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":543}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":547}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":549}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":555}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":557}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":1,"column":558}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":23},"generated":{"line":1,"column":560}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":1,"column":572}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":48},"generated":{"line":1,"column":577}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":54},"generated":{"line":1,"column":583}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":40,"column":58},"generated":{"line":1,"column":586}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":1,"column":590}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":42,"column":13},"generated":{"line":1,"column":592}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":43,"column":6},"generated":{"line":1,"column":602}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":43,"column":10},"generated":{"line":1,"column":604}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":43,"column":21},"generated":{"line":1,"column":615}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":1,"column":617}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":44,"column":15},"generated":{"line":1,"column":634}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":1,"column":647}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":44,"column":11},"generated":{"line":1,"column":649}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":662}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":664}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":20},"generated":{"line":1,"column":669}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":28},"generated":{"line":1,"column":675}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":33},"generated":{"line":1,"column":677}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":45,"column":38},"generated":{"line":1,"column":682}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":688}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":12},"generated":{"line":1,"column":690}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":37},"generated":{"line":1,"column":701}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":709}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":711}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":28},"generated":{"line":1,"column":713}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":33},"generated":{"line":1,"column":718}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":37},"generated":{"line":1,"column":730}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":37},"generated":{"line":1,"column":734}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":37},"generated":{"line":1,"column":736}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":41},"generated":{"line":1,"column":738}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":46},"generated":{"line":1,"column":740}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":46,"column":51},"generated":{"line":1,"column":745}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":756}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":50,"column":10},"generated":{"line":1,"column":762}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":764}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":50,"column":21},"generated":{"line":1,"column":766}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":785}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":791}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":51,"column":11},"generated":{"line":1,"column":798}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":800}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":802}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":809}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":811}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":64},"generated":{"line":1,"column":865}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":68},"generated":{"line":1,"column":869}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":73},"generated":{"line":1,"column":871}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":92},"generated":{"line":1,"column":890}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":52,"column":97},"generated":{"line":1,"column":895}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":1,"column":904}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":54,"column":10},"generated":{"line":1,"column":910}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":54,"column":17},"generated":{"line":1,"column":912}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":54,"column":22},"generated":{"line":1,"column":914}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":931}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":938}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":944}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":951}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":953}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":55,"column":14},"generated":{"line":1,"column":955}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":6},"generated":{"line":1,"column":962}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":10},"generated":{"line":1,"column":964}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":65},"generated":{"line":1,"column":1019}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":69},"generated":{"line":1,"column":1023}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":74},"generated":{"line":1,"column":1025}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":92},"generated":{"line":1,"column":1043}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":56,"column":97},"generated":{"line":1,"column":1048}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":1057}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":58,"column":24},"generated":{"line":1,"column":1070}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":1,"column":1072}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":59,"column":6},"generated":{"line":1,"column":1084}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":1086}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":59,"column":70},"generated":{"line":1,"column":1146}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":59,"column":75},"generated":{"line":1,"column":1148}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":1164}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":1166}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":61,"column":20},"generated":{"line":1,"column":1171}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":1180}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":1189}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":1191}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":1194}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":1198}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":123,"column":1},"generated":{"line":1,"column":1200}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":1202}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":65,"column":10},"generated":{"line":1,"column":1208}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":65,"column":15},"generated":{"line":1,"column":1210}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":65,"column":21},"generated":{"line":1,"column":1212}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":1215}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":66,"column":10},"generated":{"line":1,"column":1217}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":66,"column":16},"generated":{"line":1,"column":1220}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":1221}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":67,"column":10},"generated":{"line":1,"column":1224}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":1,"column":1226}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":68,"column":13},"generated":{"line":1,"column":1232}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":68,"column":22},"generated":{"line":1,"column":1234}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":69,"column":6},"generated":{"line":1,"column":1237}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1242}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":70,"column":24},"generated":{"line":1,"column":1255}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":1257}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":43},"generated":{"line":1,"column":1268}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":11},"generated":{"line":1,"column":1276}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":25},"generated":{"line":1,"column":1278}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":11},"generated":{"line":1,"column":1286}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":12},"generated":{"line":1,"column":1288}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":17},"generated":{"line":1,"column":1290}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":1,"column":1295}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":25},"generated":{"line":1,"column":1306}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":25},"generated":{"line":1,"column":1310}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":25},"generated":{"line":1,"column":1312}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":29},"generated":{"line":1,"column":1314}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":34},"generated":{"line":1,"column":1316}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":39},"generated":{"line":1,"column":1321}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":43},"generated":{"line":1,"column":1333}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":43},"generated":{"line":1,"column":1337}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":43},"generated":{"line":1,"column":1339}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":47},"generated":{"line":1,"column":1341}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":71,"column":52},"generated":{"line":1,"column":1343}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":1353}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":19},"generated":{"line":1,"column":1360}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":1362}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":32},"generated":{"line":1,"column":1370}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":40},"generated":{"line":1,"column":1378}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":72,"column":46},"generated":{"line":1,"column":1383}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":1,"column":1388}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":1,"column":1392}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":75,"column":15},"generated":{"line":1,"column":1398}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":75,"column":24},"generated":{"line":1,"column":1403}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":75,"column":29},"generated":{"line":1,"column":1405}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":6},"generated":{"line":1,"column":1414}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":12},"generated":{"line":1,"column":1416}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":17},"generated":{"line":1,"column":1421}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":18},"generated":{"line":1,"column":1422}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":22},"generated":{"line":1,"column":1424}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":76,"column":28},"generated":{"line":1,"column":1426}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":1431}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":1,"column":1433}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":81,"column":7},"generated":{"line":1,"column":1436}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":81,"column":7},"generated":{"line":1,"column":1440}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":81,"column":13},"generated":{"line":1,"column":1446}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":81,"column":18},"generated":{"line":1,"column":1451}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":1453}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":82,"column":14},"generated":{"line":1,"column":1455}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":1458}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":1,"column":1464}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":88,"column":4},"generated":{"line":1,"column":1532}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":88,"column":12},"generated":{"line":1,"column":1534}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":88,"column":12},"generated":{"line":1,"column":1536}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":88,"column":12},"generated":{"line":1,"column":1545}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":89,"column":5},"generated":{"line":1,"column":1548}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":6},"generated":{"line":1,"column":1552}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":1554}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":1,"column":1558}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":13},"generated":{"line":1,"column":1560}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":13},"generated":{"line":1,"column":1566}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":90,"column":30},"generated":{"line":1,"column":1577}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":91,"column":15},"generated":{"line":1,"column":1599}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":91,"column":21},"generated":{"line":1,"column":1601}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":92,"column":18},"generated":{"line":1,"column":1629}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":1,"column":1631}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":92,"column":36},"generated":{"line":1,"column":1643}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":92,"column":42},"generated":{"line":1,"column":1645}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":95,"column":5},"generated":{"line":1,"column":1659}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":95,"column":10},"generated":{"line":1,"column":1664}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":4},"generated":{"line":1,"column":1678}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":10},"generated":{"line":1,"column":1680}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":14},"generated":{"line":1,"column":1684}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":16},"generated":{"line":1,"column":1686}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":24},"generated":{"line":1,"column":1688}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":40},"generated":{"line":1,"column":1697}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":55},"generated":{"line":1,"column":1707}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":66},"generated":{"line":1,"column":1713}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":97,"column":71},"generated":{"line":1,"column":1718}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":1728}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":100,"column":2},"generated":{"line":1,"column":1735}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":100,"column":10},"generated":{"line":1,"column":1743}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":100,"column":14},"generated":{"line":1,"column":1747}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":1750}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":1,"column":1752}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":108,"column":16},"generated":{"line":1,"column":1761}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":108,"column":27},"generated":{"line":1,"column":1763}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":109,"column":7},"generated":{"line":1,"column":1766}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":109,"column":7},"generated":{"line":1,"column":1770}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":109,"column":13},"generated":{"line":1,"column":1776}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":109,"column":21},"generated":{"line":1,"column":1781}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":109,"column":28},"generated":{"line":1,"column":1783}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":110,"column":9},"generated":{"line":1,"column":1784}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":110,"column":9},"generated":{"line":1,"column":1788}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":110,"column":15},"generated":{"line":1,"column":1794}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":110,"column":24},"generated":{"line":1,"column":1799}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":110,"column":29},"generated":{"line":1,"column":1801}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":111,"column":10},"generated":{"line":1,"column":1810}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":111,"column":10},"generated":{"line":1,"column":1813}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":111,"column":16},"generated":{"line":1,"column":1815}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":111,"column":27},"generated":{"line":1,"column":1824}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":113,"column":15},"generated":{"line":1,"column":1826}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":112,"column":8},"generated":{"line":1,"column":1833}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":112,"column":16},"generated":{"line":1,"column":1841}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":112,"column":22},"generated":{"line":1,"column":1847}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":112,"column":57},"generated":{"line":1,"column":1881}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":112,"column":63},"generated":{"line":1,"column":1883}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":113,"column":15},"generated":{"line":1,"column":1887}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":1889}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":117,"column":9},"generated":{"line":1,"column":1893}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":117,"column":20},"generated":{"line":1,"column":1895}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":117,"column":25},"generated":{"line":1,"column":1897}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":118,"column":13},"generated":{"line":1,"column":1907}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":118,"column":13},"generated":{"line":1,"column":1914}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":122,"column":9},"generated":{"line":1,"column":1916}},{"source":"../../../../src/compile/data/debug.ts","name":null,"original":{"line":122,"column":9},"generated":{"line":1,"column":1923}}],"sources":{"../../../../src/compile/data/debug.ts":"import {entries, uniqueId} from '../../util';\nimport {DataFlowNode, OutputNode} from './dataflow';\nimport {SourceNode} from './source';\n\n/**\n * Print debug information for dataflow tree.\n */\nexport function debug(node: DataFlowNode) {\n  console.log(\n    `${(node.constructor as any).name}${node.debugName ? `(${node.debugName})` : ''} -> ${node.children.map(c => {\n      return `${(c.constructor as any).name}${c.debugName ? ` (${c.debugName})` : ''}`;\n    })}`\n  );\n  console.log(node);\n  node.children.forEach(debug);\n}\n\n/**\n * Print the dataflow tree as graphviz.\n *\n * Render the output in http://viz-js.com/.\n */\nexport function draw(roots: readonly DataFlowNode[]) {\n  // check the graph before printing it since the logic below assumes a consistent graph\n  checkLinks(roots);\n\n  const nodes: Record<string, {id: string | number; label: string; hash: string | number}> = {};\n  const edges: [string, string][] = [];\n\n  function getId(node: DataFlowNode) {\n    let id = node['__uniqueid'];\n    if (id === undefined) {\n      id = uniqueId();\n      node['__uniqueid'] = id;\n    }\n    return id;\n  }\n\n  function getLabel(node: DataFlowNode) {\n    const out = [(node.constructor as any).name.slice(0, -4)];\n\n    if (node.debugName) {\n      out.push(`<i>${node.debugName}</i>`);\n    } else if (node instanceof SourceNode) {\n      if (node.data.name || node.data.url) {\n        out.push(`<i>${node.data.name ?? node.data.url}</i>`);\n      }\n    }\n\n    const dep = node.dependentFields();\n    if (dep?.size) {\n      out.push(`<font color=\"grey\" point-size=\"10\">IN:</font> ${[...node.dependentFields()].join(', ')}`);\n    }\n    const prod = node.producedFields();\n    if (prod?.size) {\n      out.push(`<font color=\"grey\" point-size=\"10\">OUT:</font> ${[...node.producedFields()].join(', ')}`);\n    }\n    if (node instanceof OutputNode) {\n      out.push(`<font color=\"grey\" point-size=\"10\">required:</font> ${node.isRequired()}`);\n    }\n    return out.join('<br/>');\n  }\n\n  function collector(node: DataFlowNode) {\n    const id = getId(node);\n    nodes[id] = {\n      id: id,\n      label: getLabel(node),\n      hash:\n        node instanceof SourceNode\n          ? node.data.url ?? node.data.name ?? node.debugName\n          : String(node.hash()).replace(/\"/g, '')\n    };\n\n    for (const child of node.children) {\n      edges.push([id, getId(child)]);\n      collector(child);\n    }\n  }\n\n  for (const n of roots) {\n    collector(n);\n  }\n\n  const dot = `digraph DataFlow {\n  rankdir = TB;\n  node [shape=record]\n  ${entries(nodes)\n    .map(\n      ({key, value}) => `  \"${key}\" [\n    label = <${value.label}>;\n    tooltip = \"[${value.id}]&#010;${value.hash}\"\n  ]`\n    )\n    .join('\\n')}\n\n  ${edges.map(([source, target]) => `\"${source}\" -> \"${target}\"`).join(' ')}\n}`;\n\n  console.log(dot);\n\n  return dot;\n}\n\n/**\n * Iterates over a dataflow graph and checks whether all links are consistent.\n */\nexport function checkLinks(nodes: readonly DataFlowNode[]): boolean {\n  for (const node of nodes) {\n    for (const child of node.children) {\n      if (child.parent !== node) {\n        console.error('Dataflow graph is inconsistent.', node, child);\n        return false;\n      }\n    }\n\n    if (!checkLinks(node.children)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n"},"lineCount":null}},"error":null,"hash":"5f365d1ce0f922dc07b6550fd479cdfa","cacheData":{"env":{}}}