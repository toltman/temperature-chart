{"id":"pXh5","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/package.json","includedInParent":true,"mtime":1591969205221},{"name":"./Aggregate","loc":{"line":1,"column":22},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/JoinAggregate.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/Aggregate.js"},{"name":"./util/AggregateOps","loc":{"line":2,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/JoinAggregate.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/util/AggregateOps.js"},{"name":"vega-util","loc":{"line":3,"column":31},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-transforms/src/JoinAggregate.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=n;var e=a(require(\"./Aggregate\")),t=require(\"./util/AggregateOps\"),i=require(\"vega-util\");function a(e){return e&&e.__esModule?e:{default:e}}function n(t){e.default.call(this,t)}n.Definition={type:\"JoinAggregate\",metadata:{modifies:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"ops\",type:\"enum\",array:!0,values:t.ValidAggregateOps},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"key\",type:\"field\"}]};var l=(0,i.inherits)(n,e.default);l.transform=function(e,t){var a,n=this,l=e.modified();return n.value&&(l||t.modified(n._inputs,!0))?(a=n.value=l?n.init(e):{},t.visit(t.SOURCE,function(e){n.add(e)})):(a=n.value=n.value||this.init(e),t.visit(t.REM,function(e){n.rem(e)}),t.visit(t.ADD,function(e){n.add(e)})),n.changes(),t.visit(t.SOURCE,function(e){(0,i.extend)(e,a[n.cellkey(e)].tuple)}),t.reflow(l).modifies(this._outputs)},l.changes=function(){var e,t,i=this._adds,a=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(i[e]),i[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(a[e]),a[e]=null;this._alen=this._mlen=0};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":118}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":120}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":151}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":153}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":3,"column":0},"generated":{"line":1,"column":161}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":183}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":185}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":195}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":198}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":200}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":211}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":213}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":214}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":0},"generated":{"line":1,"column":222}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":10,"column":15},"generated":{"line":1,"column":225}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"JoinAggregate","original":{"line":10,"column":24},"generated":{"line":1,"column":234}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"params","original":{"line":10,"column":38},"generated":{"line":1,"column":236}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"call","original":{"line":11,"column":12},"generated":{"line":1,"column":239}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"call","original":{"line":11,"column":12},"generated":{"line":1,"column":241}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"call","original":{"line":11,"column":12},"generated":{"line":1,"column":249}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":11,"column":17},"generated":{"line":1,"column":254}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"params","original":{"line":11,"column":23},"generated":{"line":1,"column":259}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"JoinAggregate","original":{"line":14,"column":0},"generated":{"line":1,"column":262}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"Definition","original":{"line":14,"column":14},"generated":{"line":1,"column":264}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":14,"column":27},"generated":{"line":1,"column":275}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":15,"column":10},"generated":{"line":1,"column":276}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":15,"column":10},"generated":{"line":1,"column":281}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":16,"column":14},"generated":{"line":1,"column":297}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":16,"column":14},"generated":{"line":1,"column":306}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":16,"column":27},"generated":{"line":1,"column":307}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":16,"column":27},"generated":{"line":1,"column":317}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":17,"column":12},"generated":{"line":1,"column":320}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":17,"column":12},"generated":{"line":1,"column":327}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":4},"generated":{"line":1,"column":328}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":14},"generated":{"line":1,"column":329}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":14},"generated":{"line":1,"column":334}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":33},"generated":{"line":1,"column":344}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":33},"generated":{"line":1,"column":349}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":51},"generated":{"line":1,"column":357}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":18,"column":51},"generated":{"line":1,"column":364}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":4},"generated":{"line":1,"column":367}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":14},"generated":{"line":1,"column":368}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":14},"generated":{"line":1,"column":373}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":32},"generated":{"line":1,"column":382}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":32},"generated":{"line":1,"column":387}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":49},"generated":{"line":1,"column":395}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":49},"generated":{"line":1,"column":401}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":64},"generated":{"line":1,"column":403}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":19,"column":64},"generated":{"line":1,"column":410}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":4},"generated":{"line":1,"column":413}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":14},"generated":{"line":1,"column":414}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":14},"generated":{"line":1,"column":419}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":29},"generated":{"line":1,"column":425}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":29},"generated":{"line":1,"column":430}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":46},"generated":{"line":1,"column":437}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":20,"column":46},"generated":{"line":1,"column":444}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"ValidAggregateOps","original":{"line":20,"column":62},"generated":{"line":1,"column":446}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"ValidAggregateOps","original":{"line":20,"column":62},"generated":{"line":1,"column":453}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"ValidAggregateOps","original":{"line":20,"column":62},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":4},"generated":{"line":1,"column":474}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":14},"generated":{"line":1,"column":475}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":14},"generated":{"line":1,"column":480}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":28},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":28},"generated":{"line":1,"column":490}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":46},"generated":{"line":1,"column":499}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":46},"generated":{"line":1,"column":505}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":61},"generated":{"line":1,"column":507}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":21,"column":61},"generated":{"line":1,"column":514}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":22,"column":4},"generated":{"line":1,"column":517}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":22,"column":14},"generated":{"line":1,"column":518}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":22,"column":14},"generated":{"line":1,"column":523}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":22,"column":29},"generated":{"line":1,"column":529}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":22,"column":29},"generated":{"line":1,"column":534}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":26,"column":0},"generated":{"line":1,"column":545}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"prototype","original":{"line":26,"column":4},"generated":{"line":1,"column":549}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":26,"column":16},"generated":{"line":1,"column":552}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"JoinAggregate","original":{"line":26,"column":25},"generated":{"line":1,"column":554}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"JoinAggregate","original":{"line":26,"column":25},"generated":{"line":1,"column":556}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"JoinAggregate","original":{"line":26,"column":25},"generated":{"line":1,"column":566}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"Aggregate","original":{"line":26,"column":40},"generated":{"line":1,"column":568}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":26,"column":16},"generated":{"line":1,"column":570}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"prototype","original":{"line":28,"column":0},"generated":{"line":1,"column":579}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"transform","original":{"line":28,"column":10},"generated":{"line":1,"column":581}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":28,"column":22},"generated":{"line":1,"column":591}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_","original":{"line":28,"column":31},"generated":{"line":1,"column":600}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":28,"column":34},"generated":{"line":1,"column":602}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":29,"column":6},"generated":{"line":1,"column":605}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"cells","original":{"line":31,"column":6},"generated":{"line":1,"column":609}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":29,"column":6},"generated":{"line":1,"column":611}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":29,"column":13},"generated":{"line":1,"column":613}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mod","original":{"line":30,"column":6},"generated":{"line":1,"column":618}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_","original":{"line":30,"column":12},"generated":{"line":1,"column":620}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"modified","original":{"line":30,"column":14},"generated":{"line":1,"column":622}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":51,"column":9},"generated":{"line":1,"column":633}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":34,"column":6},"generated":{"line":1,"column":640}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"value","original":{"line":34,"column":11},"generated":{"line":1,"column":642}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mod","original":{"line":34,"column":21},"generated":{"line":1,"column":650}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":34,"column":28},"generated":{"line":1,"column":653}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"modified","original":{"line":34,"column":34},"generated":{"line":1,"column":655}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":34,"column":43},"generated":{"line":1,"column":664}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_inputs","original":{"line":34,"column":48},"generated":{"line":1,"column":666}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":34,"column":57},"generated":{"line":1,"column":675}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"cells","original":{"line":35,"column":4},"generated":{"line":1,"column":680}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":35,"column":12},"generated":{"line":1,"column":682}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"value","original":{"line":35,"column":17},"generated":{"line":1,"column":684}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mod","original":{"line":35,"column":25},"generated":{"line":1,"column":690}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":35,"column":31},"generated":{"line":1,"column":692}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"init","original":{"line":35,"column":36},"generated":{"line":1,"column":694}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_","original":{"line":35,"column":41},"generated":{"line":1,"column":699}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":35,"column":46},"generated":{"line":1,"column":702}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":36,"column":4},"generated":{"line":1,"column":705}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"visit","original":{"line":36,"column":10},"generated":{"line":1,"column":707}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":36,"column":16},"generated":{"line":1,"column":713}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"SOURCE","original":{"line":36,"column":22},"generated":{"line":1,"column":715}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":36,"column":30},"generated":{"line":1,"column":722}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":36,"column":39},"generated":{"line":1,"column":731}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":36,"column":44},"generated":{"line":1,"column":734}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"add","original":{"line":36,"column":49},"generated":{"line":1,"column":736}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":36,"column":53},"generated":{"line":1,"column":740}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"cells","original":{"line":38,"column":4},"generated":{"line":1,"column":747}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":38,"column":12},"generated":{"line":1,"column":749}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"value","original":{"line":38,"column":17},"generated":{"line":1,"column":751}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":38,"column":25},"generated":{"line":1,"column":757}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"value","original":{"line":38,"column":30},"generated":{"line":1,"column":759}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":38,"column":39},"generated":{"line":1,"column":766}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"init","original":{"line":38,"column":44},"generated":{"line":1,"column":771}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_","original":{"line":38,"column":49},"generated":{"line":1,"column":776}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":39,"column":4},"generated":{"line":1,"column":779}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"visit","original":{"line":39,"column":10},"generated":{"line":1,"column":781}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":39,"column":16},"generated":{"line":1,"column":787}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"REM","original":{"line":39,"column":22},"generated":{"line":1,"column":789}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":39,"column":27},"generated":{"line":1,"column":793}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":39,"column":36},"generated":{"line":1,"column":802}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":39,"column":41},"generated":{"line":1,"column":805}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"rem","original":{"line":39,"column":46},"generated":{"line":1,"column":807}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":39,"column":50},"generated":{"line":1,"column":811}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":40,"column":4},"generated":{"line":1,"column":816}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"visit","original":{"line":40,"column":10},"generated":{"line":1,"column":818}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":40,"column":16},"generated":{"line":1,"column":824}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"ADD","original":{"line":40,"column":22},"generated":{"line":1,"column":826}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":40,"column":27},"generated":{"line":1,"column":830}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":40,"column":36},"generated":{"line":1,"column":839}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":40,"column":41},"generated":{"line":1,"column":842}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"add","original":{"line":40,"column":46},"generated":{"line":1,"column":844}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":40,"column":50},"generated":{"line":1,"column":848}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":44,"column":2},"generated":{"line":1,"column":854}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"changes","original":{"line":44,"column":7},"generated":{"line":1,"column":856}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":47,"column":2},"generated":{"line":1,"column":866}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"visit","original":{"line":47,"column":8},"generated":{"line":1,"column":868}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":47,"column":14},"generated":{"line":1,"column":874}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"SOURCE","original":{"line":47,"column":20},"generated":{"line":1,"column":876}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":47,"column":28},"generated":{"line":1,"column":883}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":47,"column":37},"generated":{"line":1,"column":892}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":48,"column":11},"generated":{"line":1,"column":896}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":48,"column":11},"generated":{"line":1,"column":898}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":48,"column":11},"generated":{"line":1,"column":900}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":48,"column":11},"generated":{"line":1,"column":908}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"cells","original":{"line":48,"column":14},"generated":{"line":1,"column":910}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"aggr","original":{"line":48,"column":20},"generated":{"line":1,"column":912}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"cellkey","original":{"line":48,"column":25},"generated":{"line":1,"column":914}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"t","original":{"line":48,"column":33},"generated":{"line":1,"column":922}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"tuple","original":{"line":48,"column":37},"generated":{"line":1,"column":926}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"pulse","original":{"line":51,"column":9},"generated":{"line":1,"column":935}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"reflow","original":{"line":51,"column":15},"generated":{"line":1,"column":937}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mod","original":{"line":51,"column":22},"generated":{"line":1,"column":944}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"modifies","original":{"line":51,"column":27},"generated":{"line":1,"column":947}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":51,"column":36},"generated":{"line":1,"column":956}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_outputs","original":{"line":51,"column":41},"generated":{"line":1,"column":961}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"prototype","original":{"line":54,"column":0},"generated":{"line":1,"column":972}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"changes","original":{"line":54,"column":10},"generated":{"line":1,"column":974}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":54,"column":20},"generated":{"line":1,"column":982}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"adds","original":{"line":55,"column":6},"generated":{"line":1,"column":993}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":57,"column":6},"generated":{"line":1,"column":997}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"n","original":{"line":57,"column":9},"generated":{"line":1,"column":999}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"adds","original":{"line":55,"column":6},"generated":{"line":1,"column":1001}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":55,"column":13},"generated":{"line":1,"column":1003}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_adds","original":{"line":55,"column":18},"generated":{"line":1,"column":1008}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mods","original":{"line":56,"column":6},"generated":{"line":1,"column":1014}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":56,"column":13},"generated":{"line":1,"column":1016}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_mods","original":{"line":56,"column":18},"generated":{"line":1,"column":1021}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":59,"column":7},"generated":{"line":1,"column":1027}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":59,"column":7},"generated":{"line":1,"column":1031}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":59,"column":9},"generated":{"line":1,"column":1033}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"n","original":{"line":59,"column":12},"generated":{"line":1,"column":1035}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":59,"column":14},"generated":{"line":1,"column":1037}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_alen","original":{"line":59,"column":19},"generated":{"line":1,"column":1042}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":59,"column":26},"generated":{"line":1,"column":1048}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"n","original":{"line":59,"column":28},"generated":{"line":1,"column":1050}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":59,"column":33},"generated":{"line":1,"column":1054}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"celltuple","original":{"line":60,"column":9},"generated":{"line":1,"column":1056}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"celltuple","original":{"line":60,"column":9},"generated":{"line":1,"column":1061}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"adds","original":{"line":60,"column":19},"generated":{"line":1,"column":1071}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":60,"column":24},"generated":{"line":1,"column":1073}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"adds","original":{"line":61,"column":4},"generated":{"line":1,"column":1077}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":61,"column":9},"generated":{"line":1,"column":1079}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":61,"column":14},"generated":{"line":1,"column":1082}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":64,"column":7},"generated":{"line":1,"column":1087}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":64,"column":7},"generated":{"line":1,"column":1091}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":64,"column":9},"generated":{"line":1,"column":1093}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"n","original":{"line":64,"column":12},"generated":{"line":1,"column":1095}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":64,"column":14},"generated":{"line":1,"column":1097}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_mlen","original":{"line":64,"column":19},"generated":{"line":1,"column":1102}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":64,"column":26},"generated":{"line":1,"column":1108}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"n","original":{"line":64,"column":28},"generated":{"line":1,"column":1110}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":64,"column":33},"generated":{"line":1,"column":1114}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"celltuple","original":{"line":65,"column":9},"generated":{"line":1,"column":1116}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"celltuple","original":{"line":65,"column":9},"generated":{"line":1,"column":1121}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mods","original":{"line":65,"column":19},"generated":{"line":1,"column":1131}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":65,"column":24},"generated":{"line":1,"column":1133}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"mods","original":{"line":66,"column":4},"generated":{"line":1,"column":1137}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"i","original":{"line":66,"column":9},"generated":{"line":1,"column":1139}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":66,"column":14},"generated":{"line":1,"column":1142}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_alen","original":{"line":69,"column":7},"generated":{"line":1,"column":1147}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_alen","original":{"line":69,"column":7},"generated":{"line":1,"column":1152}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":69,"column":15},"generated":{"line":1,"column":1158}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","name":"_mlen","original":{"line":69,"column":20},"generated":{"line":1,"column":1163}},{"source":"node_modules/vega-transforms/src/JoinAggregate.js","original":{"line":69,"column":28},"generated":{"line":1,"column":1169}}],"sources":{"node_modules/vega-transforms/src/JoinAggregate.js":"import Aggregate from './Aggregate';\nimport {ValidAggregateOps} from './util/AggregateOps';\nimport {extend, inherits} from 'vega-util';\n\n/**\n * Extend input tuples with aggregate values.\n * Calcuates aggregate values and joins them with the input stream.\n * @constructor\n */\nexport default function JoinAggregate(params) {\n  Aggregate.call(this, params);\n}\n\nJoinAggregate.Definition = {\n  'type': 'JoinAggregate',\n  'metadata': {'modifies': true},\n  'params': [\n    { 'name': 'groupby', 'type': 'field', 'array': true },\n    { 'name': 'fields', 'type': 'field', 'null': true, 'array': true },\n    { 'name': 'ops', 'type': 'enum', 'array': true, 'values': ValidAggregateOps },\n    { 'name': 'as', 'type': 'string', 'null': true, 'array': true },\n    { 'name': 'key', 'type': 'field' }\n  ]\n};\n\nvar prototype = inherits(JoinAggregate, Aggregate);\n\nprototype.transform = function(_, pulse) {\n  var aggr = this,\n      mod = _.modified(),\n      cells;\n\n  // process all input tuples to calculate aggregates\n  if (aggr.value && (mod || pulse.modified(aggr._inputs, true))) {\n    cells = aggr.value = mod ? aggr.init(_) : {};\n    pulse.visit(pulse.SOURCE, function(t) { aggr.add(t); });\n  } else {\n    cells = aggr.value = aggr.value || this.init(_);\n    pulse.visit(pulse.REM, function(t) { aggr.rem(t); });\n    pulse.visit(pulse.ADD, function(t) { aggr.add(t); });\n  }\n\n  // update aggregation cells\n  aggr.changes();\n\n  // write aggregate values to input tuples\n  pulse.visit(pulse.SOURCE, function(t) {\n    extend(t, cells[aggr.cellkey(t)].tuple);\n  });\n\n  return pulse.reflow(mod).modifies(this._outputs);\n};\n\nprototype.changes = function() {\n  var adds = this._adds,\n      mods = this._mods,\n      i, n;\n\n  for (i=0, n=this._alen; i<n; ++i) {\n    this.celltuple(adds[i]);\n    adds[i] = null; // for garbage collection\n  }\n\n  for (i=0, n=this._mlen; i<n; ++i) {\n    this.celltuple(mods[i]);\n    mods[i] = null; // for garbage collection\n  }\n\n  this._alen = this._mlen = 0; // reset list of active cells\n};\n"},"lineCount":null}},"error":null,"hash":"bf60c542be2c78a050bf53140be01669","cacheData":{"env":{}}}