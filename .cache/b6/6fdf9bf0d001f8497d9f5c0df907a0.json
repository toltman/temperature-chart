{"id":"bfwI","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-parser/package.json","includedInParent":true,"mtime":1591969205174},{"name":"../util","loc":{"line":1,"column":26},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/stream.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/util.js"},{"name":"vega-functions","loc":{"line":2,"column":30},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/stream.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-functions/index.js"},{"name":"vega-util","loc":{"line":3,"column":33},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-parser/src/parsers/stream.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=a;var e=require(\"../util\"),r=require(\"vega-functions\"),t=require(\"vega-util\"),n=\"timer\";function a(e,r){return(e.merge?u:e.stream?m:e.type?o:(0,t.error)(\"Invalid stream specification: \"+(0,t.stringValue)(e)))(e,r)}function i(r){return r===e.Scope?e.View:r||e.View}function u(e,r){var t=l({merge:e.merge.map(e=>a(e,r))},e,r);return r.addStream(t).id}function m(e,r){var t=l({stream:a(e.stream,r)},e,r);return r.addStream(t).id}function o(e,r){var t,a;return e.type===n?(t=r.event(n,e.throttle),e={between:e.between,filter:e.filter}):t=r.event(i(e.source),e.type),a=l({stream:t},e,r),1===Object.keys(a).length?t:r.addStream(a).id}function l(n,i,u){var m=i.between;return m&&(2!==m.length&&(0,t.error)('Stream \"between\" parameter must have 2 entries: '+(0,t.stringValue)(i)),n.between=[a(m[0],u),a(m[1],u)]),m=i.filter?[].concat(i.filter):[],(i.marktype||i.markname||i.markrole)&&m.push(s(i.marktype,i.markname,i.markrole)),i.source===e.Scope&&m.push(\"inScope(event.item)\"),m.length&&(n.filter=(0,r.parseExpression)(\"(\"+m.join(\")&&(\")+\")\",u).$expr),null!=(m=i.throttle)&&(n.throttle=+m),null!=(m=i.debounce)&&(n.debounce=+m),i.consume&&(n.consume=!0),n}function s(e,r,t){var n=\"event.item\";return n+(e&&\"*\"!==e?\"&&\"+n+\".mark.marktype==='\"+e+\"'\":\"\")+(t?\"&&\"+n+\".mark.role==='\"+t+\"'\":\"\")+(r?\"&&\"+n+\".mark.name==='\"+r+\"'\":\"\")}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":95,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":2,"column":0},"generated":{"line":1,"column":111}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":2,"column":0},"generated":{"line":1,"column":113}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":3,"column":0},"generated":{"line":1,"column":139}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":3,"column":0},"generated":{"line":1,"column":141}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":3,"column":0},"generated":{"line":1,"column":149}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Timer","original":{"line":5,"column":4},"generated":{"line":1,"column":162}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":5,"column":12},"generated":{"line":1,"column":164}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":7,"column":15},"generated":{"line":1,"column":172}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"parseStream","original":{"line":7,"column":24},"generated":{"line":1,"column":181}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":7,"column":36},"generated":{"line":1,"column":183}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":7,"column":44},"generated":{"line":1,"column":185}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"method","original":{"line":13,"column":9},"generated":{"line":1,"column":188}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":8,"column":15},"generated":{"line":1,"column":195}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"merge","original":{"line":8,"column":22},"generated":{"line":1,"column":197}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"mergeStream","original":{"line":8,"column":30},"generated":{"line":1,"column":203}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":9,"column":6},"generated":{"line":1,"column":205}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":9,"column":13},"generated":{"line":1,"column":207}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"nestedStream","original":{"line":9,"column":22},"generated":{"line":1,"column":214}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":10,"column":6},"generated":{"line":1,"column":216}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":10,"column":13},"generated":{"line":1,"column":218}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"eventStream","original":{"line":10,"column":20},"generated":{"line":1,"column":223}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":11,"column":6},"generated":{"line":1,"column":226}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":11,"column":12},"generated":{"line":1,"column":228}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":11,"column":12},"generated":{"line":1,"column":230}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":11,"column":12},"generated":{"line":1,"column":237}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":11,"column":47},"generated":{"line":1,"column":271}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":11,"column":59},"generated":{"line":1,"column":273}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":11,"column":59},"generated":{"line":1,"column":275}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":11,"column":59},"generated":{"line":1,"column":288}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":13,"column":16},"generated":{"line":1,"column":293}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":13,"column":24},"generated":{"line":1,"column":295}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":16,"column":0},"generated":{"line":1,"column":298}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"eventSource","original":{"line":16,"column":9},"generated":{"line":1,"column":307}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":16,"column":21},"generated":{"line":1,"column":309}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":17,"column":10},"generated":{"line":1,"column":312}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":17,"column":10},"generated":{"line":1,"column":319}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Scope","original":{"line":17,"column":21},"generated":{"line":1,"column":323}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":17,"column":10},"generated":{"line":1,"column":325}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"View","original":{"line":17,"column":29},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":17,"column":10},"generated":{"line":1,"column":333}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":17,"column":37},"generated":{"line":1,"column":338}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"View","original":{"line":17,"column":47},"generated":{"line":1,"column":341}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":17,"column":3},"generated":{"line":1,"column":343}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":20,"column":0},"generated":{"line":1,"column":348}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"mergeStream","original":{"line":20,"column":9},"generated":{"line":1,"column":357}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":20,"column":21},"generated":{"line":1,"column":359}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":20,"column":29},"generated":{"line":1,"column":361}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"list","original":{"line":21,"column":6},"generated":{"line":1,"column":364}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":22,"column":6},"generated":{"line":1,"column":368}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"streamParameters","original":{"line":22,"column":14},"generated":{"line":1,"column":370}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":22,"column":31},"generated":{"line":1,"column":372}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"merge","original":{"line":22,"column":32},"generated":{"line":1,"column":373}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":21,"column":13},"generated":{"line":1,"column":379}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"merge","original":{"line":21,"column":20},"generated":{"line":1,"column":381}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"map","original":{"line":21,"column":26},"generated":{"line":1,"column":387}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"s","original":{"line":21,"column":30},"generated":{"line":1,"column":391}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"parseStream","original":{"line":21,"column":35},"generated":{"line":1,"column":394}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"s","original":{"line":21,"column":47},"generated":{"line":1,"column":396}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":21,"column":50},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":22,"column":46},"generated":{"line":1,"column":403}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":22,"column":54},"generated":{"line":1,"column":405}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":23,"column":9},"generated":{"line":1,"column":408}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":23,"column":9},"generated":{"line":1,"column":415}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"addStream","original":{"line":23,"column":15},"generated":{"line":1,"column":417}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":23,"column":25},"generated":{"line":1,"column":427}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":23,"column":32},"generated":{"line":1,"column":430}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":26,"column":0},"generated":{"line":1,"column":433}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"nestedStream","original":{"line":26,"column":9},"generated":{"line":1,"column":442}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":26,"column":22},"generated":{"line":1,"column":444}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":26,"column":30},"generated":{"line":1,"column":446}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":27,"column":6},"generated":{"line":1,"column":449}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":28,"column":6},"generated":{"line":1,"column":453}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"streamParameters","original":{"line":28,"column":14},"generated":{"line":1,"column":455}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":28,"column":31},"generated":{"line":1,"column":457}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":28,"column":32},"generated":{"line":1,"column":458}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"parseStream","original":{"line":27,"column":11},"generated":{"line":1,"column":465}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":27,"column":23},"generated":{"line":1,"column":467}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":27,"column":30},"generated":{"line":1,"column":469}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":27,"column":38},"generated":{"line":1,"column":476}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":28,"column":45},"generated":{"line":1,"column":480}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":28,"column":53},"generated":{"line":1,"column":482}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":29,"column":9},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":29,"column":9},"generated":{"line":1,"column":492}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"addStream","original":{"line":29,"column":15},"generated":{"line":1,"column":494}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":29,"column":25},"generated":{"line":1,"column":504}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":29,"column":32},"generated":{"line":1,"column":507}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":32,"column":0},"generated":{"line":1,"column":510}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"eventStream","original":{"line":32,"column":9},"generated":{"line":1,"column":519}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":32,"column":21},"generated":{"line":1,"column":521}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":32,"column":29},"generated":{"line":1,"column":523}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":33,"column":6},"generated":{"line":1,"column":526}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":33,"column":6},"generated":{"line":1,"column":530}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":33,"column":10},"generated":{"line":1,"column":532}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Object","original":{"line":43,"column":9},"generated":{"line":1,"column":534}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":35,"column":6},"generated":{"line":1,"column":541}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":35,"column":13},"generated":{"line":1,"column":543}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Timer","original":{"line":35,"column":22},"generated":{"line":1,"column":550}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":36,"column":4},"generated":{"line":1,"column":553}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":36,"column":9},"generated":{"line":1,"column":555}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"event","original":{"line":36,"column":15},"generated":{"line":1,"column":557}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Timer","original":{"line":36,"column":21},"generated":{"line":1,"column":563}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":36,"column":28},"generated":{"line":1,"column":565}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"throttle","original":{"line":36,"column":35},"generated":{"line":1,"column":567}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":37,"column":4},"generated":{"line":1,"column":577}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":37,"column":13},"generated":{"line":1,"column":579}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"between","original":{"line":37,"column":14},"generated":{"line":1,"column":580}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":37,"column":23},"generated":{"line":1,"column":588}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"between","original":{"line":37,"column":30},"generated":{"line":1,"column":590}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filter","original":{"line":37,"column":39},"generated":{"line":1,"column":598}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":37,"column":47},"generated":{"line":1,"column":605}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filter","original":{"line":37,"column":54},"generated":{"line":1,"column":607}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":39,"column":4},"generated":{"line":1,"column":616}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":39,"column":9},"generated":{"line":1,"column":618}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"event","original":{"line":39,"column":15},"generated":{"line":1,"column":620}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"eventSource","original":{"line":39,"column":21},"generated":{"line":1,"column":626}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":39,"column":33},"generated":{"line":1,"column":628}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":39,"column":40},"generated":{"line":1,"column":630}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":39,"column":49},"generated":{"line":1,"column":638}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":39,"column":56},"generated":{"line":1,"column":640}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":42,"column":2},"generated":{"line":1,"column":646}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"streamParameters","original":{"line":42,"column":10},"generated":{"line":1,"column":648}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":42,"column":27},"generated":{"line":1,"column":650}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":42,"column":28},"generated":{"line":1,"column":651}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":42,"column":36},"generated":{"line":1,"column":658}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":42,"column":41},"generated":{"line":1,"column":661}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":42,"column":49},"generated":{"line":1,"column":663}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":43,"column":39},"generated":{"line":1,"column":666}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Object","original":{"line":43,"column":9},"generated":{"line":1,"column":670}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"keys","original":{"line":43,"column":16},"generated":{"line":1,"column":677}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":43,"column":21},"generated":{"line":1,"column":682}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"length","original":{"line":43,"column":28},"generated":{"line":1,"column":685}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":44,"column":6},"generated":{"line":1,"column":692}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":45,"column":6},"generated":{"line":1,"column":694}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"addStream","original":{"line":45,"column":12},"generated":{"line":1,"column":696}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":45,"column":22},"generated":{"line":1,"column":706}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"id","original":{"line":45,"column":29},"generated":{"line":1,"column":709}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":48,"column":0},"generated":{"line":1,"column":712}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"streamParameters","original":{"line":48,"column":9},"generated":{"line":1,"column":721}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":48,"column":26},"generated":{"line":1,"column":723}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":48,"column":33},"generated":{"line":1,"column":725}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":48,"column":41},"generated":{"line":1,"column":727}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":49,"column":6},"generated":{"line":1,"column":730}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":49,"column":6},"generated":{"line":1,"column":734}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":49,"column":14},"generated":{"line":1,"column":736}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"between","original":{"line":49,"column":21},"generated":{"line":1,"column":738}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":86,"column":9},"generated":{"line":1,"column":746}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":51,"column":6},"generated":{"line":1,"column":753}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":52,"column":25},"generated":{"line":1,"column":757}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":52,"column":8},"generated":{"line":1,"column":761}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"length","original":{"line":52,"column":14},"generated":{"line":1,"column":763}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":53,"column":12},"generated":{"line":1,"column":772}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":53,"column":12},"generated":{"line":1,"column":774}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":53,"column":12},"generated":{"line":1,"column":776}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":53,"column":12},"generated":{"line":1,"column":783}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":53,"column":65},"generated":{"line":1,"column":835}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":53,"column":77},"generated":{"line":1,"column":837}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":53,"column":77},"generated":{"line":1,"column":839}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":53,"column":77},"generated":{"line":1,"column":852}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":55,"column":4},"generated":{"line":1,"column":856}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"between","original":{"line":55,"column":10},"generated":{"line":1,"column":858}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":55,"column":20},"generated":{"line":1,"column":866}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"parseStream","original":{"line":56,"column":6},"generated":{"line":1,"column":867}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":56,"column":18},"generated":{"line":1,"column":869}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":56,"column":24},"generated":{"line":1,"column":871}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":56,"column":28},"generated":{"line":1,"column":874}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"parseStream","original":{"line":57,"column":6},"generated":{"line":1,"column":877}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":57,"column":18},"generated":{"line":1,"column":879}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":57,"column":24},"generated":{"line":1,"column":881}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":57,"column":28},"generated":{"line":1,"column":884}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":61,"column":2},"generated":{"line":1,"column":889}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":61,"column":10},"generated":{"line":1,"column":891}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filter","original":{"line":61,"column":17},"generated":{"line":1,"column":893}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":61,"column":26},"generated":{"line":1,"column":900}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"concat","original":{"line":61,"column":29},"generated":{"line":1,"column":903}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":61,"column":36},"generated":{"line":1,"column":910}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filter","original":{"line":61,"column":43},"generated":{"line":1,"column":912}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":61,"column":53},"generated":{"line":1,"column":920}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":62,"column":6},"generated":{"line":1,"column":924}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"marktype","original":{"line":62,"column":13},"generated":{"line":1,"column":926}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":62,"column":25},"generated":{"line":1,"column":936}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"markname","original":{"line":62,"column":32},"generated":{"line":1,"column":938}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":62,"column":44},"generated":{"line":1,"column":948}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"markrole","original":{"line":62,"column":51},"generated":{"line":1,"column":950}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":64,"column":4},"generated":{"line":1,"column":961}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"push","original":{"line":64,"column":10},"generated":{"line":1,"column":963}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filterMark","original":{"line":64,"column":15},"generated":{"line":1,"column":968}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":64,"column":26},"generated":{"line":1,"column":970}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"marktype","original":{"line":64,"column":33},"generated":{"line":1,"column":972}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":64,"column":43},"generated":{"line":1,"column":981}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"markname","original":{"line":64,"column":50},"generated":{"line":1,"column":983}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":64,"column":60},"generated":{"line":1,"column":992}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"markrole","original":{"line":64,"column":67},"generated":{"line":1,"column":994}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":66,"column":6},"generated":{"line":1,"column":1005}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"source","original":{"line":66,"column":13},"generated":{"line":1,"column":1007}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"Scope","original":{"line":66,"column":24},"generated":{"line":1,"column":1016}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":66,"column":2},"generated":{"line":1,"column":1018}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":68,"column":4},"generated":{"line":1,"column":1025}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"push","original":{"line":68,"column":10},"generated":{"line":1,"column":1027}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":68,"column":15},"generated":{"line":1,"column":1032}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":70,"column":6},"generated":{"line":1,"column":1055}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"length","original":{"line":70,"column":12},"generated":{"line":1,"column":1057}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":71,"column":4},"generated":{"line":1,"column":1066}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filter","original":{"line":71,"column":10},"generated":{"line":1,"column":1068}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":19},"generated":{"line":1,"column":1076}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":35},"generated":{"line":1,"column":1078}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":35},"generated":{"line":1,"column":1080}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":35},"generated":{"line":1,"column":1097}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":71,"column":41},"generated":{"line":1,"column":1101}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"join","original":{"line":71,"column":47},"generated":{"line":1,"column":1103}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":52},"generated":{"line":1,"column":1108}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":71,"column":62},"generated":{"line":1,"column":1116}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"scope","original":{"line":71,"column":67},"generated":{"line":1,"column":1120}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"$expr","original":{"line":71,"column":74},"generated":{"line":1,"column":1123}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":74,"column":35},"generated":{"line":1,"column":1130}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":74,"column":7},"generated":{"line":1,"column":1137}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":74,"column":15},"generated":{"line":1,"column":1139}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"throttle","original":{"line":74,"column":22},"generated":{"line":1,"column":1141}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":75,"column":4},"generated":{"line":1,"column":1153}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"throttle","original":{"line":75,"column":10},"generated":{"line":1,"column":1155}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":75,"column":22},"generated":{"line":1,"column":1165}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":78,"column":35},"generated":{"line":1,"column":1168}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":78,"column":7},"generated":{"line":1,"column":1175}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":78,"column":15},"generated":{"line":1,"column":1177}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"debounce","original":{"line":78,"column":22},"generated":{"line":1,"column":1179}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":79,"column":4},"generated":{"line":1,"column":1191}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"debounce","original":{"line":79,"column":10},"generated":{"line":1,"column":1193}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"param","original":{"line":79,"column":22},"generated":{"line":1,"column":1203}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"stream","original":{"line":82,"column":6},"generated":{"line":1,"column":1206}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"consume","original":{"line":82,"column":13},"generated":{"line":1,"column":1208}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":83,"column":4},"generated":{"line":1,"column":1218}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"consume","original":{"line":83,"column":10},"generated":{"line":1,"column":1220}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":83,"column":20},"generated":{"line":1,"column":1229}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"entry","original":{"line":86,"column":9},"generated":{"line":1,"column":1232}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1234}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"filterMark","original":{"line":89,"column":9},"generated":{"line":1,"column":1243}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":89,"column":20},"generated":{"line":1,"column":1245}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"name","original":{"line":89,"column":26},"generated":{"line":1,"column":1247}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"role","original":{"line":89,"column":32},"generated":{"line":1,"column":1249}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":90,"column":6},"generated":{"line":1,"column":1252}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":90,"column":6},"generated":{"line":1,"column":1256}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":90,"column":13},"generated":{"line":1,"column":1258}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":91,"column":9},"generated":{"line":1,"column":1271}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":91,"column":9},"generated":{"line":1,"column":1278}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":92,"column":7},"generated":{"line":1,"column":1281}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":92,"column":24},"generated":{"line":1,"column":1284}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":92,"column":15},"generated":{"line":1,"column":1290}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":92,"column":30},"generated":{"line":1,"column":1292}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":92,"column":37},"generated":{"line":1,"column":1297}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":92,"column":44},"generated":{"line":1,"column":1299}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"type","original":{"line":92,"column":68},"generated":{"line":1,"column":1320}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":92,"column":75},"generated":{"line":1,"column":1322}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":92,"column":82},"generated":{"line":1,"column":1326}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"role","original":{"line":93,"column":7},"generated":{"line":1,"column":1331}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":93,"column":14},"generated":{"line":1,"column":1333}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":93,"column":21},"generated":{"line":1,"column":1338}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":93,"column":28},"generated":{"line":1,"column":1340}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"role","original":{"line":93,"column":48},"generated":{"line":1,"column":1357}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":93,"column":55},"generated":{"line":1,"column":1359}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":93,"column":62},"generated":{"line":1,"column":1363}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"name","original":{"line":94,"column":7},"generated":{"line":1,"column":1368}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":94,"column":14},"generated":{"line":1,"column":1370}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"item","original":{"line":94,"column":21},"generated":{"line":1,"column":1375}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":94,"column":28},"generated":{"line":1,"column":1377}},{"source":"node_modules/vega-parser/src/parsers/stream.js","name":"name","original":{"line":94,"column":48},"generated":{"line":1,"column":1394}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":94,"column":55},"generated":{"line":1,"column":1396}},{"source":"node_modules/vega-parser/src/parsers/stream.js","original":{"line":94,"column":62},"generated":{"line":1,"column":1400}}],"sources":{"node_modules/vega-parser/src/parsers/stream.js":"import {Scope, View} from '../util';\nimport {parseExpression} from 'vega-functions';\nimport {error, stringValue} from 'vega-util';\n\nvar Timer = 'timer';\n\nexport default function parseStream(stream, scope) {\n  var method = stream.merge ? mergeStream\n    : stream.stream ? nestedStream\n    : stream.type ? eventStream\n    : error('Invalid stream specification: ' + stringValue(stream));\n\n  return method(stream, scope);\n}\n\nfunction eventSource(source) {\n   return source === Scope ? View : (source || View);\n}\n\nfunction mergeStream(stream, scope) {\n  var list = stream.merge.map(s => parseStream(s, scope)),\n      entry = streamParameters({merge: list}, stream, scope);\n  return scope.addStream(entry).id;\n}\n\nfunction nestedStream(stream, scope) {\n  var id = parseStream(stream.stream, scope),\n      entry = streamParameters({stream: id}, stream, scope);\n  return scope.addStream(entry).id;\n}\n\nfunction eventStream(stream, scope) {\n  var id, entry;\n\n  if (stream.type === Timer) {\n    id = scope.event(Timer, stream.throttle);\n    stream = {between: stream.between, filter: stream.filter};\n  } else {\n    id = scope.event(eventSource(stream.source), stream.type);\n  }\n\n  entry = streamParameters({stream: id}, stream, scope);\n  return Object.keys(entry).length === 1\n    ? id\n    : scope.addStream(entry).id;\n}\n\nfunction streamParameters(entry, stream, scope) {\n  var param = stream.between;\n\n  if (param) {\n    if (param.length !== 2) {\n      error('Stream \"between\" parameter must have 2 entries: ' + stringValue(stream));\n    }\n    entry.between = [\n      parseStream(param[0], scope),\n      parseStream(param[1], scope)\n    ];\n  }\n\n  param = stream.filter ? [].concat(stream.filter) : [];\n  if (stream.marktype || stream.markname || stream.markrole) {\n    // add filter for mark type, name and/or role\n    param.push(filterMark(stream.marktype, stream.markname, stream.markrole));\n  }\n  if (stream.source === Scope) {\n    // add filter to limit events from sub-scope only\n    param.push('inScope(event.item)');\n  }\n  if (param.length) {\n    entry.filter = parseExpression('(' + param.join(')&&(') + ')', scope).$expr;\n  }\n\n  if ((param = stream.throttle) != null) {\n    entry.throttle = +param;\n  }\n\n  if ((param = stream.debounce) != null) {\n    entry.debounce = +param;\n  }\n\n  if (stream.consume) {\n    entry.consume = true;\n  }\n\n  return entry;\n}\n\nfunction filterMark(type, name, role) {\n  var item = 'event.item';\n  return item\n    + (type && type !== '*' ? '&&' + item + '.mark.marktype===\\'' + type + '\\'' : '')\n    + (role ? '&&' + item + '.mark.role===\\'' + role + '\\'' : '')\n    + (name ? '&&' + item + '.mark.name===\\'' + name + '\\'' : '');\n}\n"},"lineCount":null}},"error":null,"hash":"480f58d5d6a9e9c5008e29927e47e892","cacheData":{"env":{}}}