{"id":"juYu","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/data/geojson.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974399859},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"vega-util","loc":{"line":1,"column":25},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"},{"name":"../../channel","loc":{"line":2,"column":66},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/channel.js"},{"name":"../../channeldef","loc":{"line":3,"column":71},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/channeldef.js"},{"name":"../../type","loc":{"line":4,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/type.js"},{"name":"../../util","loc":{"line":5,"column":32},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"},{"name":"./dataflow","loc":{"line":6,"column":29},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/geojson.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/dataflow.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GeoJSONNode=void 0;var e=require(\"vega-util\"),s=require(\"../../channel\"),t=require(\"../../channeldef\"),i=require(\"../../type\"),n=require(\"../../util\"),o=require(\"./dataflow\");class r extends o.DataFlowNode{constructor(e,s,t,i){super(e),this.fields=s,this.geojson=t,this.signal=i}clone(){return new r(null,(0,n.duplicate)(this.fields),this.geojson,this.signal)}static parseAll(e,n){if(n.component.projection&&!n.component.projection.isFit)return e;let o=0;for(const i of[[s.LONGITUDE,s.LATITUDE],[s.LONGITUDE2,s.LATITUDE2]]){const s=i.map(e=>{const s=(0,t.getFieldOrDatumDef)(n.encoding[e]);return(0,t.isFieldDef)(s)?s.field:(0,t.isDatumDef)(s)?{expr:`${s.datum}`}:(0,t.isValueDef)(s)?{expr:`${s.value}`}:void 0});(s[0]||s[1])&&(e=new r(e,s,null,n.getName(`geojson_${o++}`)))}if(n.channelHasField(s.SHAPE)){const t=n.typedFieldDef(s.SHAPE);t.type===i.GEOJSON&&(e=new r(e,null,t.field,n.getName(`geojson_${o++}`)))}return e}dependentFields(){var s;const t=(null!==(s=this.fields)&&void 0!==s?s:[]).filter(e.isString);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${(0,n.hash)(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:\"geojson\"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}exports.GeoJSONNode=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":93}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":95}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":99}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":101}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":109}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":122}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":124}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":132}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":149}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":151}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":159}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":181}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":189}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":203}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":205}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":213}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":227}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":229}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":237}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":6},"generated":{"line":1,"column":251}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":13},"generated":{"line":1,"column":257}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":33},"generated":{"line":1,"column":267}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":6},"generated":{"line":1,"column":269}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":282}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":1,"column":294}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":296}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":298}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":300}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":303}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":309}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":312}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":317}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":324}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":326}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":331}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":339}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":341}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":346}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":353}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":12,"column":9},"generated":{"line":1,"column":355}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":363}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":11},"generated":{"line":1,"column":370}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":374}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":27},"generated":{"line":1,"column":376}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":33},"generated":{"line":1,"column":382}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":43},"generated":{"line":1,"column":384}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":43},"generated":{"line":1,"column":386}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":43},"generated":{"line":1,"column":397}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":48},"generated":{"line":1,"column":402}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":57},"generated":{"line":1,"column":410}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":62},"generated":{"line":1,"column":415}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":71},"generated":{"line":1,"column":423}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":13,"column":76},"generated":{"line":1,"column":428}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":16,"column":16},"generated":{"line":1,"column":436}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":16,"column":25},"generated":{"line":1,"column":452}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":16,"column":47},"generated":{"line":1,"column":454}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":457}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":460}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":14},"generated":{"line":1,"column":462}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":24},"generated":{"line":1,"column":472}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":39},"generated":{"line":1,"column":485}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":45},"generated":{"line":1,"column":487}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":55},"generated":{"line":1,"column":497}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":17,"column":66},"generated":{"line":1,"column":508}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":1,"column":514}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":1,"column":521}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":523}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":527}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":21,"column":25},"generated":{"line":1,"column":529}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":1,"column":531}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":1,"column":535}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":23,"column":15},"generated":{"line":1,"column":541}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":23,"column":30},"generated":{"line":1,"column":545}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":24,"column":6},"generated":{"line":1,"column":546}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":24,"column":7},"generated":{"line":1,"column":547}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":24,"column":6},"generated":{"line":1,"column":549}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":24,"column":18},"generated":{"line":1,"column":559}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":24,"column":6},"generated":{"line":1,"column":561}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":571}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":25,"column":7},"generated":{"line":1,"column":572}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":574}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":25,"column":19},"generated":{"line":1,"column":585}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":25,"column":6},"generated":{"line":1,"column":587}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":26,"column":40},"generated":{"line":1,"column":599}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":1,"column":600}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":1,"column":606}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":608}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":27,"column":31},"generated":{"line":1,"column":610}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":27,"column":35},"generated":{"line":1,"column":614}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":618}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":14},"generated":{"line":1,"column":624}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":1,"column":627}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":629}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":631}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":651}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":45},"generated":{"line":1,"column":653}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":28,"column":54},"generated":{"line":1,"column":662}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":29,"column":15},"generated":{"line":1,"column":666}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":29,"column":15},"generated":{"line":1,"column":673}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":29,"column":26},"generated":{"line":1,"column":675}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":29,"column":26},"generated":{"line":1,"column":677}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":29,"column":26},"generated":{"line":1,"column":689}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":1,"column":692}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":30,"column":16},"generated":{"line":1,"column":694}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":31,"column":12},"generated":{"line":1,"column":701}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":703}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":705}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":31,"column":23},"generated":{"line":1,"column":717}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":32,"column":12},"generated":{"line":1,"column":720}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":1,"column":721}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":32,"column":22},"generated":{"line":1,"column":729}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":32,"column":26},"generated":{"line":1,"column":731}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":33,"column":12},"generated":{"line":1,"column":741}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":743}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":745}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":33,"column":23},"generated":{"line":1,"column":757}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":34,"column":12},"generated":{"line":1,"column":760}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":761}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":34,"column":22},"generated":{"line":1,"column":769}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":34,"column":25},"generated":{"line":1,"column":771}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":35,"column":12},"generated":{"line":1,"column":785}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":790}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":38,"column":15},"generated":{"line":1,"column":792}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":38,"column":21},"generated":{"line":1,"column":796}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":38,"column":26},"generated":{"line":1,"column":798}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":804}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":17},"generated":{"line":1,"column":806}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":1,"column":810}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":33},"generated":{"line":1,"column":812}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":41},"generated":{"line":1,"column":814}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":47},"generated":{"line":1,"column":816}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":53},"generated":{"line":1,"column":821}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":59},"generated":{"line":1,"column":823}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":39,"column":78},"generated":{"line":1,"column":842}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":851}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":854}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":856}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":30},"generated":{"line":1,"column":872}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":1,"column":874}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":43,"column":38},"generated":{"line":1,"column":881}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":1,"column":882}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":12},"generated":{"line":1,"column":888}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":1,"column":890}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":29},"generated":{"line":1,"column":892}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":43},"generated":{"line":1,"column":906}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":1,"column":908}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":1,"column":915}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":45,"column":19},"generated":{"line":1,"column":917}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":45,"column":28},"generated":{"line":1,"column":924}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":45,"column":6},"generated":{"line":1,"column":926}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":936}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":17},"generated":{"line":1,"column":938}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":942}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":33},"generated":{"line":1,"column":944}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":41},"generated":{"line":1,"column":946}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":47},"generated":{"line":1,"column":951}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":56},"generated":{"line":1,"column":953}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":63},"generated":{"line":1,"column":959}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":69},"generated":{"line":1,"column":961}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":46,"column":88},"generated":{"line":1,"column":980}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":989}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":996}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":998}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":1016}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":1020}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":1022}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":1028}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":1031}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":19},"generated":{"line":1,"column":1039}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":20},"generated":{"line":1,"column":1041}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":25},"generated":{"line":1,"column":1046}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":1060}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":1064}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":31},"generated":{"line":1,"column":1066}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":35},"generated":{"line":1,"column":1068}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":39},"generated":{"line":1,"column":1072}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":46},"generated":{"line":1,"column":1079}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":63,"column":19},"generated":{"line":1,"column":1081}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":1091}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":11},"generated":{"line":1,"column":1098}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":15},"generated":{"line":1,"column":1102}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":19},"generated":{"line":1,"column":1106}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":24},"generated":{"line":1,"column":1110}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":29},"generated":{"line":1,"column":1115}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":39},"generated":{"line":1,"column":1123}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":40},"generated":{"line":1,"column":1124}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":45},"generated":{"line":1,"column":1129}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":56},"generated":{"line":1,"column":1138}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":64,"column":64},"generated":{"line":1,"column":1144}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":67,"column":9},"generated":{"line":1,"column":1148}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":1165}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":68,"column":11},"generated":{"line":1,"column":1172}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":68,"column":15},"generated":{"line":1,"column":1176}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":71,"column":9},"generated":{"line":1,"column":1180}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":1187}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":1,"column":1204}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":27},"generated":{"line":1,"column":1209}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":38},"generated":{"line":1,"column":1220}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":43},"generated":{"line":1,"column":1225}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":53},"generated":{"line":1,"column":1236}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":58},"generated":{"line":1,"column":1238}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":58},"generated":{"line":1,"column":1240}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":58},"generated":{"line":1,"column":1246}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":72,"column":63},"generated":{"line":1,"column":1251}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":1,"column":1261}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1272}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1279}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1286}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1293}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1300}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1307}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1314}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":1321}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":77,"column":6},"generated":{"line":1,"column":1322}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":1,"column":1327}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":10},"generated":{"line":1,"column":1338}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":15},"generated":{"line":1,"column":1343}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":24},"generated":{"line":1,"column":1350}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":25},"generated":{"line":1,"column":1351}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":33},"generated":{"line":1,"column":1358}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":38},"generated":{"line":1,"column":1363}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":78,"column":48},"generated":{"line":1,"column":1371}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":1375}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":15},"generated":{"line":1,"column":1380}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":1388}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":26},"generated":{"line":1,"column":1389}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":35},"generated":{"line":1,"column":1397}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":40},"generated":{"line":1,"column":1402}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":51},"generated":{"line":1,"column":1411}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":79,"column":54},"generated":{"line":1,"column":1415}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":80,"column":6},"generated":{"line":1,"column":1416}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":80,"column":14},"generated":{"line":1,"column":1423}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":80,"column":19},"generated":{"line":1,"column":1428}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":1438}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":1446}},{"source":"../../../../src/compile/data/geojson.ts","name":null,"original":{"line":11,"column":45},"generated":{"line":1,"column":1458}}],"sources":{"../../../../src/compile/data/geojson.ts":"import {GeoJSONTransform as VgGeoJSONTransform, Vector2} from 'vega';\nimport {isString} from 'vega-util';\nimport {GeoPositionChannel, LATITUDE, LATITUDE2, LONGITUDE, LONGITUDE2, SHAPE} from '../../channel';\nimport {getFieldOrDatumDef, isDatumDef, isFieldDef, isValueDef} from '../../channeldef';\nimport {GEOJSON} from '../../type';\nimport {duplicate, hash} from '../../util';\nimport {VgExprRef} from '../../vega.schema';\nimport {UnitModel} from '../unit';\nimport {DataFlowNode} from './dataflow';\n\nexport class GeoJSONNode extends DataFlowNode {\n  public clone() {\n    return new GeoJSONNode(null, duplicate(this.fields), this.geojson, this.signal);\n  }\n\n  public static parseAll(parent: DataFlowNode, model: UnitModel): DataFlowNode {\n    if (model.component.projection && !model.component.projection.isFit) {\n      return parent;\n    }\n\n    let geoJsonCounter = 0;\n\n    for (const coordinates of [\n      [LONGITUDE, LATITUDE],\n      [LONGITUDE2, LATITUDE2]\n    ] as Vector2<GeoPositionChannel>[]) {\n      const pair = coordinates.map(channel => {\n        const def = getFieldOrDatumDef(model.encoding[channel]);\n        return isFieldDef(def)\n          ? def.field\n          : isDatumDef(def)\n          ? {expr: `${def.datum}`}\n          : isValueDef(def)\n          ? {expr: `${def['value']}`}\n          : undefined;\n      }) as [GeoPositionChannel, GeoPositionChannel];\n\n      if (pair[0] || pair[1]) {\n        parent = new GeoJSONNode(parent, pair, null, model.getName(`geojson_${geoJsonCounter++}`));\n      }\n    }\n\n    if (model.channelHasField(SHAPE)) {\n      const fieldDef = model.typedFieldDef(SHAPE);\n      if (fieldDef.type === GEOJSON) {\n        parent = new GeoJSONNode(parent, null, fieldDef.field, model.getName(`geojson_${geoJsonCounter++}`));\n      }\n    }\n\n    return parent;\n  }\n\n  constructor(\n    parent: DataFlowNode,\n    private fields?: Vector2<string | VgExprRef>,\n    private geojson?: string,\n    private signal?: string\n  ) {\n    super(parent);\n  }\n\n  public dependentFields() {\n    const fields = (this.fields ?? []).filter(isString) as string[];\n    return new Set([...(this.geojson ? [this.geojson] : []), ...fields]);\n  }\n\n  public producedFields() {\n    return new Set<string>();\n  }\n\n  public hash() {\n    return `GeoJSON ${this.geojson} ${this.signal} ${hash(this.fields)}`;\n  }\n\n  public assemble(): VgGeoJSONTransform {\n    return {\n      type: 'geojson',\n      ...(this.fields ? {fields: this.fields} : {}),\n      ...(this.geojson ? {geojson: this.geojson} : {}),\n      signal: this.signal\n    };\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"6763b03272a298d3477bed17aaea5cda","cacheData":{"env":{}}}