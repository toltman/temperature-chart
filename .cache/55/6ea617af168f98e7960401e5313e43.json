{"id":"x5CK","dependencies":[{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974399859},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-view-transforms/package.json","includedInParent":true,"mtime":1591969205220},{"name":"vega-dataflow","loc":{"line":1,"column":24},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-view-transforms/src/Identifier.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-dataflow/index.js"},{"name":"vega-util","loc":{"line":2,"column":23},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-view-transforms/src/Identifier.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-util/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=t;var e=require(\"vega-dataflow\"),a=require(\"vega-util\"),r=\":vega_identifier:\";function t(a){e.Transform.call(this,0,a)}t.Definition={type:\"Identifier\",metadata:{modifies:!0},params:[{name:\"as\",type:\"string\",required:!0}]};var i=(0,a.inherits)(t,e.Transform);function s(e){var a=e._signals[r];return a||(e._signals[r]=a=e.add(0)),a}i.transform=function(e,a){var r=s(a.dataflow),t=r.value,i=e.as;return a.visit(a.ADD,e=>{e[i]||(e[i]=++t)}),r.set(this.value=t),a};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":50,"column":1},"generated":{"line":1,"column":84}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"COUNTER_NAME","original":{"line":4,"column":4},"generated":{"line":1,"column":140}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":4,"column":19},"generated":{"line":1,"column":142}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":17,"column":15},"generated":{"line":1,"column":162}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Identifier","original":{"line":17,"column":24},"generated":{"line":1,"column":171}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"params","original":{"line":17,"column":35},"generated":{"line":1,"column":173}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"call","original":{"line":18,"column":12},"generated":{"line":1,"column":176}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"call","original":{"line":18,"column":12},"generated":{"line":1,"column":178}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"call","original":{"line":18,"column":12},"generated":{"line":1,"column":188}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":18,"column":17},"generated":{"line":1,"column":193}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":18,"column":23},"generated":{"line":1,"column":198}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"params","original":{"line":18,"column":26},"generated":{"line":1,"column":200}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Identifier","original":{"line":21,"column":0},"generated":{"line":1,"column":203}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Definition","original":{"line":21,"column":11},"generated":{"line":1,"column":205}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":21,"column":24},"generated":{"line":1,"column":216}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":22,"column":10},"generated":{"line":1,"column":217}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":22,"column":10},"generated":{"line":1,"column":222}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":23,"column":14},"generated":{"line":1,"column":235}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":23,"column":14},"generated":{"line":1,"column":244}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":23,"column":27},"generated":{"line":1,"column":245}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":23,"column":27},"generated":{"line":1,"column":255}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":24,"column":12},"generated":{"line":1,"column":258}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":24,"column":12},"generated":{"line":1,"column":265}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":4},"generated":{"line":1,"column":266}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":14},"generated":{"line":1,"column":267}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":14},"generated":{"line":1,"column":272}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":28},"generated":{"line":1,"column":277}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":28},"generated":{"line":1,"column":282}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":50},"generated":{"line":1,"column":291}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":25,"column":50},"generated":{"line":1,"column":301}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":29,"column":0},"generated":{"line":1,"column":306}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"prototype","original":{"line":29,"column":4},"generated":{"line":1,"column":310}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":29,"column":16},"generated":{"line":1,"column":313}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Identifier","original":{"line":29,"column":25},"generated":{"line":1,"column":315}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Identifier","original":{"line":29,"column":25},"generated":{"line":1,"column":317}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Identifier","original":{"line":29,"column":25},"generated":{"line":1,"column":327}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"Transform","original":{"line":29,"column":37},"generated":{"line":1,"column":329}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":29,"column":16},"generated":{"line":1,"column":331}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":44,"column":0},"generated":{"line":1,"column":342}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"getCounter","original":{"line":44,"column":9},"generated":{"line":1,"column":351}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"view","original":{"line":44,"column":20},"generated":{"line":1,"column":353}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":45,"column":6},"generated":{"line":1,"column":356}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":45,"column":6},"generated":{"line":1,"column":360}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"view","original":{"line":45,"column":16},"generated":{"line":1,"column":362}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"_signals","original":{"line":45,"column":21},"generated":{"line":1,"column":364}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"COUNTER_NAME","original":{"line":45,"column":30},"generated":{"line":1,"column":373}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":49,"column":9},"generated":{"line":1,"column":376}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":46,"column":7},"generated":{"line":1,"column":383}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"view","original":{"line":47,"column":4},"generated":{"line":1,"column":387}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"_signals","original":{"line":47,"column":9},"generated":{"line":1,"column":389}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"COUNTER_NAME","original":{"line":47,"column":18},"generated":{"line":1,"column":398}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":47,"column":35},"generated":{"line":1,"column":401}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"view","original":{"line":47,"column":45},"generated":{"line":1,"column":403}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"add","original":{"line":47,"column":50},"generated":{"line":1,"column":405}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":47,"column":54},"generated":{"line":1,"column":409}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":49,"column":9},"generated":{"line":1,"column":413}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"prototype","original":{"line":31,"column":0},"generated":{"line":1,"column":415}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"transform","original":{"line":31,"column":10},"generated":{"line":1,"column":417}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":31,"column":22},"generated":{"line":1,"column":427}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"_","original":{"line":31,"column":31},"generated":{"line":1,"column":436}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":31,"column":34},"generated":{"line":1,"column":438}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":32,"column":6},"generated":{"line":1,"column":441}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":32,"column":6},"generated":{"line":1,"column":445}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"getCounter","original":{"line":32,"column":16},"generated":{"line":1,"column":447}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":32,"column":27},"generated":{"line":1,"column":449}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"dataflow","original":{"line":32,"column":33},"generated":{"line":1,"column":451}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"id","original":{"line":33,"column":6},"generated":{"line":1,"column":461}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":33,"column":11},"generated":{"line":1,"column":463}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"value","original":{"line":33,"column":19},"generated":{"line":1,"column":465}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"as","original":{"line":34,"column":6},"generated":{"line":1,"column":471}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"_","original":{"line":34,"column":11},"generated":{"line":1,"column":473}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"as","original":{"line":34,"column":13},"generated":{"line":1,"column":475}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":41,"column":9},"generated":{"line":1,"column":478}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":36,"column":2},"generated":{"line":1,"column":485}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"visit","original":{"line":36,"column":8},"generated":{"line":1,"column":487}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":36,"column":14},"generated":{"line":1,"column":493}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"ADD","original":{"line":36,"column":20},"generated":{"line":1,"column":495}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"t","original":{"line":36,"column":25},"generated":{"line":1,"column":499}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"t","original":{"line":37,"column":9},"generated":{"line":1,"column":503}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"as","original":{"line":37,"column":11},"generated":{"line":1,"column":505}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"t","original":{"line":37,"column":16},"generated":{"line":1,"column":510}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"as","original":{"line":37,"column":18},"generated":{"line":1,"column":512}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"id","original":{"line":37,"column":26},"generated":{"line":1,"column":517}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"counter","original":{"line":40,"column":2},"generated":{"line":1,"column":522}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"set","original":{"line":40,"column":10},"generated":{"line":1,"column":524}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","original":{"line":40,"column":14},"generated":{"line":1,"column":528}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"value","original":{"line":40,"column":19},"generated":{"line":1,"column":533}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"id","original":{"line":40,"column":27},"generated":{"line":1,"column":539}},{"source":"node_modules/vega-view-transforms/src/Identifier.js","name":"pulse","original":{"line":41,"column":9},"generated":{"line":1,"column":542}}],"sources":{"node_modules/vega-view-transforms/src/Identifier.js":"import {Transform} from 'vega-dataflow';\nimport {inherits} from 'vega-util';\n\nvar COUNTER_NAME = ':vega_identifier:';\n\n/**\n * Adds a unique identifier to all added tuples.\n * This transform creates a new signal that serves as an id counter.\n * As a result, the id counter is shared across all instances of this\n * transform, generating unique ids across multiple data streams. In\n * addition, this signal value can be included in a snapshot of the\n * dataflow state, enabling correct resumption of id allocation.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {string} params.as - The field name for the generated identifier.\n */\nexport default function Identifier(params) {\n  Transform.call(this, 0, params);\n}\n\nIdentifier.Definition = {\n  'type': 'Identifier',\n  'metadata': {'modifies': true},\n  'params': [\n    { 'name': 'as', 'type': 'string', 'required': true }\n  ]\n};\n\nvar prototype = inherits(Identifier, Transform);\n\nprototype.transform = function(_, pulse) {\n  var counter = getCounter(pulse.dataflow),\n      id = counter.value,\n      as = _.as;\n\n  pulse.visit(pulse.ADD, t => {\n    if (!t[as]) t[as] = ++id;\n  });\n\n  counter.set(this.value = id);\n  return pulse;\n};\n\nfunction getCounter(view) {\n  var counter = view._signals[COUNTER_NAME];\n  if (!counter) {\n    view._signals[COUNTER_NAME] = (counter = view.add(0));\n  }\n  return counter;\n}\n"},"lineCount":null}},"error":null,"hash":"cdfa487c270bed619636c79ff5f789e6","cacheData":{"env":{}}}