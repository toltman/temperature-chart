{"id":"jXYE","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/dataflow.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/data/dataflow.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591970318768},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"../../util","loc":{"line":1,"column":25},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/dataflow.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/util.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.OutputNode=exports.DataFlowNode=void 0;var e=require(\"../../util\");class t{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error(\"Cannot clone node\")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.indexOf(e)>-1?console.warn(\"Attempt to add the same child twice.\"):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const s of this._children)s.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}exports.DataFlowNode=t;class s extends t{constructor(e,t,s,r){super(e,t),this.type=s,this.refCounts=r,this._source=this._name=t,!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=\"clone_\"+this.debugName,e._source=this._source,e._name=\"clone_\"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${(0,e.uniqueId)()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}exports.OutputNode=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":87}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":95}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":113}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":1,"column":143}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":7,"column":22},"generated":{"line":1,"column":149}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":151}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":14},"generated":{"line":1,"column":163}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":52},"generated":{"line":1,"column":165}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":52},"generated":{"line":1,"column":168}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":52},"generated":{"line":1,"column":173}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":14,"column":52},"generated":{"line":1,"column":183}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":185}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":8,"column":10},"generated":{"line":1,"column":190}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":8,"column":38},"generated":{"line":1,"column":200}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":203}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":10,"column":10},"generated":{"line":1,"column":208}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":10,"column":34},"generated":{"line":1,"column":216}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":221}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":16,"column":11},"generated":{"line":1,"column":225}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":16,"column":11},"generated":{"line":1,"column":230}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":237}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":1,"column":240}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":248}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":24,"column":10},"generated":{"line":1,"column":254}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":24,"column":14},"generated":{"line":1,"column":258}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":264}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":1,"column":285}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":298}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":43,"column":11},"generated":{"line":1,"column":305}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":1,"column":310}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":1,"column":318}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":49,"column":13},"generated":{"line":1,"column":329}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":50,"column":9},"generated":{"line":1,"column":332}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":50,"column":9},"generated":{"line":1,"column":337}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":50,"column":19},"generated":{"line":1,"column":345}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":347}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":350}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":52,"column":13},"generated":{"line":1,"column":352}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":52,"column":22},"generated":{"line":1,"column":361}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":56,"column":6},"generated":{"line":1,"column":367}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":382}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":389}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":57,"column":16},"generated":{"line":1,"column":394}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":60,"column":9},"generated":{"line":1,"column":404}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":418}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":425}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":61,"column":16},"generated":{"line":1,"column":430}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":61,"column":26},"generated":{"line":1,"column":440}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":64,"column":9},"generated":{"line":1,"column":447}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":64,"column":18},"generated":{"line":1,"column":456}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":64,"column":39},"generated":{"line":1,"column":458}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":66,"column":8},"generated":{"line":1,"column":461}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":466}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":66,"column":23},"generated":{"line":1,"column":476}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":66,"column":31},"generated":{"line":1,"column":484}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":66,"column":41},"generated":{"line":1,"column":488}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":1,"column":490}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":67,"column":14},"generated":{"line":1,"column":498}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":67,"column":19},"generated":{"line":1,"column":503}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":71,"column":16},"generated":{"line":1,"column":548}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":552}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":554}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":559}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":21},"generated":{"line":1,"column":569}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":28},"generated":{"line":1,"column":576}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":33},"generated":{"line":1,"column":578}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":72,"column":36},"generated":{"line":1,"column":580}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":583}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":588}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":1,"column":598}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":603}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":78,"column":9},"generated":{"line":1,"column":606}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":78,"column":21},"generated":{"line":1,"column":618}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":621}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":627}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":16},"generated":{"line":1,"column":629}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":21},"generated":{"line":1,"column":634}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":31},"generated":{"line":1,"column":644}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":79,"column":39},"generated":{"line":1,"column":652}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":81,"column":11},"generated":{"line":1,"column":655}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":662}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":667}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":80,"column":19},"generated":{"line":1,"column":677}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":80,"column":26},"generated":{"line":1,"column":684}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":80,"column":31},"generated":{"line":1,"column":686}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":81,"column":11},"generated":{"line":1,"column":689}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":87,"column":9},"generated":{"line":1,"column":691}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":700}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":8},"generated":{"line":1,"column":704}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":14},"generated":{"line":1,"column":706}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":19},"generated":{"line":1,"column":711}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":27},"generated":{"line":1,"column":719}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":88,"column":39},"generated":{"line":1,"column":731}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":89,"column":9},"generated":{"line":1,"column":737}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":89,"column":9},"generated":{"line":1,"column":741}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":89,"column":15},"generated":{"line":1,"column":747}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":89,"column":24},"generated":{"line":1,"column":752}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":89,"column":29},"generated":{"line":1,"column":757}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":91,"column":6},"generated":{"line":1,"column":767}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":91,"column":12},"generated":{"line":1,"column":769}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":91,"column":22},"generated":{"line":1,"column":777}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":91,"column":27},"generated":{"line":1,"column":782}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":790}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":92,"column":11},"generated":{"line":1,"column":795}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":92,"column":19},"generated":{"line":1,"column":803}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":92,"column":28},"generated":{"line":1,"column":812}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":92,"column":35},"generated":{"line":1,"column":814}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":99,"column":9},"generated":{"line":1,"column":819}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":99,"column":26},"generated":{"line":1,"column":836}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":100,"column":10},"generated":{"line":1,"column":839}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":100,"column":10},"generated":{"line":1,"column":845}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":100,"column":19},"generated":{"line":1,"column":847}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":100,"column":25},"generated":{"line":1,"column":849}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":856}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":101,"column":11},"generated":{"line":1,"column":858}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":101,"column":23},"generated":{"line":1,"column":870}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":876}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":102,"column":9},"generated":{"line":1,"column":881}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":102,"column":18},"generated":{"line":1,"column":888}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":890}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":103,"column":10},"generated":{"line":1,"column":892}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":103,"column":19},"generated":{"line":1,"column":899}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":1,"column":904}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":1,"column":921}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":107,"column":10},"generated":{"line":1,"column":927}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":107,"column":19},"generated":{"line":1,"column":929}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":107,"column":24},"generated":{"line":1,"column":934}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":108,"column":10},"generated":{"line":1,"column":942}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":108,"column":22},"generated":{"line":1,"column":944}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":108,"column":29},"generated":{"line":1,"column":946}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":111,"column":9},"generated":{"line":1,"column":953}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":111,"column":9},"generated":{"line":1,"column":957}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":111,"column":15},"generated":{"line":1,"column":963}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":111,"column":24},"generated":{"line":1,"column":968}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":111,"column":29},"generated":{"line":1,"column":973}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":112,"column":6},"generated":{"line":1,"column":983}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":112,"column":12},"generated":{"line":1,"column":985}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":112,"column":21},"generated":{"line":1,"column":992}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":116,"column":9},"generated":{"line":1,"column":994}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":116,"column":9},"generated":{"line":1,"column":999}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":116,"column":21},"generated":{"line":1,"column":1009}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":1012}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":117,"column":11},"generated":{"line":1,"column":1014}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":117,"column":23},"generated":{"line":1,"column":1026}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":118,"column":4},"generated":{"line":1,"column":1032}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":118,"column":11},"generated":{"line":1,"column":1034}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":118,"column":18},"generated":{"line":1,"column":1041}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":118,"column":30},"generated":{"line":1,"column":1053}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":121,"column":9},"generated":{"line":1,"column":1056}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":121,"column":9},"generated":{"line":1,"column":1061}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":121,"column":18},"generated":{"line":1,"column":1068}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":122,"column":4},"generated":{"line":1,"column":1070}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":1072}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":122,"column":20},"generated":{"line":1,"column":1079}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1085}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1093}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1106}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":6},"generated":{"line":1,"column":1108}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":13},"generated":{"line":1,"column":1114}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":32},"generated":{"line":1,"column":1124}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":147,"column":2},"generated":{"line":1,"column":1126}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":148,"column":4},"generated":{"line":1,"column":1138}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":149,"column":4},"generated":{"line":1,"column":1140}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":150,"column":20},"generated":{"line":1,"column":1142}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":151,"column":21},"generated":{"line":1,"column":1144}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":153,"column":10},"generated":{"line":1,"column":1147}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":153,"column":10},"generated":{"line":1,"column":1153}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":153,"column":18},"generated":{"line":1,"column":1155}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":150,"column":20},"generated":{"line":1,"column":1158}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":150,"column":20},"generated":{"line":1,"column":1163}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":150,"column":20},"generated":{"line":1,"column":1168}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":151,"column":21},"generated":{"line":1,"column":1170}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":151,"column":21},"generated":{"line":1,"column":1175}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":151,"column":21},"generated":{"line":1,"column":1185}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":155,"column":9},"generated":{"line":1,"column":1187}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":155,"column":9},"generated":{"line":1,"column":1192}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":155,"column":19},"generated":{"line":1,"column":1200}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":155,"column":24},"generated":{"line":1,"column":1205}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":155,"column":32},"generated":{"line":1,"column":1211}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":8},"generated":{"line":1,"column":1214}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":13},"generated":{"line":1,"column":1219}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":28},"generated":{"line":1,"column":1230}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":33},"generated":{"line":1,"column":1235}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":42},"generated":{"line":1,"column":1244}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":157,"column":47},"generated":{"line":1,"column":1249}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":158,"column":11},"generated":{"line":1,"column":1261}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":158,"column":11},"generated":{"line":1,"column":1266}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":158,"column":21},"generated":{"line":1,"column":1276}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":158,"column":26},"generated":{"line":1,"column":1281}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":158,"column":35},"generated":{"line":1,"column":1288}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":131,"column":9},"generated":{"line":1,"column":1291}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":132,"column":10},"generated":{"line":1,"column":1299}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":132,"column":10},"generated":{"line":1,"column":1305}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":132,"column":21},"generated":{"line":1,"column":1307}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":132,"column":26},"generated":{"line":1,"column":1311}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":132,"column":31},"generated":{"line":1,"column":1316}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":139,"column":11},"generated":{"line":1,"column":1328}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":133,"column":4},"generated":{"line":1,"column":1335}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":133,"column":13},"generated":{"line":1,"column":1337}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":133,"column":25},"generated":{"line":1,"column":1347}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":133,"column":36},"generated":{"line":1,"column":1356}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":133,"column":41},"generated":{"line":1,"column":1361}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":134,"column":4},"generated":{"line":1,"column":1371}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":134,"column":13},"generated":{"line":1,"column":1373}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":134,"column":23},"generated":{"line":1,"column":1381}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":134,"column":28},"generated":{"line":1,"column":1386}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":135,"column":4},"generated":{"line":1,"column":1394}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":135,"column":13},"generated":{"line":1,"column":1396}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":135,"column":21},"generated":{"line":1,"column":1402}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":135,"column":32},"generated":{"line":1,"column":1411}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":135,"column":37},"generated":{"line":1,"column":1416}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":1,"column":1422}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":136,"column":13},"generated":{"line":1,"column":1424}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":136,"column":20},"generated":{"line":1,"column":1429}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":136,"column":25},"generated":{"line":1,"column":1434}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":137,"column":4},"generated":{"line":1,"column":1439}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":137,"column":13},"generated":{"line":1,"column":1441}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":137,"column":25},"generated":{"line":1,"column":1451}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":137,"column":30},"generated":{"line":1,"column":1456}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":138,"column":4},"generated":{"line":1,"column":1466}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":138,"column":13},"generated":{"line":1,"column":1468}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":138,"column":23},"generated":{"line":1,"column":1478}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":138,"column":32},"generated":{"line":1,"column":1480}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":138,"column":41},"generated":{"line":1,"column":1487}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":139,"column":11},"generated":{"line":1,"column":1489}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":162,"column":9},"generated":{"line":1,"column":1491}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":163,"column":11},"generated":{"line":1,"column":1509}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":163,"column":11},"generated":{"line":1,"column":1516}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":163,"column":15},"generated":{"line":1,"column":1520}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":166,"column":9},"generated":{"line":1,"column":1524}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":167,"column":11},"generated":{"line":1,"column":1541}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":167,"column":11},"generated":{"line":1,"column":1548}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":167,"column":15},"generated":{"line":1,"column":1552}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":170,"column":9},"generated":{"line":1,"column":1556}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":174,"column":11},"generated":{"line":1,"column":1563}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":171,"column":23},"generated":{"line":1,"column":1575}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":171,"column":8},"generated":{"line":1,"column":1579}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":171,"column":13},"generated":{"line":1,"column":1584}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":172,"column":11},"generated":{"line":1,"column":1592}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":172,"column":11},"generated":{"line":1,"column":1597}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":172,"column":29},"generated":{"line":1,"column":1614}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":172,"column":39},"generated":{"line":1,"column":1616}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":172,"column":39},"generated":{"line":1,"column":1618}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":174,"column":11},"generated":{"line":1,"column":1633}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":174,"column":16},"generated":{"line":1,"column":1638}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":186,"column":9},"generated":{"line":1,"column":1644}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":188,"column":11},"generated":{"line":1,"column":1656}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":187,"column":9},"generated":{"line":1,"column":1663}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":187,"column":9},"generated":{"line":1,"column":1668}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":187,"column":19},"generated":{"line":1,"column":1678}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":187,"column":24},"generated":{"line":1,"column":1683}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":188,"column":11},"generated":{"line":1,"column":1692}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":188,"column":16},"generated":{"line":1,"column":1697}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":191,"column":9},"generated":{"line":1,"column":1705}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":192,"column":11},"generated":{"line":1,"column":1718}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":192,"column":13},"generated":{"line":1,"column":1726}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":192,"column":18},"generated":{"line":1,"column":1731}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":192,"column":28},"generated":{"line":1,"column":1741}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":192,"column":33},"generated":{"line":1,"column":1746}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":195,"column":9},"generated":{"line":1,"column":1753}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":195,"column":19},"generated":{"line":1,"column":1763}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":196,"column":9},"generated":{"line":1,"column":1766}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":196,"column":9},"generated":{"line":1,"column":1771}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":196,"column":19},"generated":{"line":1,"column":1779}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1782}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1790}},{"source":"../../../../src/compile/data/dataflow.ts","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":1801}}],"sources":{"../../../../src/compile/data/dataflow.ts":"import {DataSourceType} from '../../data';\nimport {Dict, uniqueId} from '../../util';\n\n/**\n * A node in the dataflow tree.\n */\nexport abstract class DataFlowNode {\n  private _children: DataFlowNode[] = [];\n\n  private _parent: DataFlowNode = null;\n\n  protected _hash: string | number;\n\n  constructor(parent: DataFlowNode, public readonly debugName?: string) {\n    if (parent) {\n      this.parent = parent;\n    }\n  }\n\n  /**\n   * Clone this node with a deep copy but don't clone links to children or parents.\n   */\n  public clone(): DataFlowNode {\n    throw new Error('Cannot clone node');\n  }\n\n  /**\n   * Return a hash of the node.\n   */\n  public abstract hash(): string | number;\n\n  /**\n   * Set of fields that this node depends on.\n   */\n  public abstract dependentFields(): Set<string>;\n\n  /**\n   * Set of fields that are being created by this node.\n   */\n  public abstract producedFields(): Set<string>;\n\n  get parent() {\n    return this._parent;\n  }\n\n  /**\n   * Set the parent of the node and also add this node to the parent's children.\n   */\n  set parent(parent: DataFlowNode) {\n    this._parent = parent;\n    if (parent) {\n      parent.addChild(this);\n    }\n  }\n\n  get children() {\n    return this._children;\n  }\n\n  public numChildren() {\n    return this._children.length;\n  }\n\n  public addChild(child: DataFlowNode, loc?: number) {\n    // do not add the same child twice\n    if (this._children.indexOf(child) > -1) {\n      console.warn('Attempt to add the same child twice.');\n      return;\n    }\n\n    if (loc !== undefined) {\n      this._children.splice(loc, 0, child);\n    } else {\n      this._children.push(child);\n    }\n  }\n\n  public removeChild(oldChild: DataFlowNode) {\n    const loc = this._children.indexOf(oldChild);\n    this._children.splice(loc, 1);\n    return loc;\n  }\n\n  /**\n   * Remove node from the dataflow.\n   */\n  public remove() {\n    let loc = this._parent.removeChild(this);\n    for (const child of this._children) {\n      // do not use the set method because we want to insert at a particular location\n      child._parent = this._parent;\n      this._parent.addChild(child, loc++);\n    }\n  }\n\n  /**\n   * Insert another node as a parent of this node.\n   */\n  public insertAsParentOf(other: DataFlowNode) {\n    const parent = other.parent;\n    parent.removeChild(this);\n    this.parent = parent;\n    other.parent = this;\n  }\n\n  public swapWithParent() {\n    const parent = this._parent;\n    const newParent = parent.parent;\n\n    // reconnect the children\n    for (const child of this._children) {\n      child.parent = parent;\n    }\n\n    // remove old links\n    this._children = []; // equivalent to removing every child link one by one\n    parent.removeChild(this);\n    parent.parent.removeChild(parent);\n\n    // swap two nodes\n    this.parent = newParent;\n    parent.parent = this;\n  }\n}\n\nexport class OutputNode extends DataFlowNode {\n  private _source: string;\n\n  private _name: string;\n\n  public clone(): this {\n    const cloneObj = new (this.constructor as any)();\n    cloneObj.debugName = 'clone_' + this.debugName;\n    cloneObj._source = this._source;\n    cloneObj._name = 'clone_' + this._name;\n    cloneObj.type = this.type;\n    cloneObj.refCounts = this.refCounts;\n    cloneObj.refCounts[cloneObj._name] = 0;\n    return cloneObj;\n  }\n\n  /**\n   * @param source The name of the source. Will change in assemble.\n   * @param type The type of the output node.\n   * @param refCounts A global ref counter map.\n   */\n  constructor(\n    parent: DataFlowNode,\n    source: string,\n    public readonly type: DataSourceType,\n    private readonly refCounts: Dict<number>\n  ) {\n    super(parent, source);\n\n    this._source = this._name = source;\n\n    if (this.refCounts && !(this._name in this.refCounts)) {\n      this.refCounts[this._name] = 0;\n    }\n  }\n\n  public dependentFields() {\n    return new Set<string>();\n  }\n\n  public producedFields() {\n    return new Set<string>();\n  }\n\n  public hash() {\n    if (this._hash === undefined) {\n      this._hash = `Output ${uniqueId()}`;\n    }\n    return this._hash;\n  }\n\n  /**\n   * Request the datasource name and increase the ref counter.\n   *\n   * During the parsing phase, this will return the simple name such as 'main' or 'raw'.\n   * It is crucial to request the name from an output node to mark it as a required node.\n   * If nobody ever requests the name, this datasource will not be instantiated in the assemble phase.\n   *\n   * In the assemble phase, this will return the correct name.\n   */\n  public getSource() {\n    this.refCounts[this._name]++;\n    return this._source;\n  }\n\n  public isRequired(): boolean {\n    return !!this.refCounts[this._name];\n  }\n\n  public setSource(source: string) {\n    this._source = source;\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"26824e065e93614de93be0ade267b6eb","cacheData":{"env":{}}}