{"id":"diAO","dependencies":[{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/optimizer.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/src/compile/data/optimizer.ts","includedInParent":true,"mtime":499162500000},{"name":"/home/toltm/data-viz/temperature/package.json","includedInParent":true,"mtime":1591974159200},{"name":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"./source","loc":{"line":1,"column":27},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/optimizer.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/source.js"},{"name":"./graticule","loc":{"line":2,"column":30},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/optimizer.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/graticule.js"},{"name":"./sequence","loc":{"line":3,"column":29},"parent":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/optimizer.js","resolved":"/home/toltm/data-viz/temperature/node_modules/vega-lite/build/src/compile/data/sequence.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.isDataSourceNode=i,exports.TopDownOptimizer=exports.BottomUpOptimizer=void 0;var t=require(\"./source\"),e=require(\"./graticule\"),s=require(\"./sequence\");function i(i){return i instanceof t.SourceNode||i instanceof e.GraticuleNode||i instanceof s.SequenceNode}class o{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class r extends o{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:e}){t&&this.setContinue(),e&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(i(t))return!1;const e=t.parent,{continueFlag:s}=this.run(t);return s&&this.optimizeNextFromLeaves(e),this.mutatedFlag}}exports.BottomUpOptimizer=r;class n extends o{}exports.TopDownOptimizer=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":0}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":13}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":20}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":35}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":43}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":56}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":57}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":64}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":68}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":76}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":93}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":95}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":103}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":120}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":128}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":151}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":153}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":157}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":159}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":167}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":179}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":181}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":189}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":204}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":206}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":214}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":1,"column":228}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":237}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":10,"column":33},"generated":{"line":1,"column":239}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":242}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":249}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":25},"generated":{"line":1,"column":262}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":264}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":39},"generated":{"line":1,"column":276}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":55},"generated":{"line":1,"column":289}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":9},"generated":{"line":1,"column":291}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":72},"generated":{"line":1,"column":306}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":88},"generated":{"line":1,"column":319}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":321}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":334}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":18,"column":15},"generated":{"line":1,"column":340}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":342}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":356}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":361}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":371}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":24,"column":9},"generated":{"line":1,"column":373}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":25,"column":9},"generated":{"line":1,"column":386}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":25,"column":9},"generated":{"line":1,"column":391}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":25,"column":20},"generated":{"line":1,"column":401}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":403}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":421}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":29,"column":11},"generated":{"line":1,"column":428}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":433}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":37,"column":6},"generated":{"line":1,"column":443}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":37,"column":22},"generated":{"line":1,"column":449}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":37,"column":48},"generated":{"line":1,"column":459}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":461}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":41,"column":4},"generated":{"line":1,"column":475}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":42,"column":9},"generated":{"line":1,"column":483}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":42,"column":9},"generated":{"line":1,"column":488}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":42,"column":21},"generated":{"line":1,"column":499}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":1,"column":501}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":515}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":520}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":531}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":49,"column":6},"generated":{"line":1,"column":533}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":552}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":559}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":564}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":574}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":11},"generated":{"line":1,"column":586}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":11},"generated":{"line":1,"column":592}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":593}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":26},"generated":{"line":1,"column":606}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":31},"generated":{"line":1,"column":611}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":45},"generated":{"line":1,"column":624}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":58},"generated":{"line":1,"column":636}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":54,"column":63},"generated":{"line":1,"column":641}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":654}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":665}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":57,"column":13},"generated":{"line":1,"column":678}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":680}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":57,"column":27},"generated":{"line":1,"column":692}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":1,"column":696}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":699}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":704}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":718}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":62,"column":11},"generated":{"line":1,"column":721}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":62,"column":11},"generated":{"line":1,"column":726}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":71,"column":9},"generated":{"line":1,"column":739}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":1,"column":748}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":75,"column":32},"generated":{"line":1,"column":771}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":76,"column":8},"generated":{"line":1,"column":774}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":76,"column":8},"generated":{"line":1,"column":777}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":76,"column":25},"generated":{"line":1,"column":779}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":77,"column":13},"generated":{"line":1,"column":782}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":77,"column":13},"generated":{"line":1,"column":789}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":791}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":79,"column":10},"generated":{"line":1,"column":797}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":79,"column":17},"generated":{"line":1,"column":799}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":79,"column":22},"generated":{"line":1,"column":801}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":80,"column":10},"generated":{"line":1,"column":809}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":80,"column":11},"generated":{"line":1,"column":822}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":80,"column":27},"generated":{"line":1,"column":825}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":80,"column":32},"generated":{"line":1,"column":830}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":80,"column":36},"generated":{"line":1,"column":834}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":1,"column":837}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":844}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":82,"column":11},"generated":{"line":1,"column":847}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":82,"column":11},"generated":{"line":1,"column":852}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":82,"column":34},"generated":{"line":1,"column":875}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":1,"column":878}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":84,"column":16},"generated":{"line":1,"column":883}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":896}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":904}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":922}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":6},"generated":{"line":1,"column":924}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":22},"generated":{"line":1,"column":930}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":47},"generated":{"line":1,"column":940}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":943}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":951}},{"source":"../../../../src/compile/data/optimizer.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":968}}],"sources":{"../../../../src/compile/data/optimizer.ts":"import {DataFlowNode} from './dataflow';\nimport {OptimizerFlags} from './optimizers';\nimport {SourceNode} from './source';\nimport {GraticuleNode} from './graticule';\nimport {SequenceNode} from './sequence';\n\n/**\n * Whether this dataflow node is the source of the dataflow that produces data i.e. a source or a generator.\n */\nexport function isDataSourceNode(node: DataFlowNode) {\n  return node instanceof SourceNode || node instanceof GraticuleNode || node instanceof SequenceNode;\n}\n\n/**\n * Abstract base class for BottomUpOptimizer and TopDownOptimizer.\n * Contains only mutation handling logic. Subclasses need to implement iteration logic.\n */\nabstract class OptimizerBase {\n  private _mutated: boolean;\n  constructor() {\n    this._mutated = false;\n  }\n  // Once true, _mutated is never set to false\n  public setMutated() {\n    this._mutated = true;\n  }\n\n  get mutatedFlag() {\n    return this._mutated;\n  }\n}\n\n/**\n * Starts from a node and runs the optimization function(the \"run\" method) upwards to the root,\n * depending on the continueFlag and mutatedFlag values returned by the optimization function.\n */\nexport abstract class BottomUpOptimizer extends OptimizerBase {\n  private _continue: boolean;\n\n  constructor() {\n    super();\n    this._continue = false;\n  }\n\n  public setContinue() {\n    this._continue = true;\n  }\n\n  get continueFlag() {\n    return this._continue;\n  }\n\n  get flags(): OptimizerFlags {\n    return {continueFlag: this.continueFlag, mutatedFlag: this.mutatedFlag};\n  }\n\n  set flags({continueFlag, mutatedFlag}: OptimizerFlags) {\n    if (continueFlag) {\n      this.setContinue();\n    }\n    if (mutatedFlag) {\n      this.setMutated();\n    }\n  }\n\n  public abstract run(node: DataFlowNode): OptimizerFlags;\n\n  /**\n   * Reset the state of the optimizer after it has completed a run from the bottom of the tree to the top.\n   */\n  public reset(): void {\n    // do nothing\n  }\n\n  public optimizeNextFromLeaves(node: DataFlowNode): boolean {\n    if (isDataSourceNode(node)) {\n      return false;\n    }\n    const next = node.parent;\n    const {continueFlag} = this.run(node);\n    if (continueFlag) {\n      this.optimizeNextFromLeaves(next);\n    }\n    return this.mutatedFlag;\n  }\n}\n\n/**\n * The optimizer function( the \"run\" method), is invoked on the given node and then continues recursively.\n */\nexport abstract class TopDownOptimizer extends OptimizerBase {\n  public abstract run(node: DataFlowNode): boolean;\n}\n"},"lineCount":null}},"error":null,"hash":"8839432240aa8bc3e83f92b8c34d5309","cacheData":{"env":{}}}